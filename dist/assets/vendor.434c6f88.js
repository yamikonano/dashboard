function t(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const e=t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function n(t){return!!t||""===t}function r(t){if(T(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],o=A(i)?s(i):r(i);if(o)for(const t in o)e[t]=o[t]}return e}return A(t)||P(t)?t:void 0}const i=/;(?![^(]*\))/g,o=/:(.+)/;function s(t){const e={};return t.split(i).forEach((t=>{if(t){const n=t.split(o);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function a(t){let e="";if(A(t))e=t;else if(T(t))for(let n=0;n<t.length;n++){const r=a(t[n]);r&&(e+=r+" ")}else if(P(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function u(t,e){if(t===e)return!0;let n=C(t),r=C(e);if(n||r)return!(!n||!r)&&t.getTime()===e.getTime();if(n=T(t),r=T(e),n||r)return!(!n||!r)&&function(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=u(t[r],e[r]);return n}(t,e);if(n=P(t),r=P(e),n||r){if(!n||!r)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t){const r=t.hasOwnProperty(n),i=e.hasOwnProperty(n);if(r&&!i||!r&&i||!u(t[n],e[n]))return!1}}return String(t)===String(e)}function c(t,e){return t.findIndex((t=>u(t,e)))}const l=t=>null==t?"":T(t)||P(t)&&(t.toString===x||!k(t.toString))?JSON.stringify(t,h,2):String(t),h=(t,e)=>e&&e.__v_isRef?h(t,e.value):E(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:S(e)?{[`Set(${e.size})`]:[...e.values()]}:!P(e)||T(e)||D(e)?e:String(e),f={},p=[],d=()=>{},v=()=>!1,g=/^on[^a-z]/,m=t=>g.test(t),y=t=>t.startsWith("onUpdate:"),b=Object.assign,_=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},w=Object.prototype.hasOwnProperty,I=(t,e)=>w.call(t,e),T=Array.isArray,E=t=>"[object Map]"===O(t),S=t=>"[object Set]"===O(t),C=t=>t instanceof Date,k=t=>"function"==typeof t,A=t=>"string"==typeof t,N=t=>"symbol"==typeof t,P=t=>null!==t&&"object"==typeof t,R=t=>P(t)&&k(t.then)&&k(t.catch),x=Object.prototype.toString,O=t=>x.call(t),D=t=>"[object Object]"===O(t),L=t=>A(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,M=t(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),F=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},U=/-(\w)/g,j=F((t=>t.replace(U,((t,e)=>e?e.toUpperCase():"")))),q=/\B([A-Z])/g,V=F((t=>t.replace(q,"-$1").toLowerCase())),B=F((t=>t.charAt(0).toUpperCase()+t.slice(1))),K=F((t=>t?`on${B(t)}`:"")),W=(t,e)=>!Object.is(t,e),H=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},z=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},G=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Q;const $=[];class Y{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Q&&(this.parent=Q,this.index=(Q.scopes||(Q.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&($.push(this),Q=this)}off(){this.active&&($.pop(),Q=$[$.length-1])}stop(t){if(this.active){if(this.effects.forEach((t=>t.stop())),this.cleanups.forEach((t=>t())),this.scopes&&this.scopes.forEach((t=>t.stop(!0))),this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}const X=t=>{const e=new Set(t);return e.w=0,e.n=0,e},J=t=>(t.w&nt)>0,Z=t=>(t.n&nt)>0,tt=new WeakMap;let et=0,nt=1;const rt=[];let it;const ot=Symbol(""),st=Symbol("");class at{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],function(t,e){(e=e||Q)&&e.active&&e.effects.push(t)}(this,n)}run(){if(!this.active)return this.fn();if(!rt.includes(this))try{return rt.push(it=this),lt.push(ct),ct=!0,nt=1<<++et,et<=30?(({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=nt})(this):ut(this),this.fn()}finally{et<=30&&(t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];J(i)&&!Z(i)?i.delete(t):e[n++]=i,i.w&=~nt,i.n&=~nt}e.length=n}})(this),nt=1<<--et,ft(),rt.pop();const t=rt.length;it=t>0?rt[t-1]:void 0}}stop(){this.active&&(ut(this),this.onStop&&this.onStop(),this.active=!1)}}function ut(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let ct=!0;const lt=[];function ht(){lt.push(ct),ct=!1}function ft(){const t=lt.pop();ct=void 0===t||t}function pt(t,e,n){if(!dt())return;let r=tt.get(t);r||tt.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=X()),vt(i)}function dt(){return ct&&void 0!==it}function vt(t,e){let n=!1;et<=30?Z(t)||(t.n|=nt,n=!J(t)):n=!t.has(it),n&&(t.add(it),it.deps.push(t))}function gt(t,e,n,r,i,o){const s=tt.get(t);if(!s)return;let a=[];if("clear"===e)a=[...s.values()];else if("length"===n&&T(t))s.forEach(((t,e)=>{("length"===e||e>=r)&&a.push(t)}));else switch(void 0!==n&&a.push(s.get(n)),e){case"add":T(t)?L(n)&&a.push(s.get("length")):(a.push(s.get(ot)),E(t)&&a.push(s.get(st)));break;case"delete":T(t)||(a.push(s.get(ot)),E(t)&&a.push(s.get(st)));break;case"set":E(t)&&a.push(s.get(ot))}if(1===a.length)a[0]&&mt(a[0]);else{const t=[];for(const e of a)e&&t.push(...e);mt(X(t))}}function mt(t,e){for(const n of T(t)?t:[...t])(n!==it||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const yt=t("__proto__,__v_isRef,__isVue"),bt=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(N)),_t=St(),wt=St(!1,!0),It=St(!0),Tt=Et();function Et(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=le(this);for(let e=0,i=this.length;e<i;e++)pt(n,0,e+"");const r=n[e](...t);return-1===r||!1===r?n[e](...t.map(le)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){ht();const n=le(this)[e].apply(this,t);return ft(),n}})),t}function St(t=!1,e=!1){return function(n,r,i){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_raw"===r&&i===(t?e?ne:ee:e?te:Zt).get(n))return n;const o=T(n);if(!t&&o&&I(Tt,r))return Reflect.get(Tt,r,i);const s=Reflect.get(n,r,i);if(N(r)?bt.has(r):yt(r))return s;if(t||pt(n,0,r),e)return s;if(ve(s)){return!o||!L(r)?s.value:s}return P(s)?t?oe(s):ie(s):s}}function Ct(t=!1){return function(e,n,r,i){let o=e[n];if(!t&&(r=le(r),o=le(o),!T(e)&&ve(o)&&!ve(r)))return o.value=r,!0;const s=T(e)&&L(n)?Number(n)<e.length:I(e,n),a=Reflect.set(e,n,r,i);return e===le(i)&&(s?W(r,o)&&gt(e,"set",n,r):gt(e,"add",n,r)),a}}const kt={get:_t,set:Ct(),deleteProperty:function(t,e){const n=I(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&gt(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return N(e)&&bt.has(e)||pt(t,0,e),n},ownKeys:function(t){return pt(t,0,T(t)?"length":ot),Reflect.ownKeys(t)}},At={get:It,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},Nt=b({},kt,{get:wt,set:Ct(!0)}),Pt=t=>P(t)?ie(t):t,Rt=t=>P(t)?oe(t):t,xt=t=>t,Ot=t=>Reflect.getPrototypeOf(t);function Dt(t,e,n=!1,r=!1){const i=le(t=t.__v_raw),o=le(e);e!==o&&!n&&pt(i,0,e),!n&&pt(i,0,o);const{has:s}=Ot(i),a=r?xt:n?Rt:Pt;return s.call(i,e)?a(t.get(e)):s.call(i,o)?a(t.get(o)):void(t!==i&&t.get(e))}function Lt(t,e=!1){const n=this.__v_raw,r=le(n),i=le(t);return t!==i&&!e&&pt(r,0,t),!e&&pt(r,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function Mt(t,e=!1){return t=t.__v_raw,!e&&pt(le(t),0,ot),Reflect.get(t,"size",t)}function Ft(t){t=le(t);const e=le(this);return Ot(e).has.call(e,t)||(e.add(t),gt(e,"add",t,t)),this}function Ut(t,e){e=le(e);const n=le(this),{has:r,get:i}=Ot(n);let o=r.call(n,t);o||(t=le(t),o=r.call(n,t));const s=i.call(n,t);return n.set(t,e),o?W(e,s)&&gt(n,"set",t,e):gt(n,"add",t,e),this}function jt(t){const e=le(this),{has:n,get:r}=Ot(e);let i=n.call(e,t);i||(t=le(t),i=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return i&&gt(e,"delete",t,void 0),o}function qt(){const t=le(this),e=0!==t.size,n=t.clear();return e&&gt(t,"clear",void 0,void 0),n}function Vt(t,e){return function(n,r){const i=this,o=i.__v_raw,s=le(o),a=e?xt:t?Rt:Pt;return!t&&pt(s,0,ot),o.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}}function Bt(t,e,n){return function(...r){const i=this.__v_raw,o=le(i),s=E(o),a="entries"===t||t===Symbol.iterator&&s,u="keys"===t&&s,c=i[t](...r),l=n?xt:e?Rt:Pt;return!e&&pt(o,0,u?st:ot),{next(){const{value:t,done:e}=c.next();return e?{value:t,done:e}:{value:a?[l(t[0]),l(t[1])]:l(t),done:e}},[Symbol.iterator](){return this}}}}function Kt(t){return function(...e){return"delete"!==t&&this}}function Wt(){const t={get(t){return Dt(this,t)},get size(){return Mt(this)},has:Lt,add:Ft,set:Ut,delete:jt,clear:qt,forEach:Vt(!1,!1)},e={get(t){return Dt(this,t,!1,!0)},get size(){return Mt(this)},has:Lt,add:Ft,set:Ut,delete:jt,clear:qt,forEach:Vt(!1,!0)},n={get(t){return Dt(this,t,!0)},get size(){return Mt(this,!0)},has(t){return Lt.call(this,t,!0)},add:Kt("add"),set:Kt("set"),delete:Kt("delete"),clear:Kt("clear"),forEach:Vt(!0,!1)},r={get(t){return Dt(this,t,!0,!0)},get size(){return Mt(this,!0)},has(t){return Lt.call(this,t,!0)},add:Kt("add"),set:Kt("set"),delete:Kt("delete"),clear:Kt("clear"),forEach:Vt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{t[i]=Bt(i,!1,!1),n[i]=Bt(i,!0,!1),e[i]=Bt(i,!1,!0),r[i]=Bt(i,!0,!0)})),[t,n,e,r]}const[Ht,zt,Gt,Qt]=Wt();function $t(t,e){const n=e?t?Qt:Gt:t?zt:Ht;return(e,r,i)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(I(n,r)&&r in e?n:e,r,i)}const Yt={get:$t(!1,!1)},Xt={get:$t(!1,!0)},Jt={get:$t(!0,!1)},Zt=new WeakMap,te=new WeakMap,ee=new WeakMap,ne=new WeakMap;function re(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>O(t).slice(8,-1))(t))}function ie(t){return t&&t.__v_isReadonly?t:se(t,!1,kt,Yt,Zt)}function oe(t){return se(t,!0,At,Jt,ee)}function se(t,e,n,r,i){if(!P(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const s=re(t);if(0===s)return t;const a=new Proxy(t,2===s?r:n);return i.set(t,a),a}function ae(t){return ue(t)?ae(t.__v_raw):!(!t||!t.__v_isReactive)}function ue(t){return!(!t||!t.__v_isReadonly)}function ce(t){return ae(t)||ue(t)}function le(t){const e=t&&t.__v_raw;return e?le(e):t}function he(t){return z(t,"__v_skip",!0),t}function fe(t){dt()&&((t=le(t)).dep||(t.dep=X()),vt(t.dep))}function pe(t,e){(t=le(t)).dep&&mt(t.dep)}const de=t=>P(t)?ie(t):t;function ve(t){return Boolean(t&&!0===t.__v_isRef)}function ge(t){return ye(t)}class me{constructor(t,e=!1){this._shallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:le(t),this._value=e?t:de(t)}get value(){return fe(this),this._value}set value(t){t=this._shallow?t:le(t),W(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:de(t),pe(this))}}function ye(t,e=!1){return ve(t)?t:new me(t,e)}function be(t){return ve(t)?t.value:t}const _e={get:(t,e,n)=>be(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return ve(i)&&!ve(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function we(t){return ae(t)?t:new Proxy(t,_e)}class Ie{constructor(t,e,n){this._setter=e,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new at(t,(()=>{this._dirty||(this._dirty=!0,pe(this))})),this.__v_isReadonly=n}get value(){const t=le(this);return fe(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Te(t,e){let n,r;k(t)?(n=t,r=d):(n=t.get,r=t.set);return new Ie(n,r,k(t)||!t.set)}Promise.resolve();function Ee(t,e,...n){const r=t.vnode.props||f;let i=n;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in r){const t=`${"modelValue"===s?"model":s}Modifiers`,{number:e,trim:o}=r[t]||f;o?i=n.map((t=>t.trim())):e&&(i=n.map(G))}let a,u=r[a=K(e)]||r[a=K(j(e))];!u&&o&&(u=r[a=K(V(e))]),u&&Gr(u,t,6,i);const c=r[a+"Once"];if(c){if(t.emitted){if(t.emitted[a])return}else t.emitted={};t.emitted[a]=!0,Gr(c,t,6,i)}}function Se(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(void 0!==i)return i;const o=t.emits;let s={},a=!1;if(!k(t)){const r=t=>{const n=Se(t,e,!0);n&&(a=!0,b(s,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return o||a?(T(o)?o.forEach((t=>s[t]=null)):b(s,o),r.set(t,s),s):(r.set(t,null),null)}function Ce(t,e){return!(!t||!m(e))&&(e=e.slice(2).replace(/Once$/,""),I(t,e[0].toLowerCase()+e.slice(1))||I(t,V(e))||I(t,e))}let ke=null,Ae=null;function Ne(t){const e=ke;return ke=t,Ae=t&&t.type.__scopeId||null,e}function Pe(t){Ae=t}function Re(){Ae=null}function xe(t,e=ke,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&cr(-1);const i=Ne(e),o=t(...n);return Ne(i),r._d&&cr(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function Oe(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:a,attrs:u,emit:c,render:l,renderCache:h,data:f,setupState:p,ctx:d,inheritAttrs:v}=t;let g;const m=Ne(t);try{let t;if(4&n.shapeFlag){const e=i||r;g=Er(l.call(e,e,h,o,p,f,d)),t=u}else{const n=e;0,g=Er(n.length>1?n(o,{attrs:u,slots:a,emit:c}):n(o,null)),t=e.props?u:De(u)}let m=g;if(t&&!1!==v){const e=Object.keys(t),{shapeFlag:n}=m;e.length&&7&n&&(s&&e.some(y)&&(t=Le(t,s)),m=_r(m,t))}0,n.dirs&&(m.dirs=m.dirs?m.dirs.concat(n.dirs):n.dirs),n.transition&&(m.transition=n.transition),g=m}catch(b){or.length=0,Qr(b,t,1),g=br(rr)}return Ne(m),g}const De=t=>{let e;for(const n in t)("class"===n||"style"===n||m(n))&&((e||(e={}))[n]=t[n]);return e},Le=(t,e)=>{const n={};for(const r in t)y(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function Me(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!Ce(n,o))return!0}return!1}function Fe(t,e){if(Mr){let n=Mr.provides;const r=Mr.parent&&Mr.parent.provides;r===n&&(n=Mr.provides=Object.create(r)),n[t]=e}else;}function Ue(t,e,n=!1){const r=Mr||ke;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&k(e)?e.call(r.proxy):e}}const je=[Function,Array],qe={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:je,onEnter:je,onAfterEnter:je,onEnterCancelled:je,onBeforeLeave:je,onLeave:je,onAfterLeave:je,onLeaveCancelled:je,onBeforeAppear:je,onAppear:je,onAfterAppear:je,onAppearCancelled:je},setup(t,{slots:e}){const n=Fr(),r=function(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return rn((()=>{t.isMounted=!0})),an((()=>{t.isUnmounting=!0})),t}();let i;return()=>{const o=e.default&&ze(e.default(),!0);if(!o||!o.length)return;const s=le(t),{mode:a}=s,u=o[0];if(r.isLeaving)return Ke(u);const c=We(u);if(!c)return Ke(u);const l=Be(c,s,r,n);He(c,l);const h=n.subTree,f=h&&We(h);let p=!1;const{getTransitionKey:d}=c.type;if(d){const t=d();void 0===i?i=t:t!==i&&(i=t,p=!0)}if(f&&f.type!==rr&&(!dr(c,f)||p)){const t=Be(f,s,r,n);if(He(f,t),"out-in"===a)return r.isLeaving=!0,t.afterLeave=()=>{r.isLeaving=!1,n.update()},Ke(u);"in-out"===a&&c.type!==rr&&(t.delayLeave=(t,e,n)=>{Ve(r,f)[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=n})}return u}}};function Ve(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Be(t,e,n,r){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:c,onEnterCancelled:l,onBeforeLeave:h,onLeave:f,onAfterLeave:p,onLeaveCancelled:d,onBeforeAppear:v,onAppear:g,onAfterAppear:m,onAppearCancelled:y}=e,b=String(t.key),_=Ve(n,t),w=(t,e)=>{t&&Gr(t,r,9,e)},I={mode:o,persisted:s,beforeEnter(e){let r=a;if(!n.isMounted){if(!i)return;r=v||a}e._leaveCb&&e._leaveCb(!0);const o=_[b];o&&dr(t,o)&&o.el._leaveCb&&o.el._leaveCb(),w(r,[e])},enter(t){let e=u,r=c,o=l;if(!n.isMounted){if(!i)return;e=g||u,r=m||c,o=y||l}let s=!1;const a=t._enterCb=e=>{s||(s=!0,w(e?o:r,[t]),I.delayedLeave&&I.delayedLeave(),t._enterCb=void 0)};e?(e(t,a),e.length<=1&&a()):a()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();w(h,[e]);let o=!1;const s=e._leaveCb=n=>{o||(o=!0,r(),w(n?d:p,[e]),e._leaveCb=void 0,_[i]===t&&delete _[i])};_[i]=t,f?(f(e,s),f.length<=1&&s()):s()},clone:t=>Be(t,e,n,r)};return I}function Ke(t){if($e(t))return(t=_r(t)).children=null,t}function We(t){return $e(t)?t.children?t.children[0]:void 0:t}function He(t,e){6&t.shapeFlag&&t.component?He(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ze(t,e=!1){let n=[],r=0;for(let i=0;i<t.length;i++){const o=t[i];o.type===er?(128&o.patchFlag&&r++,n=n.concat(ze(o.children,e))):(e||o.type!==rr)&&n.push(o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}function Ge(t){return k(t)?{setup:t,name:t.name}:t}const Qe=t=>!!t.type.__asyncLoader,$e=t=>t.type.__isKeepAlive;function Ye(t,e){Je(t,"a",e)}function Xe(t,e){Je(t,"da",e)}function Je(t,e,n=Mr){const r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(tn(e,r,n),n){let t=n.parent;for(;t&&t.parent;)$e(t.parent.vnode)&&Ze(r,e,n,t),t=t.parent}}function Ze(t,e,n,r){const i=tn(e,t,r,!0);un((()=>{_(r[e],i)}),n)}function tn(t,e,n=Mr,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;ht(),Ur(n);const i=Gr(e,n,t,r);return jr(),ft(),i});return r?i.unshift(o):i.push(o),o}}const en=t=>(e,n=Mr)=>(!Vr||"sp"===t)&&tn(t,e,n),nn=en("bm"),rn=en("m"),on=en("bu"),sn=en("u"),an=en("bum"),un=en("um"),cn=en("sp"),ln=en("rtg"),hn=en("rtc");function fn(t,e=Mr){tn("ec",t,e)}let pn=!0;function dn(t){const e=mn(t),n=t.proxy,r=t.ctx;pn=!1,e.beforeCreate&&vn(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:s,watch:a,provide:u,inject:c,created:l,beforeMount:h,mounted:f,beforeUpdate:p,updated:v,activated:g,deactivated:m,beforeDestroy:y,beforeUnmount:b,destroyed:_,unmounted:w,render:I,renderTracked:E,renderTriggered:S,errorCaptured:C,serverPrefetch:A,expose:N,inheritAttrs:R,components:x,directives:O,filters:D}=e;if(c&&function(t,e,n=d,r=!1){T(t)&&(t=wn(t));for(const i in t){const n=t[i];let o;o=P(n)?"default"in n?Ue(n.from||i,n.default,!0):Ue(n.from||i):Ue(n),ve(o)&&r?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t}):e[i]=o}}(c,r,null,t.appContext.config.unwrapInjectedRef),s)for(const d in s){const t=s[d];k(t)&&(r[d]=t.bind(n))}if(i){const e=i.call(n,n);P(e)&&(t.data=ie(e))}if(pn=!0,o)for(const T in o){const t=o[T],e=Te({get:k(t)?t.bind(n,n):k(t.get)?t.get.bind(n,n):d,set:!k(t)&&k(t.set)?t.set.bind(n):d});Object.defineProperty(r,T,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}if(a)for(const d in a)gn(a[d],r,n,d);if(u){const t=k(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{Fe(e,t[e])}))}function L(t,e){T(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(l&&vn(l,t,"c"),L(nn,h),L(rn,f),L(on,p),L(sn,v),L(Ye,g),L(Xe,m),L(fn,C),L(hn,E),L(ln,S),L(an,b),L(un,w),L(cn,A),T(N))if(N.length){const e=t.exposed||(t.exposed={});N.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});I&&t.render===d&&(t.render=I),null!=R&&(t.inheritAttrs=R),x&&(t.components=x),O&&(t.directives=O)}function vn(t,e,n){Gr(T(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function gn(t,e,n,r){const i=r.includes(".")?wi(n,r):()=>n[r];if(A(t)){const n=e[t];k(n)&&yi(i,n)}else if(k(t))yi(i,t.bind(n));else if(P(t))if(T(t))t.forEach((t=>gn(t,e,n,r)));else{const r=k(t.handler)?t.handler.bind(n):e[t.handler];k(r)&&yi(i,r,t)}}function mn(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,a=o.get(e);let u;return a?u=a:i.length||n||r?(u={},i.length&&i.forEach((t=>yn(u,t,s,!0))),yn(u,e,s)):u=e,o.set(e,u),u}function yn(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&yn(t,o,n,!0),i&&i.forEach((e=>yn(t,e,n,!0)));for(const s in e)if(r&&"expose"===s);else{const r=bn[s]||n&&n[s];t[s]=r?r(t[s],e[s]):e[s]}return t}const bn={data:_n,props:Tn,emits:Tn,methods:Tn,computed:Tn,beforeCreate:In,created:In,beforeMount:In,mounted:In,beforeUpdate:In,updated:In,beforeDestroy:In,destroyed:In,activated:In,deactivated:In,errorCaptured:In,serverPrefetch:In,components:Tn,directives:Tn,watch:function(t,e){if(!t)return e;if(!e)return t;const n=b(Object.create(null),t);for(const r in e)n[r]=In(t[r],e[r]);return n},provide:_n,inject:function(t,e){return Tn(wn(t),wn(e))}};function _n(t,e){return e?t?function(){return b(k(t)?t.call(this,this):t,k(e)?e.call(this,this):e)}:e:t}function wn(t){if(T(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function In(t,e){return t?[...new Set([].concat(t,e))]:e}function Tn(t,e){return t?b(b(Object.create(null),t),e):e}function En(t,e,n,r=!1){const i={},o={};z(o,vr,1),t.propsDefaults=Object.create(null),Sn(t,e,i,o);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:se(i,!1,Nt,Xt,te):t.type.props?t.props=i:t.props=o,t.attrs=o}function Sn(t,e,n,r){const[i,o]=t.propsOptions;let s,a=!1;if(e)for(let u in e){if(M(u))continue;const c=e[u];let l;i&&I(i,l=j(u))?o&&o.includes(l)?(s||(s={}))[l]=c:n[l]=c:Ce(t.emitsOptions,u)||c!==r[u]&&(r[u]=c,a=!0)}if(o){const e=le(n),r=s||f;for(let s=0;s<o.length;s++){const a=o[s];n[a]=Cn(i,e,a,r[a],t,!I(r,a))}}return a}function Cn(t,e,n,r,i,o){const s=t[n];if(null!=s){const t=I(s,"default");if(t&&void 0===r){const t=s.default;if(s.type!==Function&&k(t)){const{propsDefaults:o}=i;n in o?r=o[n]:(Ur(i),r=o[n]=t.call(null,e),jr())}else r=t}s[0]&&(o&&!t?r=!1:!s[1]||""!==r&&r!==V(n)||(r=!0))}return r}function kn(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const o=t.props,s={},a=[];let u=!1;if(!k(t)){const r=t=>{u=!0;const[n,r]=kn(t,e,!0);b(s,n),r&&a.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!o&&!u)return r.set(t,p),p;if(T(o))for(let l=0;l<o.length;l++){const t=j(o[l]);An(t)&&(s[t]=f)}else if(o)for(const l in o){const t=j(l);if(An(t)){const e=o[l],n=s[t]=T(e)||k(e)?{type:e}:e;if(n){const e=Rn(Boolean,n.type),r=Rn(String,n.type);n[0]=e>-1,n[1]=r<0||e<r,(e>-1||I(n,"default"))&&a.push(t)}}}const c=[s,a];return r.set(t,c),c}function An(t){return"$"!==t[0]}function Nn(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:null===t?"null":""}function Pn(t,e){return Nn(t)===Nn(e)}function Rn(t,e){return T(e)?e.findIndex((e=>Pn(e,t))):k(e)&&Pn(e,t)?0:-1}const xn=t=>"_"===t[0]||"$stable"===t,On=t=>T(t)?t.map(Er):[Er(t)],Dn=(t,e,n)=>{const r=xe(((...t)=>On(e(...t))),n);return r._c=!1,r},Ln=(t,e,n)=>{const r=t._ctx;for(const i in t){if(xn(i))continue;const n=t[i];if(k(n))e[i]=Dn(0,n,r);else if(null!=n){const t=On(n);e[i]=()=>t}}},Mn=(t,e)=>{const n=On(e);t.slots.default=()=>n};function Fn(t,e){if(null===ke)return t;const n=ke.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[t,o,s,a=f]=e[i];k(t)&&(t={mounted:t,updated:t}),t.deep&&Ii(o),r.push({dir:t,instance:n,value:o,oldValue:void 0,arg:s,modifiers:a})}return t}function Un(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let u=a.dir[r];u&&(ht(),Gr(u,n,8,[t.el,a,t,e]),ft())}}function jn(){return{app:null,config:{isNativeTag:v,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qn=0;function Vn(t,e){return function(n,r=null){null==r||P(r)||(r=null);const i=jn(),o=new Set;let s=!1;const a=i.app={_uid:qn++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Ei,get config(){return i.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&k(t.install)?(o.add(t),t.install(a,...e)):k(t)&&(o.add(t),t(a,...e))),a),mixin:t=>(i.mixins.includes(t)||i.mixins.push(t),a),component:(t,e)=>e?(i.components[t]=e,a):i.components[t],directive:(t,e)=>e?(i.directives[t]=e,a):i.directives[t],mount(o,u,c){if(!s){const l=br(n,r);return l.appContext=i,u&&e?e(l,o):t(l,o,c),s=!0,a._container=o,o.__vue_app__=a,l.component.proxy}},unmount(){s&&(t(null,a._container),delete a._container.__vue_app__)},provide:(t,e)=>(i.provides[t]=e,a)};return a}}const Bn=function(t,e){e&&e.pendingBranch?T(t)?e.effects.push(...t):e.effects.push(t):hi(t,ri,ni,ii)};function Kn(t){return function(t,e){const{insert:n,remove:r,patchProp:i,createElement:o,createText:s,createComment:a,setText:u,setElementText:c,parentNode:l,nextSibling:h,setScopeId:v=d,cloneNode:g,insertStaticContent:m}=t,y=(t,e,n,r=null,i=null,o=null,s=!1,a=null,u=!!e.dynamicChildren)=>{if(t===e)return;t&&!dr(t,e)&&(r=et(t),$(t,i,o,!0),t=null),-2===e.patchFlag&&(u=!1,e.dynamicChildren=null);const{type:c,ref:l,shapeFlag:h}=e;switch(c){case nr:_(t,e,n,r);break;case rr:w(t,e,n,r);break;case ir:null==t&&T(e,n,r,s);break;case er:D(t,e,n,r,i,o,s,a,u);break;default:1&h?C(t,e,n,r,i,o,s,a,u):6&h?L(t,e,n,r,i,o,s,a,u):(64&h||128&h)&&c.process(t,e,n,r,i,o,s,a,u,rt)}null!=l&&i&&Wn(l,t&&t.ref,o,e||t,!e)},_=(t,e,r,i)=>{if(null==t)n(e.el=s(e.children),r,i);else{const n=e.el=t.el;e.children!==t.children&&u(n,e.children)}},w=(t,e,r,i)=>{null==t?n(e.el=a(e.children||""),r,i):e.el=t.el},T=(t,e,n,r)=>{[t.el,t.anchor]=m(t.children,e,n,r)},E=({el:t,anchor:e},r,i)=>{let o;for(;t&&t!==e;)o=h(t),n(t,r,i),t=o;n(e,r,i)},S=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=h(t),r(t),t=n;r(e)},C=(t,e,n,r,i,o,s,a,u)=>{s=s||"svg"===e.type,null==t?k(e,n,r,i,o,s,a,u):P(t,e,i,o,s,a,u)},k=(t,e,r,s,a,u,l,h)=>{let f,p;const{type:d,props:v,shapeFlag:m,transition:y,patchFlag:b,dirs:_}=t;if(t.el&&void 0!==g&&-1===b)f=t.el=g(t.el);else{if(f=t.el=o(t.type,u,v&&v.is,v),8&m?c(f,t.children):16&m&&N(t.children,f,null,s,a,u&&"foreignObject"!==d,l,h),_&&Un(t,null,s,"created"),v){for(const e in v)"value"===e||M(e)||i(f,e,null,v[e],u,t.children,s,a,tt);"value"in v&&i(f,"value",null,v.value),(p=v.onVnodeBeforeMount)&&Hn(p,s,t)}A(f,t,t.scopeId,l,s)}_&&Un(t,null,s,"beforeMount");const w=(!a||a&&!a.pendingBranch)&&y&&!y.persisted;w&&y.beforeEnter(f),n(f,e,r),((p=v&&v.onVnodeMounted)||w||_)&&Bn((()=>{p&&Hn(p,s,t),w&&y.enter(f),_&&Un(t,null,s,"mounted")}),a)},A=(t,e,n,r,i)=>{if(n&&v(t,n),r)for(let o=0;o<r.length;o++)v(t,r[o]);if(i){if(e===i.subTree){const e=i.vnode;A(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},N=(t,e,n,r,i,o,s,a,u=0)=>{for(let c=u;c<t.length;c++){const u=t[c]=a?Sr(t[c]):Er(t[c]);y(null,u,e,n,r,i,o,s,a)}},P=(t,e,n,r,o,s,a)=>{const u=e.el=t.el;let{patchFlag:l,dynamicChildren:h,dirs:p}=e;l|=16&t.patchFlag;const d=t.props||f,v=e.props||f;let g;(g=v.onVnodeBeforeUpdate)&&Hn(g,n,e,t),p&&Un(e,t,n,"beforeUpdate");const m=o&&"foreignObject"!==e.type;if(h?x(t.dynamicChildren,h,u,n,r,m,s):a||K(t,e,u,null,n,r,m,s,!1),l>0){if(16&l)O(u,e,d,v,n,r,o);else if(2&l&&d.class!==v.class&&i(u,"class",null,v.class,o),4&l&&i(u,"style",d.style,v.style,o),8&l){const s=e.dynamicProps;for(let e=0;e<s.length;e++){const a=s[e],c=d[a],l=v[a];l===c&&"value"!==a||i(u,a,c,l,o,t.children,n,r,tt)}}1&l&&t.children!==e.children&&c(u,e.children)}else a||null!=h||O(u,e,d,v,n,r,o);((g=v.onVnodeUpdated)||p)&&Bn((()=>{g&&Hn(g,n,e,t),p&&Un(e,t,n,"updated")}),r)},x=(t,e,n,r,i,o,s)=>{for(let a=0;a<e.length;a++){const u=t[a],c=e[a],h=u.el&&(u.type===er||!dr(u,c)||70&u.shapeFlag)?l(u.el):n;y(u,c,h,null,r,i,o,s,!0)}},O=(t,e,n,r,o,s,a)=>{if(n!==r){for(const u in r){if(M(u))continue;const c=r[u],l=n[u];c!==l&&"value"!==u&&i(t,u,l,c,a,e.children,o,s,tt)}if(n!==f)for(const u in n)M(u)||u in r||i(t,u,n[u],null,a,e.children,o,s,tt);"value"in r&&i(t,"value",n.value,r.value)}},D=(t,e,r,i,o,a,u,c,l)=>{const h=e.el=t?t.el:s(""),f=e.anchor=t?t.anchor:s("");let{patchFlag:p,dynamicChildren:d,slotScopeIds:v}=e;v&&(c=c?c.concat(v):v),null==t?(n(h,r,i),n(f,r,i),N(e.children,r,f,o,a,u,c,l)):p>0&&64&p&&d&&t.dynamicChildren?(x(t.dynamicChildren,d,r,o,a,u,c),(null!=e.key||o&&e===o.subTree)&&zn(t,e,!0)):K(t,e,r,f,o,a,u,c,l)},L=(t,e,n,r,i,o,s,a,u)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,u):F(e,n,r,i,o,s,u):U(t,e,u)},F=(t,e,n,r,i,o,s)=>{const a=t.component=function(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||Dr,o={uid:Lr++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,update:null,scope:new Y(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kn(r,i),emitsOptions:Se(r,i),emit:null,emitted:null,propsDefaults:f,inheritAttrs:r.inheritAttrs,ctx:f,data:f,props:f,attrs:f,slots:f,refs:f,setupState:f,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};o.ctx={_:o},o.root=e?e.root:o,o.emit=Ee.bind(null,o),t.ce&&t.ce(o);return o}(t,r,i);if($e(t)&&(a.ctx.renderer=rt),function(t,e=!1){Vr=e;const{props:n,children:r}=t.vnode,i=qr(t);En(t,n,i,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=le(e),z(e,"_",n)):Ln(e,t.slots={})}else t.slots={},e&&Mn(t,e);z(t.slots,vr,1)})(t,r);const o=i?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=he(new Proxy(t.ctx,Or));const{setup:r}=n;if(r){const n=t.setupContext=r.length>1?function(t){const e=e=>{t.exposed=e||{}};let n;return{get attrs(){return n||(n=function(t){return new Proxy(t.attrs,{get:(e,n)=>(pt(t,0,"$attrs"),e[n])})}(t))},slots:t.slots,emit:t.emit,expose:e}}(t):null;Ur(t),ht();const i=zr(r,t,0,[t.props,n]);if(ft(),jr(),R(i)){if(i.then(jr,jr),e)return i.then((e=>{Br(t,e)})).catch((e=>{Qr(e,t,0)}));t.asyncDep=i}else Br(t,i)}else Kr(t)}(t,e):void 0;Vr=!1}(a),a.asyncDep){if(i&&i.registerDep(a,q),!t.el){const t=a.subTree=br(rr);w(null,t,e,n)}}else q(a,t,e,n,i,o,s)},U=(t,e,n)=>{const r=e.component=t.component;if(function(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:u}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&u>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||Me(r,s,c):!!s);if(1024&u)return!0;if(16&u)return r?Me(r,s,c):!!s;if(8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!Ce(c,n))return!0}}return!1}(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void B(r,e,n);r.next=e,function(t){const e=Xr.indexOf(t);e>Jr&&Xr.splice(e,1)}(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},q=(t,e,n,r,i,o,s)=>{const a=new at((()=>{if(t.isMounted){let e,{next:n,bu:r,u:u,parent:c,vnode:h}=t,f=n;a.allowRecurse=!1,n?(n.el=h.el,B(t,n,s)):n=h,r&&H(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Hn(e,c,n,h),a.allowRecurse=!0;const p=Oe(t),d=t.subTree;t.subTree=p,y(d,p,l(d.el),et(d),t,i,o),n.el=p.el,null===f&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,p.el),u&&Bn(u,i),(e=n.props&&n.props.onVnodeUpdated)&&Bn((()=>Hn(e,c,n,h)),i)}else{let s;const{el:u,props:c}=e,{bm:l,m:h,parent:f}=t,p=Qe(e);if(a.allowRecurse=!1,l&&H(l),!p&&(s=c&&c.onVnodeBeforeMount)&&Hn(s,f,e),a.allowRecurse=!0,u&&ot){const n=()=>{t.subTree=Oe(t),ot(u,t.subTree,t,i,null)};p?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{const s=t.subTree=Oe(t);y(null,s,n,r,t,i,o),e.el=s.el}if(h&&Bn(h,i),!p&&(s=c&&c.onVnodeMounted)){const t=e;Bn((()=>Hn(s,f,t)),i)}256&e.shapeFlag&&t.a&&Bn(t.a,i),t.isMounted=!0,e=n=r=null}}),(()=>ci(t.update)),t.scope),u=t.update=a.run.bind(a);u.id=t.uid,a.allowRecurse=u.allowRecurse=!0,u()},B=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,a=le(i),[u]=t.propsOptions;let c=!1;if(!(r||s>0)||16&s){let r;Sn(t,e,i,o)&&(c=!0);for(const o in a)e&&(I(e,o)||(r=V(o))!==o&&I(e,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(i[o]=Cn(u,a,o,void 0,t,!0)):delete i[o]);if(o!==a)for(const t in o)e&&I(e,t)||(delete o[t],c=!0)}else if(8&s){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let s=n[r];const l=e[s];if(u)if(I(o,s))l!==o[s]&&(o[s]=l,c=!0);else{const e=j(s);i[e]=Cn(u,a,e,l,t,!1)}else l!==o[s]&&(o[s]=l,c=!0)}}c&&gt(t,"set","$attrs")}(t,e.props,r,n),((t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,s=f;if(32&r.shapeFlag){const t=e._;t?n&&1===t?o=!1:(b(i,e),n||1!==t||delete i._):(o=!e.$stable,Ln(e,i)),s=e}else e&&(Mn(t,e),s={default:1});if(o)for(const a in i)xn(a)||a in s||delete i[a]})(t,e.children,n),ht(),fi(void 0,t.update),ft()},K=(t,e,n,r,i,o,s,a,u=!1)=>{const l=t&&t.children,h=t?t.shapeFlag:0,f=e.children,{patchFlag:p,shapeFlag:d}=e;if(p>0){if(128&p)return void G(l,f,n,r,i,o,s,a,u);if(256&p)return void W(l,f,n,r,i,o,s,a,u)}8&d?(16&h&&tt(l,i,o),f!==l&&c(n,f)):16&h?16&d?G(l,f,n,r,i,o,s,a,u):tt(l,i,o,!0):(8&h&&c(n,""),16&d&&N(f,n,r,i,o,s,a,u))},W=(t,e,n,r,i,o,s,a,u)=>{e=e||p;const c=(t=t||p).length,l=e.length,h=Math.min(c,l);let f;for(f=0;f<h;f++){const r=e[f]=u?Sr(e[f]):Er(e[f]);y(t[f],r,n,null,i,o,s,a,u)}c>l?tt(t,i,o,!0,!1,h):N(e,n,r,i,o,s,a,u,h)},G=(t,e,n,r,i,o,s,a,u)=>{let c=0;const l=e.length;let h=t.length-1,f=l-1;for(;c<=h&&c<=f;){const r=t[c],l=e[c]=u?Sr(e[c]):Er(e[c]);if(!dr(r,l))break;y(r,l,n,null,i,o,s,a,u),c++}for(;c<=h&&c<=f;){const r=t[h],c=e[f]=u?Sr(e[f]):Er(e[f]);if(!dr(r,c))break;y(r,c,n,null,i,o,s,a,u),h--,f--}if(c>h){if(c<=f){const t=f+1,h=t<l?e[t].el:r;for(;c<=f;)y(null,e[c]=u?Sr(e[c]):Er(e[c]),n,h,i,o,s,a,u),c++}}else if(c>f)for(;c<=h;)$(t[c],i,o,!0),c++;else{const d=c,v=c,g=new Map;for(c=v;c<=f;c++){const t=e[c]=u?Sr(e[c]):Er(e[c]);null!=t.key&&g.set(t.key,c)}let m,b=0;const _=f-v+1;let w=!1,I=0;const T=new Array(_);for(c=0;c<_;c++)T[c]=0;for(c=d;c<=h;c++){const r=t[c];if(b>=_){$(r,i,o,!0);continue}let l;if(null!=r.key)l=g.get(r.key);else for(m=v;m<=f;m++)if(0===T[m-v]&&dr(r,e[m])){l=m;break}void 0===l?$(r,i,o,!0):(T[l-v]=c+1,l>=I?I=l:w=!0,y(r,e[l],n,null,i,o,s,a,u),b++)}const E=w?function(t){const e=t.slice(),n=[0];let r,i,o,s,a;const u=t.length;for(r=0;r<u;r++){const u=t[r];if(0!==u){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,t[n[a]]<u?o=a+1:s=a;u<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=e[s];return n}(T):p;for(m=E.length-1,c=_-1;c>=0;c--){const t=v+c,h=e[t],f=t+1<l?e[t+1].el:r;0===T[c]?y(null,h,n,f,i,o,s,a,u):w&&(m<0||c!==E[m]?Q(h,n,f,2):m--)}}},Q=(t,e,r,i,o=null)=>{const{el:s,type:a,transition:u,children:c,shapeFlag:l}=t;if(6&l)return void Q(t.component.subTree,e,r,i);if(128&l)return void t.suspense.move(e,r,i);if(64&l)return void a.move(t,e,r,rt);if(a===er){n(s,e,r);for(let t=0;t<c.length;t++)Q(c[t],e,r,i);return void n(t.anchor,e,r)}if(a===ir)return void E(t,e,r);if(2!==i&&1&l&&u)if(0===i)u.beforeEnter(s),n(s,e,r),Bn((()=>u.enter(s)),o);else{const{leave:t,delayLeave:i,afterLeave:o}=u,a=()=>n(s,e,r),c=()=>{t(s,(()=>{a(),o&&o()}))};i?i(s,a,c):c()}else n(s,e,r)},$=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:u,dynamicChildren:c,shapeFlag:l,patchFlag:h,dirs:f}=t;if(null!=a&&Wn(a,null,n,t,!0),256&l)return void e.ctx.deactivate(t);const p=1&l&&f,d=!Qe(t);let v;if(d&&(v=s&&s.onVnodeBeforeUnmount)&&Hn(v,e,t),6&l)Z(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);p&&Un(t,null,e,"beforeUnmount"),64&l?t.type.remove(t,e,n,i,rt,r):c&&(o!==er||h>0&&64&h)?tt(c,e,n,!1,!0):(o===er&&384&h||!i&&16&l)&&tt(u,e,n),r&&X(t)}(d&&(v=s&&s.onVnodeUnmounted)||p)&&Bn((()=>{v&&Hn(v,e,t),p&&Un(t,null,e,"unmounted")}),n)},X=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===er)return void J(n,i);if(e===ir)return void S(t);const s=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:r}=o,i=()=>e(n,s);r?r(t.el,s,i):i()}else s()},J=(t,e)=>{let n;for(;t!==e;)n=h(t),r(t),t=n;r(e)},Z=(t,e,n)=>{const{bum:r,scope:i,update:o,subTree:s,um:a}=t;r&&H(r),i.stop(),o&&(o.active=!1,$(s,t,e,n)),a&&Bn(a,e),Bn((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},tt=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)$(t[s],e,n,r,i)},et=t=>6&t.shapeFlag?et(t.component.subTree):128&t.shapeFlag?t.suspense.next():h(t.anchor||t.el),nt=(t,e,n)=>{null==t?e._vnode&&$(e._vnode,null,null,!0):y(e._vnode||null,t,e,null,null,null,n),pi(),e._vnode=t},rt={p:y,um:$,m:Q,r:X,mt:F,mc:N,pc:K,pbc:x,n:et,o:t};let it,ot;e&&([it,ot]=e(rt));return{render:nt,hydrate:it,createApp:Vn(nt,it)}}(t)}function Wn(t,e,n,r,i=!1){if(T(t))return void t.forEach(((t,o)=>Wn(t,e&&(T(e)?e[o]:e),n,r,i)));if(Qe(r)&&!i)return;const o=4&r.shapeFlag?Wr(r.component)||r.component.proxy:r.el,s=i?null:o,{i:a,r:u}=t,c=e&&e.r,l=a.refs===f?a.refs={}:a.refs,h=a.setupState;if(null!=c&&c!==u&&(A(c)?(l[c]=null,I(h,c)&&(h[c]=null)):ve(c)&&(c.value=null)),A(u)){const t=()=>{l[u]=s,I(h,u)&&(h[u]=s)};s?(t.id=-1,Bn(t,n)):t()}else if(ve(u)){const t=()=>{u.value=s};s?(t.id=-1,Bn(t,n)):t()}else k(u)&&zr(u,a,12,[s,l])}function Hn(t,e,n,r=null){Gr(t,e,7,[n,r])}function zn(t,e,n=!1){const r=t.children,i=e.children;if(T(r)&&T(i))for(let o=0;o<r.length;o++){const t=r[o];let e=i[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=i[o]=Sr(i[o]),e.el=t.el),n||zn(t,e))}}const Gn=t=>t&&(t.disabled||""===t.disabled),Qn=t=>"undefined"!=typeof SVGElement&&t instanceof SVGElement,$n=(t,e)=>{const n=t&&t.to;if(A(n)){if(e){return e(n)}return null}return n};function Yn(t,e,n,{o:{insert:r},m:i},o=2){0===o&&r(t.targetAnchor,e,n);const{el:s,anchor:a,shapeFlag:u,children:c,props:l}=t,h=2===o;if(h&&r(s,e,n),(!h||Gn(l))&&16&u)for(let f=0;f<c.length;f++)i(c[f],e,n,2);h&&r(a,e,n)}const Xn={__isTeleport:!0,process(t,e,n,r,i,o,s,a,u,c){const{mc:l,pc:h,pbc:f,o:{insert:p,querySelector:d,createText:v,createComment:g}}=c,m=Gn(e.props);let{shapeFlag:y,children:b,dynamicChildren:_}=e;if(null==t){const t=e.el=v(""),c=e.anchor=v("");p(t,n,r),p(c,n,r);const h=e.target=$n(e.props,d),f=e.targetAnchor=v("");h&&(p(f,h),s=s||Qn(h));const g=(t,e)=>{16&y&&l(b,t,e,i,o,s,a,u)};m?g(n,c):h&&g(h,f)}else{e.el=t.el;const r=e.anchor=t.anchor,l=e.target=t.target,p=e.targetAnchor=t.targetAnchor,v=Gn(t.props),g=v?n:l,y=v?r:p;if(s=s||Qn(l),_?(f(t.dynamicChildren,_,g,i,o,s,a),zn(t,e,!0)):u||h(t,e,g,y,i,o,s,a,!1),m)v||Yn(e,n,r,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const t=e.target=$n(e.props,d);t&&Yn(e,t,null,c,0)}else v&&Yn(e,l,p,c,1)}},remove(t,e,n,r,{um:i,o:{remove:o}},s){const{shapeFlag:a,children:u,anchor:c,targetAnchor:l,target:h,props:f}=t;if(h&&o(l),(s||!Gn(f))&&(o(c),16&a))for(let p=0;p<u.length;p++){const t=u[p];i(t,e,n,!0,!!t.dynamicChildren)}},move:Yn,hydrate:function(t,e,n,r,i,o,{o:{nextSibling:s,parentNode:a,querySelector:u}},c){const l=e.target=$n(e.props,u);if(l){const u=l._lpa||l.firstChild;16&e.shapeFlag&&(Gn(e.props)?(e.anchor=c(s(t),e,a(t),n,r,i,o),e.targetAnchor=u):(e.anchor=s(t),e.targetAnchor=c(u,e,l,n,r,i,o)),l._lpa=e.targetAnchor&&s(e.targetAnchor))}return e.anchor&&s(e.anchor)}};function Jn(t,e){return function(t,e,n=!0,r=!1){const i=ke||Mr;if(i){const n=i.type;if("components"===t){const t=Hr(n);if(t&&(t===e||t===j(e)||t===B(j(e))))return n}const o=tr(i[t]||n[t],e)||tr(i.appContext[t],e);return!o&&r?n:o}}("components",t,!0,e)||t}const Zn=Symbol();function tr(t,e){return t&&(t[e]||t[j(e)]||t[B(j(e))])}const er=Symbol(void 0),nr=Symbol(void 0),rr=Symbol(void 0),ir=Symbol(void 0),or=[];let sr=null;function ar(t=!1){or.push(sr=t?null:[])}let ur=1;function cr(t){ur+=t}function lr(t){return t.dynamicChildren=ur>0?sr||p:null,or.pop(),sr=or[or.length-1]||null,ur>0&&sr&&sr.push(t),t}function hr(t,e,n,r,i,o){return lr(yr(t,e,n,r,i,o,!0))}function fr(t,e,n,r,i){return lr(br(t,e,n,r,i,!0))}function pr(t){return!!t&&!0===t.__v_isVNode}function dr(t,e){return t.type===e.type&&t.key===e.key}const vr="__vInternal",gr=({key:t})=>null!=t?t:null,mr=({ref:t})=>null!=t?A(t)||ve(t)||k(t)?{i:ke,r:t}:t:null;function yr(t,e=null,n=null,r=0,i=null,o=(t===er?0:1),s=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&gr(e),ref:e&&mr(e),scopeId:Ae,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return a?(Cr(u,n),128&o&&t.normalize(u)):n&&(u.shapeFlag|=A(n)?8:16),ur>0&&!s&&sr&&(u.patchFlag>0||6&o)&&32!==u.patchFlag&&sr.push(u),u}const br=function(t,e=null,n=null,i=0,o=null,s=!1){t&&t!==Zn||(t=rr);if(pr(t)){const r=_r(t,e,!0);return n&&Cr(r,n),r}u=t,k(u)&&"__vccOpts"in u&&(t=t.__vccOpts);var u;if(e){e=function(t){return t?ce(t)||vr in t?b({},t):t:null}(e);let{class:t,style:n}=e;t&&!A(t)&&(e.class=a(t)),P(n)&&(ce(n)&&!T(n)&&(n=b({},n)),e.style=r(n))}const c=A(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:P(t)?4:k(t)?2:0;return yr(t,e,n,i,o,c,s,!0)};function _r(t,e,n=!1){const{props:r,ref:i,patchFlag:o,children:s}=t,a=e?kr(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&gr(a),ref:e&&e.ref?n&&i?T(i)?i.concat(mr(e)):[i,mr(e)]:mr(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==er?-1===o?16:16|o:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&_r(t.ssContent),ssFallback:t.ssFallback&&_r(t.ssFallback),el:t.el,anchor:t.anchor}}function wr(t=" ",e=0){return br(nr,null,t,e)}function Ir(t,e){const n=br(ir,null,t);return n.staticCount=e,n}function Tr(t="",e=!1){return e?(ar(),fr(rr,null,t)):br(rr,null,t)}function Er(t){return null==t||"boolean"==typeof t?br(rr):T(t)?br(er,null,t.slice()):"object"==typeof t?Sr(t):br(nr,null,String(t))}function Sr(t){return null===t.el||t.memo?t:_r(t)}function Cr(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(T(e))n=16;else if("object"==typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),Cr(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||vr in e?3===r&&ke&&(1===ke.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=ke}}else k(e)?(e={default:e,_ctx:ke},n=32):(e=String(e),64&r?(n=16,e=[wr(e)]):n=8);t.children=e,t.shapeFlag|=n}function kr(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=a([e.class,i.class]));else if("style"===t)e.style=r([e.style,i.style]);else if(m(t)){const n=e[t],r=i[t];n!==r&&(e[t]=n?[].concat(n,r):r)}else""!==t&&(e[t]=i[t])}return e}function Ar(t,e,n,r){let i;const o=n&&n[r];if(T(t)||A(t)){i=new Array(t.length);for(let n=0,r=t.length;n<r;n++)i[n]=e(t[n],n,void 0,o&&o[n])}else if("number"==typeof t){i=new Array(t);for(let n=0;n<t;n++)i[n]=e(n+1,n,void 0,o&&o[n])}else if(P(t))if(t[Symbol.iterator])i=Array.from(t,((t,n)=>e(t,n,void 0,o&&o[n])));else{const n=Object.keys(t);i=new Array(n.length);for(let r=0,s=n.length;r<s;r++){const s=n[r];i[r]=e(t[s],s,r,o&&o[r])}}else i=[];return n&&(n[r]=i),i}function Nr(t,e,n={},r,i){if(ke.isCE)return br("slot","default"===e?null:{name:e},r&&r());let o=t[e];o&&o._c&&(o._d=!1),ar();const s=o&&Pr(o(n)),a=fr(er,{key:n.key||`_${e}`},s||(r?r():[]),s&&1===t._?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function Pr(t){return t.some((t=>!pr(t)||t.type!==rr&&!(t.type===er&&!Pr(t.children))))?t:null}const Rr=t=>t?qr(t)?Wr(t)||t.proxy:Rr(t.parent):null,xr=b(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Rr(t.parent),$root:t=>Rr(t.root),$emit:t=>t.emit,$options:t=>mn(t),$forceUpdate:t=>()=>ci(t.update),$nextTick:t=>ui.bind(t.proxy),$watch:t=>_i.bind(t)}),Or={get({_:t},e){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:u}=t;let c;if("$"!==e[0]){const a=s[e];if(void 0!==a)switch(a){case 0:return r[e];case 1:return i[e];case 3:return n[e];case 2:return o[e]}else{if(r!==f&&I(r,e))return s[e]=0,r[e];if(i!==f&&I(i,e))return s[e]=1,i[e];if((c=t.propsOptions[0])&&I(c,e))return s[e]=2,o[e];if(n!==f&&I(n,e))return s[e]=3,n[e];pn&&(s[e]=4)}}const l=xr[e];let h,p;return l?("$attrs"===e&&pt(t,0,e),l(t)):(h=a.__cssModules)&&(h=h[e])?h:n!==f&&I(n,e)?(s[e]=3,n[e]):(p=u.config.globalProperties,I(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;if(i!==f&&I(i,e))i[e]=n;else if(r!==f&&I(r,e))r[e]=n;else if(I(t.props,e))return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let a;return void 0!==n[s]||t!==f&&I(t,s)||e!==f&&I(e,s)||(a=o[0])&&I(a,s)||I(r,s)||I(xr,s)||I(i.config.globalProperties,s)}},Dr=jn();let Lr=0;let Mr=null;const Fr=()=>Mr||ke,Ur=t=>{Mr=t,t.scope.on()},jr=()=>{Mr&&Mr.scope.off(),Mr=null};function qr(t){return 4&t.vnode.shapeFlag}let Vr=!1;function Br(t,e,n){k(e)?t.render=e:P(e)&&(t.setupState=we(e)),Kr(t)}function Kr(t,e,n){const r=t.type;t.render||(t.render=r.render||d),Ur(t),ht(),dn(t),ft(),jr()}function Wr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(we(he(t.exposed)),{get:(e,n)=>n in e?e[n]:n in xr?xr[n](t):void 0}))}function Hr(t){return k(t)&&t.displayName||t.name}function zr(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){Qr(o,e,n)}return i}function Gr(t,e,n,r){if(k(t)){const i=zr(t,e,n,r);return i&&R(i)&&i.catch((t=>{Qr(t,e,n)})),i}const i=[];for(let o=0;o<t.length;o++)i.push(Gr(t[o],e,n,r));return i}function Qr(t,e,n,r=!0){e&&e.vnode;if(e){let r=e.parent;const i=e.proxy,o=n;for(;r;){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const s=e.appContext.config.errorHandler;if(s)return void zr(s,null,10,[t,i,o])}!function(t,e,n,r=!0){console.error(t)}(t,0,0,r)}let $r=!1,Yr=!1;const Xr=[];let Jr=0;const Zr=[];let ti=null,ei=0;const ni=[];let ri=null,ii=0;const oi=Promise.resolve();let si=null,ai=null;function ui(t){const e=si||oi;return t?e.then(this?t.bind(this):t):e}function ci(t){Xr.length&&Xr.includes(t,$r&&t.allowRecurse?Jr+1:Jr)||t===ai||(null==t.id?Xr.push(t):Xr.splice(function(t){let e=Jr+1,n=Xr.length;for(;e<n;){const r=e+n>>>1;di(Xr[r])<t?e=r+1:n=r}return e}(t.id),0,t),li())}function li(){$r||Yr||(Yr=!0,si=oi.then(vi))}function hi(t,e,n,r){T(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),li()}function fi(t,e=null){if(Zr.length){for(ai=e,ti=[...new Set(Zr)],Zr.length=0,ei=0;ei<ti.length;ei++)ti[ei]();ti=null,ei=0,ai=null,fi(t,e)}}function pi(t){if(ni.length){const t=[...new Set(ni)];if(ni.length=0,ri)return void ri.push(...t);for(ri=t,ri.sort(((t,e)=>di(t)-di(e))),ii=0;ii<ri.length;ii++)ri[ii]();ri=null,ii=0}}const di=t=>null==t.id?1/0:t.id;function vi(t){Yr=!1,$r=!0,fi(t),Xr.sort(((t,e)=>di(t)-di(e)));try{for(Jr=0;Jr<Xr.length;Jr++){const t=Xr[Jr];t&&!1!==t.active&&zr(t,null,14)}}finally{Jr=0,Xr.length=0,pi(),$r=!1,si=null,(Xr.length||Zr.length||ni.length)&&vi(t)}}function gi(t,e){return bi(t,null,e)}const mi={};function yi(t,e,n){return bi(t,e,n)}function bi(t,e,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=f){const a=Mr;let u,c,l=!1,h=!1;if(ve(t)?(u=()=>t.value,l=!!t._shallow):ae(t)?(u=()=>t,r=!0):T(t)?(h=!0,l=t.some(ae),u=()=>t.map((t=>ve(t)?t.value:ae(t)?Ii(t):k(t)?zr(t,a,2):void 0))):u=k(t)?e?()=>zr(t,a,2):()=>{if(!a||!a.isUnmounted)return c&&c(),Gr(t,a,3,[p])}:d,e&&r){const t=u;u=()=>Ii(t())}let p=t=>{c=y.onStop=()=>{zr(t,a,4)}},v=h?[]:mi;const g=()=>{if(y.active)if(e){const t=y.run();(r||l||(h?t.some(((t,e)=>W(t,v[e]))):W(t,v)))&&(c&&c(),Gr(e,a,3,[t,v===mi?void 0:v,p]),v=t)}else y.run()};let m;g.allowRecurse=!!e,m="sync"===i?g:"post"===i?()=>Bn(g,a&&a.suspense):()=>{!a||a.isMounted?function(t){hi(t,ti,Zr,ei)}(g):g()};const y=new at(u,m);return e?n?g():v=y.run():"post"===i?Bn(y.run.bind(y),a&&a.suspense):y.run(),()=>{y.stop(),a&&a.scope&&_(a.scope.effects,y)}}function _i(t,e,n){const r=this.proxy,i=A(t)?t.includes(".")?wi(r,t):()=>r[t]:t.bind(r,r);let o;k(e)?o=e:(o=e.handler,n=e);const s=Mr;Ur(this);const a=bi(i,o.bind(r),n);return s?Ur(s):jr(),a}function wi(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function Ii(t,e=new Set){if(!P(t)||t.__v_skip)return t;if((e=e||new Set).has(t))return t;if(e.add(t),ve(t))Ii(t.value,e);else if(T(t))for(let n=0;n<t.length;n++)Ii(t[n],e);else if(S(t)||E(t))t.forEach((t=>{Ii(t,e)}));else if(D(t))for(const n in t)Ii(t[n],e);return t}function Ti(t,e,n){const r=arguments.length;return 2===r?P(e)&&!T(e)?pr(e)?br(t,null,[e]):br(t,e):br(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&pr(n)&&(n=[n]),br(t,e,n))}const Ei="3.2.4",Si="undefined"!=typeof document?document:null,Ci=new Map,ki={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?Si.createElementNS("http://www.w3.org/2000/svg",t):Si.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>Si.createTextNode(t),createComment:t=>Si.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Si.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r){const i=n?n.previousSibling:e.lastChild;let o=Ci.get(t);if(!o){const e=Si.createElement("template");if(e.innerHTML=r?`<svg>${t}</svg>`:t,o=e.content,r){const t=o.firstChild;for(;t.firstChild;)o.appendChild(t.firstChild);o.removeChild(t)}Ci.set(t,o)}return e.insertBefore(o.cloneNode(!0),n),[i?i.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};const Ai=/\s*!important$/;function Ni(t,e,n){if(T(n))n.forEach((n=>Ni(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=function(t,e){const n=Ri[e];if(n)return n;let r=j(e);if("filter"!==r&&r in t)return Ri[e]=r;r=B(r);for(let i=0;i<Pi.length;i++){const n=Pi[i]+r;if(n in t)return Ri[e]=n}return e}(t,e);Ai.test(n)?t.setProperty(V(r),n.replace(Ai,""),"important"):t[r]=n}}const Pi=["Webkit","Moz","ms"],Ri={};const xi="http://www.w3.org/1999/xlink";let Oi=Date.now,Di=!1;if("undefined"!=typeof window){Oi()>document.createEvent("Event").timeStamp&&(Oi=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);Di=!!(t&&Number(t[1])<=53)}let Li=0;const Mi=Promise.resolve(),Fi=()=>{Li=0};function Ui(t,e,n,r){t.addEventListener(e,n,r)}function ji(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=function(t){let e;if(qi.test(t)){let n;for(e={};n=t.match(qi);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[V(t.slice(2)),e]}(e);if(r){Ui(t,n,o[e]=function(t,e){const n=t=>{const r=t.timeStamp||Oi();(Di||r>=n.attached-1)&&Gr(function(t,e){if(T(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>Li||(Mi.then(Fi),Li=Oi()))(),n}(r,i),a)}else s&&(!function(t,e,n,r){t.removeEventListener(e,n,r)}(t,n,s,a),o[e]=void 0)}}const qi=/(?:Once|Passive|Capture)$/;const Vi=/^on[a-z]/;const Bi="transition",Ki=(t,{slots:e})=>Ti(qe,function(t){const e={};for(const b in t)b in Wi||(e[b]=t[b]);if(!1===t.css)return e;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=o,appearActiveClass:c=s,appearToClass:l=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,d=function(t){if(null==t)return null;if(P(t))return[Gi(t.enter),Gi(t.leave)];{const e=Gi(t);return[e,e]}}(i),v=d&&d[0],g=d&&d[1],{onBeforeEnter:m,onEnter:y,onEnterCancelled:_,onLeave:w,onLeaveCancelled:I,onBeforeAppear:T=m,onAppear:E=y,onAppearCancelled:S=_}=e,C=(t,e,n)=>{$i(t,e?l:a),$i(t,e?c:s),n&&n()},k=(t,e)=>{$i(t,p),$i(t,f),e&&e()},A=t=>(e,n)=>{const i=t?E:y,s=()=>C(e,t,n);Hi(i,[e,s]),Yi((()=>{$i(e,t?u:o),Qi(e,t?l:a),zi(i)||Ji(e,r,v,s)}))};return b(e,{onBeforeEnter(t){Hi(m,[t]),Qi(t,o),Qi(t,s)},onBeforeAppear(t){Hi(T,[t]),Qi(t,u),Qi(t,c)},onEnter:A(!1),onAppear:A(!0),onLeave(t,e){const n=()=>k(t,e);Qi(t,h),document.body.offsetHeight,Qi(t,f),Yi((()=>{$i(t,h),Qi(t,p),zi(w)||Ji(t,r,g,n)})),Hi(w,[t,n])},onEnterCancelled(t){C(t,!1),Hi(_,[t])},onAppearCancelled(t){C(t,!0),Hi(S,[t])},onLeaveCancelled(t){k(t),Hi(I,[t])}})}(t),e);Ki.displayName="Transition";const Wi={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Ki.props=b({},qe.props,Wi);const Hi=(t,e=[])=>{T(t)?t.forEach((t=>t(...e))):t&&t(...e)},zi=t=>!!t&&(T(t)?t.some((t=>t.length>1)):t.length>1);function Gi(t){return G(t)}function Qi(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function $i(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function Yi(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let Xi=0;function Ji(t,e,n,r){const i=t._endId=++Xi,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:u}=function(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r("transitionDelay"),o=r("transitionDuration"),s=Zi(i,o),a=r("animationDelay"),u=r("animationDuration"),c=Zi(a,u);let l=null,h=0,f=0;e===Bi?s>0&&(l=Bi,h=s,f=o.length):"animation"===e?c>0&&(l="animation",h=c,f=u.length):(h=Math.max(s,c),l=h>0?s>c?Bi:"animation":null,f=l?l===Bi?o.length:u.length:0);const p=l===Bi&&/\b(transform|all)(,|$)/.test(n.transitionProperty);return{type:l,timeout:h,propCount:f,hasTransform:p}}(t,e);if(!s)return r();const c=s+"end";let l=0;const h=()=>{t.removeEventListener(c,f),o()},f=e=>{e.target===t&&++l>=u&&h()};setTimeout((()=>{l<u&&h()}),a+1),t.addEventListener(c,f)}function Zi(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map(((e,n)=>to(e)+to(t[n]))))}function to(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}const eo=t=>{const e=t.props["onUpdate:modelValue"];return T(e)?t=>H(e,t):e};function no(t){t.target.composing=!0}function ro(t){const e=t.target;e.composing&&(e.composing=!1,function(t,e){const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}(e,"input"))}const io={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=eo(i);const o=r||i.props&&"number"===i.props.type;Ui(t,e?"change":"input",(e=>{if(e.target.composing)return;let r=t.value;n?r=r.trim():o&&(r=G(r)),t._assign(r)})),n&&Ui(t,"change",(()=>{t.value=t.value.trim()})),e||(Ui(t,"compositionstart",no),Ui(t,"compositionend",ro),Ui(t,"change",ro))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},o){if(t._assign=eo(o),t.composing)return;if(document.activeElement===t){if(n)return;if(r&&t.value.trim()===e)return;if((i||"number"===t.type)&&G(t.value)===e)return}const s=null==e?"":e;t.value!==s&&(t.value=s)}},oo={deep:!0,created(t,e,n){t._assign=eo(n),Ui(t,"change",(()=>{const e=t._modelValue,n=lo(t),r=t.checked,i=t._assign;if(T(e)){const t=c(e,n),o=-1!==t;if(r&&!o)i(e.concat(n));else if(!r&&o){const n=[...e];n.splice(t,1),i(n)}}else if(S(e)){const t=new Set(e);r?t.add(n):t.delete(n),i(t)}else i(ho(t,r))}))},mounted:so,beforeUpdate(t,e,n){t._assign=eo(n),so(t,e,n)}};function so(t,{value:e,oldValue:n},r){t._modelValue=e,T(e)?t.checked=c(e,r.props.value)>-1:S(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=u(e,ho(t,!0)))}const ao={created(t,{value:e},n){t.checked=u(e,n.props.value),t._assign=eo(n),Ui(t,"change",(()=>{t._assign(lo(t))}))},beforeUpdate(t,{value:e,oldValue:n},r){t._assign=eo(r),e!==n&&(t.checked=u(e,r.props.value))}},uo={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=S(e);Ui(t,"change",(()=>{const e=Array.prototype.filter.call(t.options,(t=>t.selected)).map((t=>n?G(lo(t)):lo(t)));t._assign(t.multiple?i?new Set(e):e:e[0])})),t._assign=eo(r)},mounted(t,{value:e}){co(t,e)},beforeUpdate(t,e,n){t._assign=eo(n)},updated(t,{value:e}){co(t,e)}};function co(t,e){const n=t.multiple;if(!n||T(e)||S(e)){for(let r=0,i=t.options.length;r<i;r++){const i=t.options[r],o=lo(i);if(n)T(e)?i.selected=c(e,o)>-1:i.selected=e.has(o);else if(u(lo(i),e))return void(t.selectedIndex!==r&&(t.selectedIndex=r))}n||-1===t.selectedIndex||(t.selectedIndex=-1)}}function lo(t){return"_value"in t?t._value:t.value}function ho(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const fo={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},po=(t,e)=>n=>{if(!("key"in n))return;const r=V(n.key);return e.some((t=>t===r||fo[t]===r))?t(n):void 0},vo={beforeMount(t,{value:e},{transition:n}){t._vod="none"===t.style.display?"":t.style.display,n&&e?n.beforeEnter(t):go(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),go(t,!0),r.enter(t)):r.leave(t,(()=>{go(t,!1)})):go(t,e))},beforeUnmount(t,{value:e}){go(t,e)}};function go(t,e){t.style.display=e?t._vod:"none"}const mo=b({patchProp:(t,r,i,o,s=!1,a,u,c,l)=>{"class"===r?function(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}(t,o,s):"style"===r?function(t,e,n){const r=t.style;if(n)if(A(n)){if(e!==n){const e=r.display;r.cssText=n,"_vod"in t&&(r.display=e)}}else{for(const t in n)Ni(r,t,n[t]);if(e&&!A(e))for(const t in e)null==n[t]&&Ni(r,t,"")}else t.removeAttribute("style")}(t,i,o):m(r)?y(r)||ji(t,r,0,o,u):("."===r[0]?(r=r.slice(1),1):"^"===r[0]?(r=r.slice(1),0):function(t,e,n,r){if(r)return"innerHTML"===e||"textContent"===e||!!(e in t&&Vi.test(e)&&k(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if(Vi.test(e)&&A(n))return!1;return e in t}(t,r,o,s))?function(t,e,r,i,o,s,a){if("innerHTML"===e||"textContent"===e)return i&&a(i,o,s),void(t[e]=null==r?"":r);if("value"===e&&"PROGRESS"!==t.tagName){t._value=r;const n=null==r?"":r;return t.value!==n&&(t.value=n),void(null==r&&t.removeAttribute(e))}if(""===r||null==r){const i=typeof t[e];if("boolean"===i)return void(t[e]=n(r));if(null==r&&"string"===i)return t[e]="",void t.removeAttribute(e);if("number"===i){try{t[e]=0}catch(u){}return void t.removeAttribute(e)}}try{t[e]=r}catch(aA){}}(t,r,o,a,u,c,l):("true-value"===r?t._trueValue=o:"false-value"===r&&(t._falseValue=o),function(t,r,i,o,s){if(o&&r.startsWith("xlink:"))null==i?t.removeAttributeNS(xi,r.slice(6,r.length)):t.setAttributeNS(xi,r,i);else{const o=e(r);null==i||o&&!n(i)?t.removeAttribute(r):t.setAttribute(r,o?"":i)}}(t,r,o,s))}},ki);let yo;const bo=(...t)=>{const e=(yo||(yo=Kn(mo))).createApp(...t),{mount:n}=e;return e.mount=t=>{const r=function(t){if(A(t)){return document.querySelector(t)}return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(t);if(!r)return;const i=e._component;k(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};var _o=function(t,e){return(_o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function wo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}_o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Io=function(){return(Io=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function To(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(aA){o(aA)}}function a(t){try{u(r.throw(t))}catch(aA){o(aA)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Eo(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(aA){o=[6,aA],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function So(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Co(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function ko(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ao=!1,No="${JSCORE_VERSION}",Po=function(t,e){if(!t)throw Ro(e)},Ro=function(t){return new Error("Firebase Database ("+No+") INTERNAL ASSERT FAILED: "+t)},xo=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},Oo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xo(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Do=function(t){var e=xo(t);return Oo.encodeByteArray(e,!0)},Lo=function(t){return Do(t).replace(/\./g,"")},Mo=function(t){try{return Oo.decodeString(t,!0)}catch(aA){console.error("base64Decode failed: ",aA)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Fo(t){return Uo(void 0,t)}function Uo(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Uo(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var jo=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Io({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Lo(JSON.stringify({alg:"none",type:"JWT"})),Lo(JSON.stringify(o)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Bo(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vo())}function Ko(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(aA){return!1}}function Wo(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Ho(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function zo(){return!0===Ao}function Go(){return"indexedDB"in self&&null!=indexedDB}function Qo(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}function $o(){return!(!navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Yo=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Xo.prototype.create),o}return wo(e,t),e}(Error),Xo=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?Jo(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new Yo(i,a,r);return u},t}();function Jo(t,e){return t.replace(Zo,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Zo=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t){return JSON.parse(t)}function es(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ns=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=ts(Mo(o[0])||""),n=ts(Mo(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(aA){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function rs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function is(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function os(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ss(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var as=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),s=1518500249):(o=u^c^l,s=1859775393):r<60?(o=u&c|l&(u|c),s=2400959708):(o=u^c^l,s=3395469782);i=(a<<5|a>>>27)+o+h+s+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function us(t,e){var n=new cs(t,e);return n.subscribe.bind(n)}var cs=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=ls),void 0===r.error&&(r.error=ls),void 0===r.complete&&(r.complete=ls);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(aA){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(aA){"undefined"!=typeof console&&console.error&&console.error(aA)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function ls(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hs=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function fs(t,e){return t+" failed: "+e+" argument "}function ps(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(fs(t,e)+"must be a valid function.")}function ds(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(fs(t,e)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vs=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function gs(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(t){return t&&t._delegate?t._delegate:t}var ys=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),bs=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new jo;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(aA){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(aA){if(r)return null;throw aA}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(aA){}try{for(var r=So(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Co(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(aA){}}}catch(l){e={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return To(this,void 0,void 0,(function(){var t;return Eo(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(ko(ko([],Co(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),Co(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t="[DEFAULT]"),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var a=So(this.instancesDeferred.entries()),u=a.next();!u.done;u=a.next()){var c=Co(u.value,2),l=c[0],h=c[1];o===this.normalizeInstanceIdentifier(l)&&h.resolve(s)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=So(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t="[DEFAULT]"),this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _s,ws=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new bs(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Is(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ts,Es,Ss=[];(Es=Ts||(Ts={}))[Es.DEBUG=0]="DEBUG",Es[Es.VERBOSE=1]="VERBOSE",Es[Es.INFO=2]="INFO",Es[Es.WARN=3]="WARN",Es[Es.ERROR=4]="ERROR",Es[Es.SILENT=5]="SILENT";var Cs,ks={debug:Ts.DEBUG,verbose:Ts.VERBOSE,info:Ts.INFO,warn:Ts.WARN,error:Ts.ERROR,silent:Ts.SILENT},As=Ts.INFO,Ns=((_s={})[Ts.DEBUG]="log",_s[Ts.VERBOSE]="log",_s[Ts.INFO]="info",_s[Ts.WARN]="warn",_s[Ts.ERROR]="error",_s),Ps=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Ns[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Is(["["+i+"]  "+t.name+":"],n))}},Rs=function(){function t(t){this.name=t,this._logLevel=As,this._logHandler=Ps,this._userLogHandler=null,Ss.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Ts))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?ks[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Is([this,Ts.DEBUG],t)),this._logHandler.apply(this,Is([this,Ts.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Is([this,Ts.VERBOSE],t)),this._logHandler.apply(this,Is([this,Ts.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Is([this,Ts.INFO],t)),this._logHandler.apply(this,Is([this,Ts.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Is([this,Ts.WARN],t)),this._logHandler.apply(this,Is([this,Ts.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Is([this,Ts.ERROR],t)),this._logHandler.apply(this,Is([this,Ts.ERROR],t))},t}();function xs(t){Ss.forEach((function(e){e.setLogLevel(t)}))}var Os,Ds=((Cs={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Cs["bad-app-name"]="Illegal App name: '{$appName}",Cs["duplicate-app"]="Firebase App named '{$appName}' already exists",Cs["app-deleted"]="Firebase App named '{$appName}' already deleted",Cs["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Cs["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Cs),Ls=new Xo("app","Firebase",Ds),Ms=((Os={})["@firebase/app"]="fire-core",Os["@firebase/analytics"]="fire-analytics",Os["@firebase/app-check"]="fire-app-check",Os["@firebase/auth"]="fire-auth",Os["@firebase/database"]="fire-rtdb",Os["@firebase/functions"]="fire-fn",Os["@firebase/installations"]="fire-iid",Os["@firebase/messaging"]="fire-fcm",Os["@firebase/performance"]="fire-perf",Os["@firebase/remote-config"]="fire-rc",Os["@firebase/storage"]="fire-gcs",Os["@firebase/firestore"]="fire-fst",Os["fire-js"]="fire-js",Os["firebase-wrapper"]="fire-js-all",Os),Fs=new Rs("@firebase/app"),Us=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Fo(t),this.container=new ws(e.name),this._addComponent(new ys("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(aA){Fs.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,aA)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ls.create("app-deleted",{appName:this.name_})},t}();Us.prototype.name&&Us.prototype.options||Us.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function js(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw Ls.create("bad-app-name",{appName:String(s)});if(rs(e,s))throw Ls.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Ms[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Fs.warn(u.join(" "))}o(new ys(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:xs,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Ls.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=ks[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Ts[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=Ss;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!rs(e,t=t||"[DEFAULT]"))throw Ls.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return Fs.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw Ls.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&Uo(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qs=function t(){var e=js(Us);return e.INTERNAL=Io(Io({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Uo(e,t)},createSubscribe:us,ErrorFactory:Xo,deepExtend:Uo}),e}(),Vs=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Fs.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Bs=self.firebase.SDK_VERSION;Bs&&Bs.indexOf("LITE")>=0&&Fs.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ks=qs.initializeApp;qs.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ko()&&Fs.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Ks.apply(void 0,t)};var Ws,Hs,zs=qs;(Ws=zs).INTERNAL.registerComponent(new ys("platform-logger",(function(t){return new Vs(t)}),"PRIVATE")),Ws.registerVersion("@firebase/app","0.6.30",Hs),Ws.registerVersion("fire-js",""),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Ra(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Ra(i(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&a.test(t)?t:""}function l(){}function h(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==h(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),g=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:y).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function w(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function T(t,e,n){this.code=C+t,this.message=e||k[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new T(e.substring(C.length),t.message,t.serverResponse):null}w(T,Error),T.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},T.prototype.toJSON=function(){return this.w()};var S,C="auth/",k={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},A={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in A)if(A[e].id===t)return{firebaseEndpoint:(t=A[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function P(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function R(t){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function x(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function O(t,e){throw new x("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function D(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}S=N("__EID__")?"__EID__":void 0,w(R,Error),R.prototype.name="CustomError",w(x,R),x.prototype.name="AssertionError",D.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var F=new D((function(){return new j}),(function(t){t.reset()}));function U(){var t=me,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function j(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},j.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},V=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var B=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function H(t,e){return 0<=q(t,e)}function z(t,e){var n;return(n=0<=(e=q(t,e)))&&Array.prototype.splice.call(t,e,1),n}function G(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function Q(t){return Array.prototype.concat.apply([],arguments)}function $(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Y,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,Z=/</g,tt=/>/g,et=/"/g,nt=/'/g,rt=/\x00/g,it=/[\x00&<>"']/;function ot(t,e){return-1!=t.indexOf(e)}function st(t,e){return t<e?-1:t>e?1:0}t:{var at=s.navigator;if(at){var ut=at.userAgent;if(ut){Y=ut;break t}}Y=""}function ct(t){return ot(Y,t)}function lt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ht(t){for(var e in t)return!1;return!0}function ft(t){var e,n={};for(e in t)n[e]=t[e];return n}var pt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<pt.length;o++)n=pt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;O("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function gt(t,e){this.a=t===_t&&e||"",this.b=bt}function mt(t){return t instanceof gt&&t.constructor===gt&&t.b===bt?t.a:(O("expected object of type Const, got '"+t+"'"),"type_error:Const")}gt.prototype.ta=!0,gt.prototype.sa=function(){return this.a},gt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,bt={},_t={};function wt(){if(void 0===yt){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(n){s.console&&s.console.error(n.message)}yt=t}else yt=t}return yt}function It(t,e){this.a=e===kt?t:""}function Tt(t){return t instanceof It&&t.constructor===It?t.a:(O("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function Et(t,e){var n=mt(t);if(!Ct.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=wt();return new It(t=e?e.createScriptURL(t):t,kt)}(t=n.replace(St,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof gt?mt(t):encodeURIComponent(String(t))})))}It.prototype.ta=!0,It.prototype.sa=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var St=/%{(\w+)}/g,Ct=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,kt={};function At(t,e){this.a=e===Lt?t:""}function Nt(t){return t instanceof At&&t.constructor===At?t.a:(O("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}At.prototype.ta=!0,At.prototype.sa=function(){return this.a.toString()},At.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Pt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Rt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,xt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ot(t){if(t instanceof At)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),xt.test(t))t=new At(t,Lt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Rt);t=e&&Pt.test(e[1])?new At(t,Lt):null}return t}function Dt(t){return t instanceof At?t:(t="object"==typeof t&&t.ta?t.sa():String(t),xt.test(t)||(t="about:invalid#zClosurez"),new At(t,Lt))}var Lt={},Mt=new At("about:invalid#zClosurez",Lt);function Ft(t,e,n){this.a=n===Ut?t:""}Ft.prototype.ta=!0,Ft.prototype.sa=function(){return this.a.toString()},Ft.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ut={};function jt(t,e,n,r){return t=t instanceof At?t:Dt(t),e=e||s,n=n instanceof gt?mt(n):n||"",e.open(Nt(t),n,r,void 0)}function qt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Vt(t){return it.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(tt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(et,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(nt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(rt,"&#0;"))),t}function Bt(t){return Bt[" "](t),t}Bt[" "]=l;var Kt,Wt,Ht=ct("Opera"),zt=ct("Trident")||ct("MSIE"),Gt=ct("Edge"),Qt=Gt||zt,$t=ct("Gecko")&&!(ot(Y.toLowerCase(),"webkit")&&!ct("Edge"))&&!(ct("Trident")||ct("MSIE"))&&!ct("Edge"),Yt=ot(Y.toLowerCase(),"webkit")&&!ct("Edge");function Xt(){var t=s.document;return t?t.documentMode:void 0}t:{var Jt="",Zt=(Wt=Y,$t?/rv:([^\);]+)(\)|;)/.exec(Wt):Gt?/Edge\/([\d\.]+)/.exec(Wt):zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Wt):Yt?/WebKit\/(\S+)/.exec(Wt):Ht?/(?:Version)[ \/]?(\S+)/.exec(Wt):void 0);if(Zt&&(Jt=Zt?Zt[1]:""),zt){var te=Xt();if(null!=te&&te>parseFloat(Jt)){Kt=String(te);break t}}Kt=Jt}var ee,ne={};function re(t){return function(t,e){var n=ne;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=X(String(Kt)).split("."),r=X(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=st(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||st(0==s[2].length,0==a[2].length)||st(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(s.document&&zt){var ie=Xt();ee=ie||(parseInt(Kt,10)||void 0)}else ee=void 0;var oe=ee;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Wt){}var se=!zt||9<=Number(oe);function ae(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ue(t,e){lt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:he.hasOwnProperty(n)?t.setAttribute(he[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var ce,le,he={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function fe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}V(s?$(o):o,r)}}}function pe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function de(t){s.setTimeout((function(){throw t}),0)}function ve(t,e){le||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);le=function(){t.then(ye)}}else le=function(){var t=ye;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!ct("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(ce||(ce=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ct("Presto")&&(t=function(){var t=pe(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ct("Trident")&&!ct("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),ce(t)):s.setImmediate(t)}}(),ge||(le(),ge=!0),me.add(t,e)}var ge=!1,me=new M;function ye(){for(var t;t=U();){try{t.a.call(t.b)}catch(e){de(e)}L(F,t)}ge=!1}function be(t,e){if(this.a=_e,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){Oe(n,we,t)}),(function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(aA){}Oe(n,Ie,t)}))}catch(r){Oe(this,Ie,r)}}var _e=0,we=2,Ie=3;function Te(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Te.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ee=new D((function(){return new Te}),(function(t){t.reset()}));function Se(t,e,n){var r=Ee.get();return r.g=t,r.b=e,r.f=n,r}function Ce(t){if(t instanceof be)return t;var e=new be(l);return Oe(e,we,t),e}function ke(t){return new be((function(e,n){n(t)}))}function Ae(t,e,n){De(t,e,n,null)||ve(_(e,t))}function Ne(t){return new be((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ae(t[o],_(i,o,!0),_(i,o,!1));else e(r)}))}function Pe(t,e){if(t.a==_e)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==_e&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Me(n),Fe(n,i,Ie,e)))}t.c=null}else Oe(t,Ie,e)}function Re(t,e){t.b||t.a!=we&&t.a!=Ie||Le(t),t.f?t.f.next=e:t.b=e,t.f=e}function xe(t,e,n,r){var i=Se(null,null,null);return i.a=new be((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(s){o(s)}}:o})),i.a.c=t,Re(t,i),i.a}function Oe(t,e,n){t.a==_e&&(t===n&&(e=Ie,n=new TypeError("Promise cannot resolve to itself")),t.a=1,De(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Le(t),e!=Ie||n instanceof qe||function(t,e){t.g=!0,ve((function(){t.g&&je.call(null,e)}))}(t,n)))}function De(t,e,n,r){if(t instanceof be)return Re(t,Se(e||l,n||null,r)),!0;if(P(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(u){o(u)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Le(t){t.h||(t.h=!0,ve(t.gc,t))}function Me(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Ie&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,r);else try{e.c?e.g.call(e.f):Ue(e,n,r)}catch(aA){je.call(null,aA)}L(Ee,e)}function Ue(t,e,n){e==we?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return xe(this,p(t)?t:null,p(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(t=be.prototype).oa=function(t,e){return(t=Se(t,t,e)).c=!0,Re(this,t),this},t.o=function(t,e){return xe(this,null,t,e)},t.cancel=function(t){if(this.a==_e){var e=new qe(t);ve((function(){Pe(this,e)}),this)}},t.$c=function(t){this.a=_e,Oe(this,we,t)},t.ad=function(t){this.a=_e,Oe(this,Ie,t)},t.gc=function(){for(var t;t=Me(this);)Fe(this,t,this.a,this.i);this.h=!1};var je=de;function qe(t){R.call(this,t)}function Ve(){this.ya=this.ya,this.pa=this.pa}w(qe,R),qe.prototype.name="cancel";var Be={};function Ke(t){if(!t.ya&&(t.ya=!0,t.Da(),0)){var e=function(t){return Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++g)}(t);delete Be[e]}}Ve.prototype.ya=!1,Ve.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var We=Object.freeze||function(t){return t},He=!zt||9<=Number(oe),ze=zt&&!re("9"),Ge=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",l,e),s.removeEventListener("test",l,e)}catch(n){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function $e(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if($t){t:{try{Bt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ye[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},w($e,Qe);var Ye=We({2:"touch",3:"pen",4:"mouse"});$e.prototype.preventDefault=function(){$e.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ze)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},$e.prototype.g=function(){return this.a};var Xe="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Ze(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++Je,this.wa=this.Qa=!1}function tn(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function en(t){this.src=t,this.a={},this.b=0}function nn(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(tn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function rn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}en.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=rn(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):((e=new Ze(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var on="closure_lm_"+(1e6*Math.random()|0),sn={};function an(t,e,n,r,i){if(r&&r.once)cn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)an(t,e[o],n,r,i);else n=yn(n),t&&t[Xe]?_n(t,e,n,d(r)?!!r.capture:!!r,i):un(t,e,n,!1,r,i)}function un(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=d(i)?!!i.capture:!!i,a=gn(t);if(a||(t[on]=a=new en(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=vn,e=He?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ge||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(fn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function cn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=yn(n),t&&t[Xe]?wn(t,e,n,d(r)?!!r.capture:!!r,i):un(t,e,n,!0,r,i)}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=yn(n),t&&t[Xe]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=rn(o=t.a[e],n,r,i))&&(tn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=gn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=rn(e,n,r,i)),(n=-1<t?e[t]:null)&&hn(n))}function hn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[Xe])nn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(fn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gn(e))?(nn(n,t),0==n.b&&(n.src=null,e[on]=null)):tn(t)}}}function fn(t){return t in sn?sn[t]:sn[t]="on"+t}function pn(t,e,n,r){var i=!0;if((t=gn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=dn(o,r),i=i&&!1!==o)}return i}function dn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&hn(t),n.call(r,e)}function vn(t,e){if(t.wa)return!0;if(!He){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new $e(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=pn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=pn(r[i],t,!1,e),n=n&&o}return n}return dn(t,new $e(e,this))}function gn(t){return(t=t[on])instanceof en?t:null}var mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(t){return p(t)?t:(t[mn]||(t[mn]=function(e){return t.handleEvent(e)}),t[mn])}function bn(){Ve.call(this),this.v=new en(this),this.bc=this,this.hb=null}function _n(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function wn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function In(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&nn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Tn(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function En(t){var e=null;return new be((function(n,r){-1==(e=Tn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function Sn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Cn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function kn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof kn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function An(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Nn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Nn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Nn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(bn,Ve),bn.prototype[Xe]=!0,bn.prototype.addEventListener=function(t,e,n,r){an(this,t,e,n,r)},bn.prototype.removeEventListener=function(t,e,n,r){ln(this,t,e,n,r)},bn.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;dt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=In(s,r,!0,t)&&i}if(i=In(s=t.b=n,r,!0,t)&&i,i=In(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=In(s=t.b=e[o],r,!1,t)&&i;return i},bn.prototype.Da=function(){if(bn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)tn(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=kn.prototype).X=function(){An(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return An(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Nn(this.b,t)?this.b[t]:e},t.set=function(t,e){Nn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Rn?(this.i=void 0!==e?e:t.i,xn(this,t.c),this.l=t.l,this.a=t.a,On(this,t.g),this.f=t.f,Dn(this,Zn(t.b)),this.h=t.h):t&&(n=String(t).match(Pn))?(this.i=!!e,xn(this,n[1]||"",!0),this.l=jn(n[2]||""),this.a=jn(n[3]||"",!0),On(this,n[4]),this.f=jn(n[5]||"",!0),Dn(this,n[6]||"",!0),this.h=jn(n[7]||"")):(this.i=!!e,this.b=new Gn(null,this.i))}function xn(t,e,n){t.c=n?jn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function On(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Dn(t,e,n){e instanceof Gn?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Yn(this,e),Jn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=qn(e,Hn)),t.b=new Gn(e,t.i))}function Ln(t,e,n){t.b.set(e,n)}function Mn(t,e){return t.b.get(e)}function Fn(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function Un(t,e,n,r){var i=new Rn(null,void 0);return t&&xn(i,t),e&&(i.a=e),n&&On(i,n),r&&(i.f=r),i}function jn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Vn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Vn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(qn(e,Bn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,Bn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Wn:Kn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",qn(n,zn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.c;n?xn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)On(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ot(i,"./")||ot(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Dn(e,Zn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Bn=/[#\/\?@]/g,Kn=/[#\?:]/g,Wn=/[#\?]/g,Hn=/[#\?@]/g,zn=/#/g;function Gn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new kn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function $n(t){var e=Cn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Gn(null,void 0);t=Sn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Jn(n,i,o):n.add(i,o)}return n}function Yn(t,e){Qn(t),e=tr(t,e),Nn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Nn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&An(t)))}function Xn(t,e){return Qn(t),e=tr(t,e),Nn(t.a.b,e)}function Jn(t,e,n){Yn(t,e),0<n.length&&(t.c=null,t.a.set(tr(t,e),$(n)),t.b+=n.length)}function Zn(t){var e=new Gn;return e.c=t.c,t.a&&(e.a=new kn(t.a),e.b=t.b),e}function tr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function er(t){var e=[];return rr(new nr,t,e),e.join("")}function nr(){}function rr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),rr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),sr(r,n),n.push(":"),rr(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":sr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Gn.prototype).add=function(t,e){Qn(this),this.c=null,t=tr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Qn(this),this.a.forEach((function(n,r){V(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Qn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Qn(this);var e=[];if("string"==typeof t)Xn(this,t)&&(e=Q(e,this.a.get(tr(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=Q(e,t[n])}return e},t.set=function(t,e){return Qn(this),this.c=null,Xn(this,t=tr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ir={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},or=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(or,(function(t){var e=ir[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ir[t]=e),e})),'"')}function ar(){var t=kr();return zt&&!!oe&&11==oe||/Edge\/\d+/.test(t)}function ur(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function cr(t,e){e=e||s.window;var n="about:blank";t&&(n=Nt(Ot(t)||Mt)),e.location.href=n}function lr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<lr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function hr(t){return!!((t=(t||kr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function fr(t){t=t||s.window;try{t.close()}catch(e){}}function pr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=kr().toLowerCase(),r&&(e.target=r,ot(n,"crios/")&&(e.target="_blank")),Er(kr())==Ir&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof At?n:Ot(void 0!==n.href?n.href:String(n))||Mt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ct("iPhone")&&!ct("iPod")&&!ct("iPad")||ct("iPad")||ct("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(s=pe(document,"A"),"HTMLAnchorElement"),e=e instanceof At?e:Dt(e),s.href=Nt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=jt("",r,n,s),t=Nt(e),s&&(Qt&&ot(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Vt(t)+'">',t=new Ft(t=(r=wt())?r.createHTML(t):t,null,Ut),r=s.document)&&(r.write(function(t){return t instanceof Ft&&t.constructor===Ft?t.a:(O("expected object of type SafeHtml, got '"+t+"' of type "+h(t)),"type_error:SafeHtml")}(t)),r.close())):(s=jt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var dr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vr=/^[^@]+@[^@]+$/;function gr(){var t=null;return new be((function(e){"complete"==s.document.readyState?e():(t=function(){e()},cn(window,"load",t))})).o((function(e){throw ln(window,"load",t),e}))}function mr(t){return t=t||kr(),!("file:"!==xr()&&"ionic:"!==xr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function yr(){var t=s.window;try{return!(!t||t==t.top)}catch(e){return!1}}function br(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function _r(){return zs.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":zs.INTERNAL.hasOwnProperty("node")?"Node":br()?"Worker":"Browser"}function wr(){var t=_r();return"ReactNative"===t||"Node"===t}var Ir="Firefox",Tr="Chrome";function Er(t){var e=t.toLowerCase();return ot(e,"opera/")||ot(e,"opr/")||ot(e,"opios/")?"Opera":ot(e,"iemobile")?"IEMobile":ot(e,"msie")||ot(e,"trident/")?"IE":ot(e,"edge/")?"Edge":ot(e,"firefox/")?Ir:ot(e,"silk/")?"Silk":ot(e,"blackberry")?"Blackberry":ot(e,"webos")?"Webos":!ot(e,"safari/")||ot(e,"chrome/")||ot(e,"crios/")||ot(e,"android")?!ot(e,"chrome/")&&!ot(e,"crios/")||ot(e,"edge/")?ot(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Tr:"Safari"}var Sr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Cr(t,e){e=e||[];var n,r=[],i={};for(n in Sr)i[Sr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=_r())?r=Er(i=kr()):"Worker"===r&&(r=Er(i=kr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function kr(){return s.navigator&&s.navigator.userAgent||""}function Ar(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Nr(){try{var t=s.localStorage,e=Fr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ar()||!!s.indexedDB}catch(n){return br()&&!!s.indexedDB}return!1}function Pr(){return(Rr()||"chrome-extension:"===xr()||mr())&&!wr()&&Nr()&&!br()}function Rr(){return"http:"===xr()||"https:"===xr()}function xr(){return s.location&&s.location.protocol||null}function Or(t){return!hr(t=t||kr())&&Er(t)!=Ir}function Dr(t){return void 0===t?null:er(t)}function Lr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Mr(t){if(null!==t)return JSON.parse(t)}function Fr(t){return t||Math.floor(1e9*Math.random()).toString()}function Ur(t){return"Safari"!=Er(t=t||kr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function jr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function qr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=kr(),e=_r(),this.b=hr(t)||"ReactNative"===e}function Vr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Br(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Kr(){return!(!Ar("fireauth.oauthhelper",s)&&!Ar("fireauth.iframe",s))}qr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Rr()&&"chrome-extension:"!==xr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Hr={};function zr(t){Hr[t]||(Hr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Gr={};Object.defineProperty(Gr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Gr,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==Gr.abcd}catch(Wt){Wr=!1}function Qr(t,e,n){Wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function $r(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function Yr(t){var e={};return $r(e,t),e}function Xr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,Xr(t[n]));return e}function Jr(t){var e=t&&(t[ri]?"phone":null);if(!(e&&t&&t[ni]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[ni]),Qr(this,"displayName",t[ti]||null);var n=null;t[ei]&&(n=new Date(t[ei]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function Zr(t){try{var e=new ii(t)}catch(n){e=null}return e}Jr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ti="displayName",ei="enrolledAt",ni="mfaEnrollmentId",ri="phoneInfo";function ii(t){Jr.call(this,t),Qr(this,"phoneNumber",t[ri])}function oi(t){var e={},n=t[ci],r=t[hi],i=t[fi];if(t=Zr(t[li]),!i||i!=ai&&i!=ui&&!n||i==ui&&!r||i==si&&!t)throw Error("Invalid checkActionCode response!");i==ui?(e[di]=n||null,e[gi]=n||null,e[pi]=r):(e[di]=r||null,e[gi]=r||null,e[pi]=n||null),e[vi]=t||null,Qr(this,yi,i),Qr(this,mi,Xr(e))}w(ii,Jr),ii.prototype.w=function(){var t=ii.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var si="REVERT_SECOND_FACTOR_ADDITION",ai="EMAIL_SIGNIN",ui="VERIFY_AND_CHANGE_EMAIL",ci="email",li="mfaInfo",hi="newEmail",fi="requestType",pi="email",di="fromEmail",vi="multiFactorInfo",gi="previousEmail",mi="data",yi="operation";function bi(t){var e=Mn(t=Fn(t),_i)||null,n=Mn(t,wi)||null,r=Mn(t,Ei)||null;if(r=r&&Ci[r]||null,!e||!n||!r)throw new T("argument-error",_i+", "+wi+"and "+Ei+" are required in a valid action code URL.");$r(this,{apiKey:e,operation:r,code:n,continueUrl:Mn(t,Ii)||null,languageCode:Mn(t,Ti)||null,tenantId:Mn(t,Si)||null})}var _i="apiKey",wi="oobCode",Ii="continueUrl",Ti="languageCode",Ei="mode",Si="tenantId",Ci={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:si,signIn:ai,verifyAndChangeEmail:ui,verifyEmail:"VERIFY_EMAIL"};function ki(t){try{return new bi(t)}catch(e){return null}}function Ai(t){var e=t[Oi];if(void 0===e)throw new T("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new T("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ni];if(n&&"object"==typeof n){e=n[Mi];var r=n[Di];if(n=n[Li],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new T("argument-error",Di+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new T("argument-error",Li+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new T("argument-error",Mi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new T("missing-android-pkg-name")}}else if(void 0!==n)throw new T("argument-error",Ni+" property must be a non null object when specified.");if(this.f=null,(e=t[xi])&&"object"==typeof e){if("string"==typeof(e=e[Fi])&&e.length)this.f=e;else if(void 0!==e)throw new T("argument-error",Fi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new T("argument-error",xi+" property must be a non null object when specified.");if(void 0!==(e=t[Ri])&&"boolean"!=typeof e)throw new T("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Pi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new T("argument-error",Pi+" property must be a non empty string when specified.");this.i=t||null}var Ni="android",Pi="dynamicLinkDomain",Ri="handleCodeInApp",xi="iOS",Oi="url",Di="installApp",Li="minimumVersion",Mi="packageName",Fi="bundleId";function Ui(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var ji=null;function qi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=ji[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!ji){ji={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===ji[o]&&(ji[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e.push(t)})),e}function Vi(t){var e=Ki(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Bi(t){try{return new Vi(t)}catch(e){return null}}function Ki(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=qi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(u){}return null}Vi.prototype.T=function(){return this.f},Vi.prototype.l=function(){return this.c},Vi.prototype.toString=function(){return this.h};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Hi=["client_id","response_type","scope","redirect_uri","state"],zi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Hi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Hi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Hi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Wi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Gi(t){for(var e in zi)if(zi[e].fa==t)return zi[e];return null}function Qi(t){var e={};e["facebook.com"]=Zi,e["google.com"]=eo,e["github.com"]=to,e["twitter.com"]=no;var n=t&&t[Yi];try{if(n)return e[n]?new e[n](t):new Ji(t);if(void 0!==t[$i])return new Xi(t)}catch(r){}return null}var $i="idToken",Yi="providerId";function Xi(t){var e=t[Yi];if(!e&&t[$i]){var n=Bi(t[$i]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function Ji(t){Xi.call(this,t),Qr(this,"profile",Xr((t=Mr(t.rawUserInfo||"{}"))||{}))}function Zi(t){if(Ji.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function to(t){if(Ji.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function eo(t){if(Ji.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(t){if(Ji.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function ro(t){var e=Fn(t),n=Mn(e,"link"),r=Mn(Fn(n),"link");return e=Mn(e,"deep_link_id"),Mn(Fn(e),"link")||e||r||n||t}function io(t,e){if(!t&&!e)throw new T("internal-error","Internal assert: no raw session string available");if(t&&e)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?oo:so}w(Ji,Xi),w(Zi,Ji),w(to,Ji),w(eo,Ji),w(no,Ji);var oo="enroll",so="signin";function ao(){}function uo(t,e){return t.then((function(t){if(t[Js]){var n=Bi(t[Js]);if(!n||e!=n.i)throw new T("user-mismatch");return t}throw new T("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==C+"user-not-found"?new T("user-mismatch"):t}))}function co(t,e){if(!e)throw new T("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function lo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function ho(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new co(t.providerId,t.pendingToken)}catch(e){}return null}function fo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function po(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:$n(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function vo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new fo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function go(t,e){this.Qc=e||[],$r(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Gi(t)||{}).Ja||null,this.pb=null}function mo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');go.call(this,t,[])}function yo(t){go.call(this,t,Hi),this.a=[]}function bo(){yo.call(this,"facebook.com")}function _o(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function wo(){yo.call(this,"github.com")}function Io(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function To(){yo.call(this,"google.com"),this.Ca("profile")}function Eo(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new To).credential({idToken:n,accessToken:e})}function So(){go.call(this,"twitter.com",Wi)}function Co(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new fo("twitter.com",n,"twitter.com")}function ko(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===No.EMAIL_LINK_SIGN_IN_METHOD?No.EMAIL_LINK_SIGN_IN_METHOD:No.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ao(t){return t&&t.email&&t.password?new ko(t.email,t.password,t.signInMethod):null}function No(){$r(this,{providerId:"password",isOAuthProvider:!1})}function Po(t,e){if(!(e=Ro(e)))throw new T("argument-error","Invalid email link!");return new ko(t,e.code,No.EMAIL_LINK_SIGN_IN_METHOD)}function Ro(t){return(t=ki(t=ro(t)))&&t.operation===ai?t:null}function xo(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new T("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function Oo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new xo(e)}return null}function Do(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Lo(t){try{this.a=t||zs.auth()}catch(e){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}$r(this,{providerId:"phone",isOAuthProvider:!1})}function Mo(t,e){if(!t)throw new T("missing-verification-id");if(!e)throw new T("missing-verification-code");return new xo({fb:t,eb:e})}function Fo(t){if(t.temporaryProof&&t.phoneNumber)return new xo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Eo(o,n);case"facebook.com":return _o(n);case"github.com":return Io(n);case"twitter.com":return Co(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new co(e,s):new fo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new yo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Uo(t){if(!t.isOAuthProvider)throw new T("invalid-oauth-provider")}function jo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function qo(t){return(t=t||{}).type?new jo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function Vo(){this.b=null,this.a=[]}io.prototype.Ha=function(){return this.a?Ce(this.a):Ce(this.b)},io.prototype.w=function(){return this.type==oo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ao.prototype.ka=function(){},ao.prototype.b=function(){},ao.prototype.c=function(){},ao.prototype.w=function(){},co.prototype.ka=function(t){return _a(t,lo(this))},co.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,wa(t,n)},co.prototype.c=function(t,e){return uo(Ia(t,lo(this)),e)},co.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},fo.prototype.ka=function(t){return _a(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,wa(t,n)},fo.prototype.c=function(t,e){return uo(Ia(t,po(this)),e)},fo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},go.prototype.Ka=function(t){return this.Jb=ft(t),this},w(mo,go),w(yo,go),yo.prototype.Ca=function(t){return H(this.a,t)||this.a.push(t),this},yo.prototype.Rb=function(){return $(this.a)},yo.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new fo(this.providerId,n,this.providerId)},w(bo,yo),Qr(bo,"PROVIDER_ID","facebook.com"),Qr(bo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(wo,yo),Qr(wo,"PROVIDER_ID","github.com"),Qr(wo,"GITHUB_SIGN_IN_METHOD","github.com"),w(To,yo),Qr(To,"PROVIDER_ID","google.com"),Qr(To,"GOOGLE_SIGN_IN_METHOD","google.com"),w(So,go),Qr(So,"PROVIDER_ID","twitter.com"),Qr(So,"TWITTER_SIGN_IN_METHOD","twitter.com"),ko.prototype.ka=function(t){return this.signInMethod==No.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Pa,{email:this.a,oobCode:this.f}):ru(t,Ja,{email:this.a,password:this.f})},ko.prototype.b=function(t,e){return this.signInMethod==No.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ra,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Wa,{idToken:e,email:this.a,password:this.f})},ko.prototype.c=function(t,e){return uo(this.ka(t),e)},ko.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},$r(No,{PROVIDER_ID:"password"}),$r(No,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),$r(No,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),xo.prototype.ka=function(t){return t.gb(Do(this))},xo.prototype.b=function(t,e){var n=Do(this);return n.idToken=e,ru(t,tu,n)},xo.prototype.c=function(t,e){var n=Do(this);return n.operation="REAUTH",uo(t=ru(t,eu,n),e)},xo.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Lo.prototype.gb=function(t,e){var n=this.a.a;return Ce(e.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==oo?i.Ha().then((function(t){return function(t,e){return ru(t,za,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==so?i.Ha().then((function(e){return function(t,e){return ru(t,Ga,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Ba,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},$r(Lo,{PROVIDER_ID:"phone"}),$r(Lo,{PHONE_SIGN_IN_METHOD:"phone"}),jo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},jo.prototype.T=function(){return this.h},jo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Bo,Ko=null;function Wo(t){var e="unauthorized-domain",n=void 0,r=Fn(t);t=r.a,"chrome-extension"==(r=r.c)?n=qt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=qt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",T.call(this,e,n)}function Ho(t,e,n){T.call(this,t,n),(t=e||{}).Kb&&Qr(this,"email",t.Kb),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.$b&&Qr(this,"tenantId",t.$b)}function zo(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:Fo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new T(e,t.message||void 0);return new Ho(e,n,t.message)}return null}function Go(){}function Qo(t){return t.c||(t.c=t.b())}function $o(){}function Yo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(aA){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Xo(){}function Jo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Tb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function Zo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ts(t,e,n){this.reset(t,e,n,void 0,void 0)}function es(t){this.f=t,this.b=this.c=this.a=null}function ns(t,e){this.name=t,this.value=e}w(Wo,T),w(Ho,T),Ho.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&dt(t,e),t},Ho.prototype.toJSON=function(){return this.w()},Go.prototype.c=null,w($o,Go),$o.prototype.a=function(){var t=Yo(this);return t?new ActiveXObject(t):new XMLHttpRequest},$o.prototype.b=function(){var t={};return Yo(this)&&(t[0]=!0,t[1]=!0),t},Bo=new $o,w(Xo,Go),Xo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Jo;throw Error("Unsupported browser")},Xo.prototype.b=function(){return{}},(t=Jo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Zo(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",Zo(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,Zo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ts.prototype.a=null,ts.prototype.reset=function(t,e,n,r,i){delete this.a},ns.prototype.toString=function(){return this.name};var rs=new ns("SEVERE",1e3),is=new ns("WARNING",900),os=new ns("CONFIG",700),ss=new ns("FINE",500);function as(t){return t.c?t.c:t.a?as(t.a):(O("Root logger has no level set."),null)}es.prototype.log=function(t,e,n){if(t.value>=as(this).value)for(p(e)&&(e=e()),t=new ts(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var us={},cs=null;function ls(t){var e;if(cs||(cs=new es(""),us[""]=cs,cs.c=os),!(e=us[t])){e=new es(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ls(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,us[t]=e}return e}function hs(t,e){t&&t.log(ss,e,void 0)}function fs(t){this.f=t}function ps(t){bn.call(this),this.u=t,this.h=void 0,this.readyState=ds,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ls("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}w(fs,Go),fs.prototype.a=function(){return new ps(this.f)},fs.prototype.b=function(t){return function(){return t}}({}),w(ps,bn);var ds=0;function vs(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function gs(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ms(t)}function ms(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ys(t){bn.call(this),this.headers=new kn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=bs,this.u=this.S=!1}(t=ps.prototype).open=function(t,e){if(this.readyState!=ds)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ms(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,gs(this)),this.readyState=ds},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ms(this)),this.a&&(this.readyState=3,ms(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,vs(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?gs(this):ms(this),3==this.readyState&&vs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,gs(this))},t.sc=function(t){this.a&&(this.response=t,gs(this))},t.Va=function(t){var e=this.i;e&&e.log(is,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&gs(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(is,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(is,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ps.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),w(ys,bn);var bs="";ys.prototype.b=ls("goog.net.XhrIo");var _s=/^https?$/i,ws=["POST","PUT"];function Is(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Bo.a(),t.C=t.D?Qo(t.D):Qo(Bo),t.a.onreadystatechange=b(t.Wb,t);try{hs(t.b,Rs(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(a){return hs(t.b,Rs(t,"Error opening Xhr: "+a.message)),void Es(t,a)}e=r||"";var o=new kn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)V(t,e,void 0);else for(var n=Cn(t),r=Sn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ts,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!H(ws,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{As(t),0<t.g&&(t.u=function(t){return zt&&re(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),hs(t.b,Rs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=Tn(t.Ma,t.g,t)),hs(t.b,Rs(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){hs(t.b,Rs(t,"Send error: "+a.message)),Es(t,a)}}function Ts(t){return"content-type"==t.toLowerCase()}function Es(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ss(t),ks(t)}function Ss(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Cs(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Ns(t)&&2==Ps(t))hs(t.b,Rs(t,"Local request error detected and ignored"));else if(t.i&&4==Ns(t))Tn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ns(t)){hs(t.b,Rs(t,"Request complete")),t.c=!1;try{var e,n=Ps(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(Pn)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!_s.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ns(t)?t.a.statusText:""}catch(l){hs(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+Ps(t)+"]",Ss(t)}}finally{ks(t)}}}function ks(t,e){if(t.a){As(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(aA){(t=t.b)&&t.log(rs,"Problem encountered resetting onreadystatechange: "+aA.message,void 0)}}}function As(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Ns(t){return t.a?t.a.readyState:0}function Ps(t){try{return 2<Ns(t)?t.a.status:-1}catch(e){return-1}}function Rs(t,e){return e+" ["+t.P+" "+t.l+" "+Ps(t)+"]"}function xs(t){var e=Ks;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Os(t,e,n){t.a=!0,t.c=n,t.f=!e,Fs(t)}function Ds(t){if(t.a){if(!t.v)throw new Us(t);t.v=!1}}function Ls(t,e,n,r){t.g.push([e,n,r]),t.a&&Fs(t)}function Ms(t){return W(t.g,(function(t){return p(t[1])}))}function Fs(t){if(t.h&&t.a&&Ms(t)){var e=t.h,n=Vs[e];n&&(s.clearTimeout(n.a),delete Vs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(P(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ms(t)||(n=!0)}}t.c=e,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),e instanceof xs?(Ls(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new qs(e),Vs[e.a]=e,t.h=e.a)}function Us(){R.call(this)}function js(){R.call(this)}function qs(t){this.a=s.setTimeout(b(this.c,this),0),this.b=t}(t=ys.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",hs(this.b,Rs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(hs(this.b,Rs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ks(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ks(this,!0)),ys.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?Cs(this):this.Jc())},t.Jc=function(){Cs(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case bs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(rs,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return hs(this.b,"Can not get response: "+e.message),null}},xs.prototype.cancel=function(t){if(this.a)this.c instanceof xs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new js(this),Ds(this),Os(this,!1,t))}},xs.prototype.m=function(t,e){this.i=!1,Os(this,t,e)},xs.prototype.then=function(t,e,n){var r,i,o=new be((function(t,e){r=t,i=e}));return Ls(this,r,(function(t){t instanceof js?o.cancel():i(t)})),o.then(t,e,n)},xs.prototype.$goog_Thenable=!0,w(Us,R),Us.prototype.message="Deferred has already fired",Us.prototype.name="AlreadyCalledError",w(js,R),js.prototype.message="Deferred was canceled",js.prototype.name="CanceledError",qs.prototype.c=function(){throw delete Vs[this.a],this.b};var Vs={};function Bs(t){var e,n=document,r=Tt(t).toString(),i=pe(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new xs(o);return e=window.setTimeout((function(){Ws(i,!0);var t=new Qs(Gs,"Timeout reached for loading script "+r);Ds(a),Os(a,!1,t)}),5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ws(i,!1,e),Ds(a),Os(a,!0,null))},i.onerror=function(){Ws(i,!0,e);var t=new Qs(Hs,"Error while loading script "+r);Ds(a),Os(a,!1,t)},dt(o={},{type:"text/javascript",charset:"UTF-8"}),ue(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=Tt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=c(e.document):(null===u&&(u=c(s.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ks(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Ws(t,!0,this.Ma)}}function Ws(t,e,n){null!=n&&s.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Hs=0,Gs=1;function Qs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function $s(t){this.f=t}function Ys(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Zs,this.g=ft(t.secureTokenHeaders||ta),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ea,this.a=ft(t.firebaseHeaders||na),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==_r(),!(n=s.XMLHttpRequest||n&&zs.INTERNAL.node&&zs.INTERNAL.node.XMLHttpRequest)&&!br())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,br()?this.f=new fs(self):wr()?this.f=new $s(n):this.f=new Xo,this.b=null}w(Qs,R),w($s,Go),$s.prototype.a=function(){return new this.f},$s.prototype.b=function(){return{}};var Xs,Js="idToken",Zs=new qr(3e4,6e4),ta={"Content-Type":"application/x-www-form-urlencoded"},ea=new qr(3e4,6e4),na={"Content-Type":"application/json"};function ra(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ia(t,e){e&&(t.l=oa("https://securetoken.googleapis.com/v1/token",e),t.h=oa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=oa("https://identitytoolkit.googleapis.com/v2/",e))}function oa(t,e){return t=Fn(t),e=Fn(e.url),t.f=t.a+t.f,xn(t,e.c),t.a=e.a,On(t,e.g),t.toString()}function sa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function aa(t,e,n,r,i,o,a){(function(){var t=kr();return!((t=Er(t)!=Tr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||zt&&oe&&!(9<oe))})()||br()?t=b(t.u,t):(Xs||(Xs=new be((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[ca]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ls(t,null,e,void 0)}(Bs(Et(ua,{onload:ca})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=b(t.s,t)),t(e,n,r,i,o,a)}Ys.prototype.T=function(){return this.b},Ys.prototype.u=function(t,e,n,r,i,o){if(br()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new ys(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}_n(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return hs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),wn(a,"ready",(function(){u&&clearTimeout(u),Ke(this)})),wn(a,"timeout",(function(){u&&clearTimeout(u),Ke(this),e&&e(null)})),Is(a,t,n,r,i)};var ua=new gt(_t,"https://apis.google.com/js/client.js?onload=%{onload}"),ca="__fcb"+Math.floor(1e6*Math.random()).toString();function la(t,e,n,r,i,o,s){var a=Fn(e+n);Ln(a,"key",t.c),s&&Ln(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Ln(a,c,i[c]);return new be((function(e,n){aa(t,a.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new T("network-request-failed"))}),r,u?void 0:er(Lr(i)),t.a,t.v.get())}))}function ha(t){if("string"!=typeof(t=t.email)||!vr.test(t))throw new T("invalid-email")}function fa(t){"email"in t&&ha(t)}function pa(t){if(!t[Js]){if(t.mfaPendingCredential)throw new T("multi-factor-auth-required",null,ft(t));throw new T("internal-error")}}function da(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new T("internal-error")}else{if(!t.sessionInfo)throw new T("missing-verification-id");if(!t.code)throw new T("missing-verification-code")}}Ys.prototype.s=function(t,e,n,r,i){var o=this;Xs.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ys.prototype.Ab=function(){return ru(this,Ha,{})},Ys.prototype.Cb=function(t,e){return ru(this,Ka,{idToken:t,email:e})},Ys.prototype.Db=function(t,e){return ru(this,Wa,{idToken:t,password:e})};var va={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ga(t){if(!t.phoneVerificationInfo)throw new T("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ma(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new T("internal-error")}function ya(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Xn(t=new Gn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ba(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=zo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=zo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=zo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;pa(t)}function _a(t,e){return e.returnIdpCredential=!0,ru(t,Qa,e)}function wa(t,e){return e.returnIdpCredential=!0,ru(t,Ya,e)}function Ia(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,$a,e)}function Ta(t){if(!t.oobCode)throw new T("invalid-action-code")}(t=Ys.prototype).Eb=function(t,e){var n={idToken:t},r=[];return lt(va,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ka,n)},t.wb=function(t,e){return dt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Ua,t)},t.xb=function(t,e){return dt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,La,t)},t.vb=function(t,e){return dt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ma,t)},t.Fb=function(t,e,n){return dt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fa,t)},t.gb=function(t){return ru(this,Za,t)},t.ob=function(t,e){return ru(this,Va,{oobCode:t,newPassword:e})},t.Sa=function(t){return ru(this,Sa,{oobCode:t})},t.kb=function(t){return ru(this,Ea,{oobCode:t})};var Ea={endpoint:"setAccountInfo",A:Ta,Z:"email",B:!0},Sa={endpoint:"resetPassword",A:Ta,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new T("internal-error")},B:!0},Ca={endpoint:"signupNewUser",A:function(t){if(ha(t),!t.password)throw new T("weak-password")},G:pa,V:!0,B:!0},ka={endpoint:"createAuthUri",B:!0},Aa={endpoint:"deleteAccount",O:["idToken"]},Na={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new T("internal-error")}},Pa={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ha,G:pa,V:!0,B:!0},Ra={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ha,G:pa,V:!0},xa={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:ga,G:pa,B:!0,Na:!0},Oa={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:ga,G:pa,B:!0,Na:!0},Da={endpoint:"getAccountInfo"},La={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new T("internal-error");ha(t)},Z:"email",B:!0},Ma={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Fa={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Ua={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new T("internal-error");ha(t)},Z:"email",B:!0},ja={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},qa={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new T("internal-error")}},Va={endpoint:"resetPassword",A:Ta,Z:"email",B:!0},Ba={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ka={endpoint:"setAccountInfo",O:["idToken"],A:fa,V:!0},Wa={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(fa(t),!t.password)throw new T("weak-password")},G:pa,V:!0},Ha={endpoint:"signupNewUser",G:pa,V:!0,B:!0},za={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new T("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Ga={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Qa={endpoint:"verifyAssertion",A:ma,Za:ya,G:ba,V:!0,B:!0},$a={endpoint:"verifyAssertion",A:ma,Za:ya,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new T("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);pa(t)},V:!0,B:!0},Ya={endpoint:"verifyAssertion",A:function(t){if(ma(t),!t.idToken)throw new T("internal-error")},Za:ya,G:ba,V:!0},Xa={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new T("invalid-custom-token")},G:pa,V:!0,B:!0},Ja={endpoint:"verifyPassword",A:function(t){if(ha(t),!t.password)throw new T("wrong-password")},G:pa,V:!0,B:!0},Za={endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new T("internal-error");da(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",zo(t);pa(t)}},eu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Js]^!!t.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return ke(new T("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Ce(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),la(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new T("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",dt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],e);return!e&&t&&(e=Dr(t)),new T("internal-error",e)}function su(t){this.b=t,this.a=null,this.sb=function(t){return(lu||(lu=new be((function(t,e){function n(){jr(),Ar("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){jr(),e(Error("Network Error"))},timeout:uu.get()})}if(Ar("gapi.iframes.Iframe"))t();else if(Ar("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Ar("gapi.load")?n():e(Error("Network Error"))},Ce(Bs(r=Et(au,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw lu=null,t})))).then((function(){return new be((function(e,n){Ar("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new gt(_t,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new qr(3e4,6e4),cu=new qr(5e3,15e3),lu=null;function hu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Un((t=Fn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Un("https",this.l,null,"/__/auth/iframe"),this.a=t,Ln(this.a,"apiKey",this.h),Ln(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return zs.app(t).auth().Ga()}catch(e){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=ur();return function(t){return ru(t,ja,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Fn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Fn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:dr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Wo(ur())}))}function gu(t){return t.m||(t.m=gr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new hu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=$(r||[]),t.u=i.toString()}t.v=new su(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=qo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ce(n)}return n.status="ERROR",Ce(n)}))}(t)}))),t.m}function mu(t){return t.l||(t.C=t.c?Cr(t.c,pu(t.b)):null,t.l=new Ys(t.g,N(t.i),t.C),t.f&&ia(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,s,a,u,c,l,h){return(t=new fu(t,e,n,r,i,h)).l=o,t.g=s,t.i=a,t.b=ft(u||null),t.f=c,t.zb(l).toString()}function bu(t){if(this.a=t||zs.INTERNAL.reactNative&&zs.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function _u(t){this.b=t,this.a={},this.f=b(this.c,this)}hu.prototype.toString=function(){return this.f?Ln(this.a,"v",this.f):Yn(this.a.b,"v"),this.b?Ln(this.a,"eid",this.b):Yn(this.a.b,"eid"),this.c.length?Ln(this.a,"fw",this.c.join(",")):Yn(this.a.b,"fw"),this.a.toString()},fu.prototype.zb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=Fn(this.v.url);t=Un(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Un("https",this.u,null,"/__/auth/handler");if(Ln(t,"apiKey",this.s),Ln(t,"appName",this.c),Ln(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=zs.app(this.c).auth().la()}catch(a){n=null}for(var r in e.pb=n,Ln(t,"providerId",this.a.providerId),e=Lr((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=ft(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),ht(e)||Ln(t,"customParameters",Dr(e))}if("function"==typeof this.a.Rb&&((n=this.a.Rb()).length&&Ln(t,"scopes",n.join(","))),this.l?Ln(t,"redirectUrl",this.l):Yn(t.b,"redirectUrl"),this.g?Ln(t,"eventId",this.g):Yn(t.b,"eventId"),this.i?Ln(t,"v",this.i):Yn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Mn(t,s)&&Ln(t,s,this.b[s]);return this.h?Ln(t,"tid",this.h):Yn(t.b,"tid"),this.f?Ln(t,"eid",this.f):Yn(t.b,"eid"),(s=pu(this.c)).length&&Ln(t,"fw",s.join(",")),t.toString()},(t=du.prototype).Pb=function(t,e,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return gu(t).then((function(){return function(t,e){return t.sb.then((function(){return new be((function(n){t.a.send(e.type,e,n,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&fr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new be((function(e){return function n(){En(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return En(n).then((function(){e(r)}))}))},t.Yb=function(){var t=kr();return!Or(t)&&!Ur(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,s,a){if(!t)return ke(new T("popup-blocked"));if(s&&!Or())return this.ma().o((function(e){fr(t),i(e)})),r(),Ce();this.a||(this.a=vu(mu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw fr(t),i(e),e}));return r(),e})).then((function(){(Uo(n),s)||cr(yu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=vu(mu(this)));var i=this;return this.a.then((function(){Uo(e),cr(yu(i.s,i.g,i.b,t,e,ur(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return gu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new T("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){G(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return Ce(this.a.getItem(t)).then((function(t){return t&&Mr(t)}))},t.set=function(t,e){return Ce(this.a.setItem(t,Dr(e)))},t.U=function(t){return Ce(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var wu,Iu=[];function Tu(t,e,n){ht(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Eu(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Cu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return ke(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new be((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return ku(t,c),e})).o((function(e){throw ku(t,c),e}))}function ku(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),G(t.a,(function(t){return t==e}))}}function Au(){if(!xu())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;br()&&self?(this.v=function(){var t=br()?self:null;if(V(Iu,(function(n){n.b==t&&(e=n)})),!e){var e=new _u(t);Iu.push(e)}return e}(),Tu(this.v,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&V(t.a,(function(t){t(e)})),{keyProcessed:H(e,n.key)}}))})),Tu(this.v,"ping",(function(){return Ce(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Ce().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ce(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new Eu(e)),Cu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&H(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Nu(t){return new be((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new be((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Nu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Pu(t){return t.i||(t.i=Nu(t)),t.i}function Ru(t,e){var n=0;return new be((function r(i,o){Pu(t).then(e).then(i).o((function(e){if(!(3<++n))return Pu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function xu(){try{return!!s.indexedDB}catch(Wt){return!1}}function Ou(t){return t.objectStore("firebaseLocalStorage")}function Du(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new be((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ce()}function Fu(t){return Pu(t).then((function(t){var e=Ou(Du(t,!1));return e.getAll?Lu(e.getAll()):new be((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=lr(t.c,n),t.c=n}return r}))}function Uu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ju(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ce().then((function(){if(xu()){var t=Fr(),r="__sak"+t;return wu||(wu=new Au),(n=wu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){V(e.a,(function(e){e(t)}))})),t}))}function qu(){this.a={},this.type="inMemory"}function Vu(){if(!function(){var t="Node"==_r();if(!(t=Bu()||t&&zs.INTERNAL.node&&zs.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==_r())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Bu()||zs.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=s.localStorage,e=Fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Ku(){this.type="nullStorage"}function Wu(){if(!function(){var t="Node"==_r();if(!(t=Hu()||t&&zs.INTERNAL.node&&zs.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==_r())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Hu()||zs.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hu(){try{var t=s.sessionStorage,e=Fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function zu(){var t={};t.Browser=$u,t.Node=Yu,t.ReactNative=Xu,t.Worker=Ju,this.a=t[_r()]}_u.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];V(r,(function(e){i.push(Ce().then((function(){return e(t.origin,t.data.data)})))})),Ne(i).then((function(r){var i=[];V(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),V(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Eu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)ku(this,this.a[0]);this.b=!0},(t=Au.prototype).set=function(t,e){var n=this,r=!1;return Ru(this,(function(e){return Lu((e=Ou(Du(e,!0))).get(t))})).then((function(i){return Ru(n,(function(o){if(o=Ou(Du(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Lu(o.add(s))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Ru(this,(function(e){return Lu(Ou(Du(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Ru(this,(function(r){return n=!0,e.b++,Lu(Ou(Du(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&V(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Uu(t),e()}(this),this.a.push(t)},t.ia=function(t){G(this.a,(function(e){return e==t})),0==this.a.length&&Uu(this)},(t=ju.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){G(this.a,(function(e){return e==t}))},(t=qu.prototype).get=function(t){return Ce(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ce()},t.U=function(t){return delete this.a[t],Ce()},t.ca=function(){},t.ia=function(){},(t=Vu.prototype).get=function(t){var e=this;return Ce().then((function(){return Mr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=Dr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&an(s.window,"storage",t)},t.ia=function(t){s.window&&ln(s.window,"storage",t)},(t=Ku.prototype).get=function(){return Ce(null)},t.set=function(){return Ce()},t.U=function(){return Ce()},t.ca=function(){},t.ia=function(){},(t=Wu.prototype).get=function(t){var e=this;return Ce().then((function(){return Mr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=Dr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Gu,Qu,$u={F:Vu,cb:Wu},Yu={F:Vu,cb:Wu},Xu={F:bu,cb:Ku},Ju={F:Vu,cb:Ku},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(Ur(kr())||!yr()),e=Or(),n=Nr();this.m=t,this.h=e,this.l=n,this.a={},Gu||(Gu=new zu),t=Gu;try{this.g=!ar()&&Kr()||!s.indexedDB?new t.a.F:new ju(br()?new qu:new t.a.F)}catch(r){this.g=new qu,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new qu}this.v=new qu,this.f=b(this.Zb,this),this.b={}}function ec(){return Qu||(Qu=new tc),Qu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function sc(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),ht(this.a)&&(nc(this,"local").ca(this.f),this.h||(ar()||!Kr())&&s.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new $e({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(G(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),ht(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.nb(e))},zt&&oe&&10==oe&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else V(t,b(this.nb,this))},t.nb=function(t){this.a[t]&&V(this.a[t],(function(t){t()}))};var ac,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function lc(t,e){this.b=hc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===ac&&(ac=s.Int32Array?new Int32Array(yc):yc),this.reset()}w(lc,(function(){this.b=-1}));for(var hc=64,fc=hc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var vc=Q(128,pc);function gc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|ac[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function mc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(gc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(gc(t),i=0)}}t.c=i,t.g+=n}lc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):$(this.h)};var yc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){lc.call(this,8,_c)}w(bc,lc);var _c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new sc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ic(t){return new T("invalid-cordova-configuration",t)}function Tc(t){var e=new bc;mc(e,t),t=[];var n=8*e.g;56>e.c?mc(e,vc,56-e.c):mc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(gc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Ec(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Sc(t){return t.f||(t.f=t.ma().then((function(){return new be((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Cc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ro(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Mr(Mn(o=Fn(i),"firebaseError")||null))?E(o):null)?new jo(r.c,r.b,null,null,o,null,r.T()):new jo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Ec(t,i)}))}var n=new jo("unknown",null,null,null,new T("no-auth-event")),r=!1,i=En(500).then((function(){return Cc(t).then((function(){r||Ec(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ar("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Ko||(Ko=new Vo),function(t){var e=Ko;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ar("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Cc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return qo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function kc(t){this.a=t,this.b=ec()}(t=wc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(mr(void 0)?gr().then((function(){return new be((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):ke(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Ar("universalLinks.subscribe",s))throw Ic("cordova-universal-links-plugin-fix is not installed");if(void 0===Ar("BuildInfo.packageName",s))throw Ic("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ar("cordova.plugins.browsertab.openUrl",s))throw Ic("cordova-plugin-browsertab is not installed");if("function"!=typeof Ar("cordova.InAppBrowser.open",s))throw Ic("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},t.Pb=function(t,e){return e(new T("operation-not-supported-in-this-environment")),Ce()},t.Nb=function(){return ke(new T("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return ke(new T("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Ce().then((function(){return Uo(e),Sc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new jo(e,r,null,o,new T("no-auth-event"),null,i),u=Ar("BuildInfo.packageName",s);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=Ar("BuildInfo.displayName",s),l={};if(kr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!kr().toLowerCase().match(/android/))return ke(new T("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=Tc(o),l.sessionId=o;var h=yu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,a.w(),e)})).then((function(){var e=Ar("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new T("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Ar("cordova.plugins.browsertab.openUrl",s)))throw new T("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Ar("cordova.InAppBrowser.open",s)))throw new T("invalid-cordova-configuration");e=kr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new be((function(t,e){u=function(){var e=Ar("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=En(2e3).then((function(){e(new T("redirect-cancelled-by-user"))})))},l=function(){Vr()&&c()},o.addEventListener("resume",c,!1),kr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return Cc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Ta(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Sc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new jo("unknown",null,null,null,new T("no-auth-event")),t(e))}))},t.Ta=function(t){G(this.b,(function(e){return e==t}))};var Ac={name:"pendingRedirect",F:"session"};function Nc(t){return ic(t.b,Ac,t.a)}function Pc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Hc,this.C=new Yc,this.g=new kc(Kc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Rc(this.D,this.v,this.m,S,this.J)}function Rc(t,e,n,r,i){var o=zs.SDK_VERSION||null;return mr()?new wc(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function xc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Oc(t){t.a.Yb()&&xc(t).o((function(e){var n=new jo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)})),t.a.Ub()||zc(t.b)}function Dc(t,e){H(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Ac,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Nc(t.g).then((function(){xc(t).o((function(e){var n=new jo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)}))})):Oc(t)})).o((function(){Oc(t)}))}function Lc(t,e){G(t.h,(function(t){return t==e}))}Pc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Rc(this.D,this.v,this.m,null,this.J),this.i={}},Pc.prototype.s=function(t){if(!t)throw new T("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return zc(this.b),e};var Mc=new qr(2e3,1e4),Fc=new qr(3e4,6e4);function Uc(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function jc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function qc(t,e,n,r,i){var o;return function(t){return t.b.set(Ac,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(jc(e))throw new T("operation-not-supported-in-this-environment");return o=e,Nc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new be((function(){})):Nc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Vc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Mc.get())}Pc.prototype.ra=function(){return this.b.ra()};var Bc={};function Kc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Wc(t,e,n,r){var i=Kc(e,n,r);return Bc[i]||(Bc[i]=new Pc(t,e,n,r)),Bc[i]}function Hc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function zc(t){t.g||(t.g=!0,$c(t,!1,null,null))}function Gc(t){t.g&&!t.i&&$c(t,!1,null,null)}function Qc(t,e){if(t.b=function(){return Ce(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function $c(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ke(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Qc(t,n):Qc(t,{user:null}),t.f=[],t.c=[]}function Yc(){}function Xc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Jc(t,e){this.a=e,Qr(this,"verificationId",t)}function Zc(t,e,n,r){return new Lo(t).gb(e,n).then((function(t){return new Jc(t,r)}))}function tl(t){var e=Ki(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");$r(this,{token:t,expirationTime:Br(1e3*e.exp),authTime:Br(1e3*e.auth_time),issuedAtTime:Br(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function el(t,e,n){var r=e&&e[rl];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ft(e),this.g=n,this.c=new io(null,r),this.b=[];var i=this;V(e[nl]||[],(function(t){(t=Zr(t))&&i.b.push(t)})),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Hc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Hc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?($c(this,!0,null,t.a),Ce()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){$c(t,a,e,null)})).o((function(e){$c(t,a,null,e)}))}(this,t,e):ke(new T("invalid-auth-event")):($c(this,!1,null,null),Ce())}else ke(new T("invalid-auth-event"))},Hc.prototype.ra=function(){var t=this;return new be((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new T("timeout");t.a&&t.a.cancel(),t.a=En(Fc.get()).then((function(){t.b||(t.g=!0,$c(t,!0,null,e))}))}(t))}))},Yc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ce()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):ke(new T("invalid-auth-event"))}else ke(new T("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Mo(this.verificationId,t),this.a(t)};var nl="mfaInfo",rl="mfaPendingCredential";function il(t,e,n,r){T.call(this,"multi-factor-auth-required",r,e),this.b=new el(t,e,n),Qr(this,"resolver",this.b)}function ol(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new il(e,t.serverResponse,n,t.message)}catch(r){}return null}function sl(){}function al(t){Qr(this,"factorId",t.fa),this.a=t}function ul(t){if(al.call(this,t),this.a.fa!=Lo.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function cl(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function ll(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),an(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&V(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ni]=t.uid),t.displayName&&(r[ti]=t.displayName),t.enrollmentTime&&(r[ei]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ri]=t.phoneNumber);try{e=new ii(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),hl(this,n)}function hl(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function fl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function pl(t,e){t.stop(),t.b=En(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return Vr()||!t?Ce():new be((function(n){e=function(){Vr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){pl(t,!0)})).o((function(e){t.i(e)&&pl(t,!1)}))}function dl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function vl(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function gl(t,e){t.b=Bi(e[Js]||""),t.a=e.refreshToken,vl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function ml(t,e){return function(t,e){return new be((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?aa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",$n(e).toString(),t.g,t.m.get()):r(new T("internal-error"))}))}(t.f,e).then((function(e){return t.b=Bi(e.access_token),t.a=e.refresh_token,vl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function yl(t,e){this.a=t||null,this.b=e||null,$r(this,{lastSignInTime:Br(e||null),creationTime:Br(t||null)})}function bl(t,e,n,r,i,o){$r(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function _l(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=zs.SDK_VERSION?Cr(zs.SDK_VERSION):null;this.a=new Ys(this.l,N(S),r),(this.u=t.emulatorConfig||null)&&ia(this.a,this.u),this.h=new dl(this.a),Nl(this,e[Js]),gl(this.h,e),Qr(this,"refreshToken",this.h.a),xl(this,n||{}),bn.call(this),this.P=!1,this.s&&Pr()&&(this.b=Wc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new fl((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=b(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){wl(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){El(i,t.f)},this.ja=null,this.S=new ll(this,n),Qr(this,"multiFactor",this.S)}function wl(t,e){t.u=e,ia(t.a,e),t.b&&(e=t.b,t.b=Wc(t.s,t.l,t.m,t.u),t.P&&(Lc(e,t),Dc(t.b,t)))}function Il(t,e){t.qa&&ln(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&an(e,"languageCodeChanged",t.Pa)}function Tl(t,e){t.$&&ln(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&an(e,"emulatorConfigChanged",t.Ba)}function El(t,e){t.aa=e,sa(t.a,zs.SDK_VERSION?Cr(zs.SDK_VERSION,t.aa):null)}function Sl(t,e){t.ja&&ln(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&an(e,"frameworkChanged",t.Oa)}function Cl(t){try{return zs.app(t.m).auth()}catch(e){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function kl(t){t.J||t.D.b||(t.D.start(),ln(t,"tokenChanged",t.ba),an(t,"tokenChanged",t.ba))}function Al(t){ln(t,"tokenChanged",t.ba),t.D.stop()}function Nl(t,e){t.Aa=e,Qr(t,"_lat",e)}function Pl(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Ne(e).then((function(){return t}))}function Rl(t){t.b&&!t.P&&(t.P=!0,Dc(t.b,t))}function xl(t,e){$r(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new yl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Ol(){}function Dl(t){return Ce().then((function(){if(t.J)throw new T("app-deleted")}))}function Ll(t){return K(t.providerData,(function(t){return t.providerId}))}function Ml(t,e){e&&(Fl(t,e.providerId),t.providerData.push(e))}function Fl(t,e){G(t.providerData,(function(t){return t.providerId==e}))}function Ul(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function jl(t,e){t!=e&&($r(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Qr(t,"metadata",function(t){return new yl(t.a,t.b)}(e.metadata)):Qr(t,"metadata",new yl),V(e.providerData,(function(e){Ml(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Qr(t,"refreshToken",t.h.a),hl(t.S,e.S.b))}function ql(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Da,{idToken:e}).then(b(t.Kc,t))}(t,e).then((function(){return n||Ul(t,"isAnonymous",!1),e}))}))}function Vl(t,e){e[Js]&&t.Aa!=e[Js]&&(gl(t.h,e),t.dispatchEvent(new cl("tokenChanged")),Nl(t,e[Js]),Ul(t,"refreshToken",t.h.a))}function Bl(t,e){return ql(t).then((function(){if(H(Ll(t),e))return Pl(t).then((function(){throw new T("provider-already-linked")}))}))}function Kl(t,e,n){return Yr({user:t,credential:Fo(e),additionalUserInfo:e=Qi(e),operationType:n})}function Wl(t,e){return Vl(t,e),t.reload().then((function(){return t}))}function Hl(t,e,n,r,i){if(!Pr())return ke(new T("operation-not-supported-in-this-environment"));if(t.i&&!i)return ke(t.i);var o=Gi(n.providerId),s=Fr(t.uid+":::"),a=null;(!Or()||yr())&&t.s&&n.isOAuthProvider&&(a=yu(t.s,t.l,t.m,e,n,null,s,zs.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=pr(a,o&&o.va,o&&o.ua);return r=r().then((function(){if(Gl(t),!i)return t.I().then((function(){}))})).then((function(){return Uc(t.b,u,e,n,s,!!a,t.tenantId)})).then((function(){return new be((function(n,r){t.na(e,null,new T("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=Vc(t.b,t,e,u,s)}))})).then((function(t){return u&&fr(u),t?Yr(t):null})).o((function(t){throw u&&fr(u),t})),Ql(t,r,i)}function zl(t,e,n,r,i){if(!Pr())return ke(new T("operation-not-supported-in-this-environment"));if(t.i&&!i)return ke(t.i);var o=null,s=Fr(t.uid+":::");return r=r().then((function(){if(Gl(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,Pl(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Xl,t.w(),e.a)),e})).then((function(){return qc(t.b,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Jl(t.ha);throw o})).then((function(){if(o)throw o})),Ql(t,r,i)}function Gl(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new T("internal-error");throw new T("auth-domain-config-required")}}function Ql(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),ke(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new cl("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){z(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ol(e.w(),Cl(t),b(t.jc,t))),n||e}))}function $l(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Js]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new _l(e,n,t);return t.providerData&&V(t.providerData,(function(t){t&&Ml(i,Yr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Yl(t){this.a=t,this.b=ec()}el.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=ft(e.f);return delete n[nl],delete n[rl],dt(n,t),e.g(n)}))},w(il,T),sl.prototype.tb=function(t,e,n){return e.type==oo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),dt(n,{phoneVerificationInfo:Do(t.a)}),ru(e,xa,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return dt(n={mfaPendingCredential:n},{phoneVerificationInfo:Do(t.a)}),ru(e,Oa,n)}))}(this,t,e)},w(al,sl),w(ul,al),w(cl,Qe),(t=ll.prototype).yc=function(t){hl(this,function(t){var e=[];return V(t.mfaInfo||[],(function(t){(t=Zr(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new io(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Vl(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=B(e.b,(function(t){return t.uid!=n}));return hl(e,r),Vl(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(t){return t.w()}))}}},fl.prototype.start=function(){this.a=this.c,pl(this,!0)},fl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ke(new T("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?ml(this,{grant_type:"refresh_token",refresh_token:this.a}):Ce(null):Ce({accessToken:this.b.toString(),refreshToken:this.a})},yl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(_l,bn),_l.prototype.xa=function(t){this.za=t,ra(this.a,t)},_l.prototype.la=function(){return this.za},_l.prototype.Ga=function(){return $(this.aa)},_l.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Qr(_l.prototype,"providerId","firebase"),(t=_l.prototype).reload=function(){var t=this;return Ql(this,Dl(this).then((function(){return ql(t).then((function(){return Pl(t)})).then(Ol)})))},t.oc=function(t){return this.I(t).then((function(t){return new tl(t)}))},t.I=function(t){var e=this;return Ql(this,Dl(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new T("internal-error");return t.accessToken!=e.Aa&&(Nl(e,t.accessToken),e.dispatchEvent(new cl("tokenChanged"))),Ul(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new T("internal-error");xl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,(function(t){return new bl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Ml(this,e[n]);Ul(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new cl("userReloaded",{hd:t}))},t.Lc=function(t){return zr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return Ql(this,t.c(this.a,this.uid).then((function(t){return Vl(e,t),n=Kl(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return zr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return Ql(this,Bl(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Kl(e,t,"link"),Wl(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Ql(this,Bl(this,"phone").then((function(){return Zc(Cl(n),t,e,b(n.rb,n))})))},t.Mc=function(t,e){var n=this;return Ql(this,Ce().then((function(){return Zc(Cl(n),t,e,b(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return Ql(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Vl(e,t),e.reload()})))},t.ed=function(t){var e=this;return Ql(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Vl(e,t),e.reload()})))},t.Db=function(t){var e=this;return Ql(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Vl(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Dl(this);var e=this;return Ql(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Vl(e,t),Ul(e,"displayName",t.displayName||null),Ul(e,"photoURL",t.photoUrl||null),V(e.providerData,(function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))})),Pl(e)})).then(Ol))},t.cd=function(t){var e=this;return Ql(this,ql(this).then((function(n){return H(Ll(e),t)?function(t,e,n){return ru(t,Na,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return V(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),V(Ll(e),(function(t){n[t]||Fl(e,t)})),n[Lo.PROVIDER_ID]||Qr(e,"phoneNumber",null),Pl(e)})):Pl(e).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var t=this;return Ql(this,this.I().then((function(e){return ru(t.a,Aa,{idToken:e})})).then((function(){t.dispatchEvent(new cl("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Il(t,null),Tl(t,null),Sl(t,null),t.N=[],t.J=!0,Al(t),Qr(t,"refreshToken",null),t.b&&Lc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Mb,this):null},t.Ec=function(t){var e=this;return Hl(this,"linkViaPopup",t,(function(){return Bl(e,t.providerId).then((function(){return Pl(e)}))}),!1)},t.Nc=function(t){return Hl(this,"reauthViaPopup",t,(function(){return Ce()}),!0)},t.Fc=function(t){var e=this;return zl(this,"linkViaRedirect",t,(function(){return Bl(e,t.providerId)}),!1)},t.Oc=function(t){return zl(this,"reauthViaRedirect",t,(function(){return Ce()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ql(this,this.I().then((function(n){return wa(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Kl(i,t,"link"),Wl(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ql(this,Ce().then((function(){return uo(Ia(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Kl(i,t,"reauthenticate"),Vl(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return Ql(this,this.I().then((function(e){return n=e,void 0===t||ht(t)?{}:Ui(new Ai(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return Ql(this,this.I().then((function(t){return r=t,void 0===e||ht(e)?{}:Ui(new Ai(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Ql(this,t=uo(Ce(t),n.uid).then((function(t){return e=Kl(n,t,"reauthenticate"),Vl(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&dt(t,this.metadata.w()),V(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),dt(t,this.S.w()),t};var Xl={name:"redirectUser",F:"session"};function Jl(t){return ic(t.b,Xl,t.a)}function Zl(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=nh("local"),n=nh("session"),r=nh("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Mr(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(eh,t.a).then((function(t){return t?nh(t):e}))}))}))})).then((function(e){return t.c=e,th(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(nh("local"),this.a,b(this.g,this))}function th(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,nh(Zu[n]),t.a));return r.push(ic(t.b,eh,t.a)),function(t){return new be((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Ae(t[a],_(o,a),s);else e(i)}))}(r)}Zl.prototype.g=function(){var t=this,e=nh("local");sh(this,(function(){return Ce().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return th(t,"local").then((function(){t.c=e}))}))}))};var eh={name:"persistence",F:"session"};function nh(t){return{name:"authUser",F:t}}function rh(t,e){return sh(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function ih(t){return sh(t,(function(){return ic(t.b,t.c,t.a)}))}function oh(t,e,n){return sh(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),$l(t||{})}))}))}function sh(t,e){return t.f=t.f.then(e,e),t.f}function ah(t){if(this.l=!1,Qr(this,"settings",new Xc),Qr(this,"app",t),!gh(this).options||!gh(this).options.apiKey)throw new T("invalid-api-key");t=zs.SDK_VERSION?Cr(zs.SDK_VERSION):null,this.a=new Ys(gh(this).options&&gh(this).options.apiKey,N(S),t),this.P=[],this.s=[],this.N=[],this.Pa=zs.INTERNAL.createSubscribe(b(this.zc,this)),this.W=void 0,this.ib=zs.INTERNAL.createSubscribe(b(this.Ac,this)),dh(this,null),this.i=new Zl(gh(this).options.apiKey+":"+gh(this).name),this.D=new Yl(gh(this).options.apiKey+":"+gh(this).name),this.$=_h(this,function(t){var e=gh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Xl,t.a).then((function(t){return t&&e&&(t.authDomain=e),$l(t||{})}))}(t.D,gh(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Jl(t.D)}));return _h(t,e)}(t).then((function(){return oh(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return rh(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:ih(t.i)}))):null})).then((function(e){dh(t,e||null)}));return _h(t,n)}(this)),this.h=_h(this,function(t){return t.$.then((function(){return fh(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(nh("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.qa=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(t){var e=gh(t).options.authDomain,n=gh(t).options.apiKey;e&&Pr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Wc(e,n,gh(t).name,t.R),Dc(t.b,t),mh(t)&&Rl(mh(t)),t.m){Rl(t.m);var r=t.m;r.xa(t.la()),Il(r,t),El(r=t.m,t.J),Sl(r,t),wl(r=t.m,t.R),Tl(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,bn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Fn(this.R.url);t=Yr({protocol:t.c,host:t.a,port:t.g,options:Yr({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function uh(t){Qe.call(this,"languageCodeChanged"),this.h=t}function ch(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function lh(t){Qe.call(this,"frameworkChanged"),this.f=t}function hh(t){return t.Oa||ke(new T("auth-domain-config-required"))}function fh(t){if(!Pr())return ke(new T("operation-not-supported-in-this-environment"));var e=hh(t).then((function(){return t.b.ra()})).then((function(t){return t?Yr(t):null}));return _h(t,e)}function ph(t,e){var n={};return n.apiKey=gh(t).options.apiKey,n.authDomain=gh(t).options.authDomain,n.appName=gh(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new _l(t,e);return n&&(i.ha=n),r&&El(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return mh(t)&&e.uid==mh(t).uid?(jl(mh(t),e),t.da(e)):(dh(t,e),Rl(e),t.da(e))})).then((function(){bh(t)}))}function dh(t,e){mh(t)&&(function(t,e){G(t.W,(function(t){return t==e}))}(mh(t),t.Ba),ln(mh(t),"tokenChanged",t.qa),ln(mh(t),"userDeleted",t.za),ln(mh(t),"userInvalidated",t.Aa),Al(mh(t))),e&&(e.W.push(t.Ba),an(e,"tokenChanged",t.qa),an(e,"userDeleted",t.za),an(e,"userInvalidated",t.Aa),0<t.u&&kl(e)),Qr(t,"currentUser",e),e&&(e.xa(t.la()),Il(e,t),El(e,t.J),Sl(e,t),wl(e,t.R),Tl(e,t))}function vh(t,e){var n=null,r=null;return _h(t,e.then((function(e){return n=Fo(e),r=Qi(e),ph(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ol(e.w(),t,b(t.kc,t))),n||e})).then((function(){return Yr({user:mh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function gh(t){return t.app}function mh(t){return t.currentUser}function yh(t){return mh(t)&&mh(t)._lat||null}function bh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](yh(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](yh(t))}}function _h(t,e){return t.P.push(e),e.oa((function(){z(t.P,e)})),e}function wh(){}function Ih(){this.a={},this.b=1e12}Zl.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(_r()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!xu()&&"none"!==t)throw n;break;default:if(!Nr()&&"none"!==t)throw n}}(t),sh(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,th(n,t)})).then((function(){if(n.c=nh(t),e)return n.b.set(n.c,e,n.a)})):Ce()}))},w(ah,bn),w(uh,Qe),w(ch,Qe),w(lh,Qe),(t=ah.prototype).yb=function(t){return _h(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,ra(this.a,this.aa),this.dispatchEvent(new uh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&gr().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,ia(this.a,this.R),this.dispatchEvent(new ch(this.R))}},t.Gc=function(t){this.J.push(t),sa(this.a,zs.SDK_VERSION?Cr(zs.SDK_VERSION,this.J):null),this.dispatchEvent(new lh(this.J))},t.Ga=function(){return $(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:gh(this).options.apiKey,authDomain:gh(this).options.authDomain,appName:gh(this).name,currentUser:mh(this)&&mh(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return vh(i,_a(i.a,o))}))},t.Xc=function(t){if(!Pr())return ke(new T("operation-not-supported-in-this-environment"));var e=this,n=Gi(t.providerId),r=Fr(),i=null;(!Or()||yr())&&gh(this).options.authDomain&&t.isOAuthProvider&&(i=yu(gh(this).options.authDomain,gh(this).options.apiKey,gh(this).name,"signInViaPopup",t,null,r,zs.SDK_VERSION||null,null,null,this.T(),this.R));var o=pr(i,n&&n.va,n&&n.ua);return _h(this,n=hh(this).then((function(n){return Uc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new be((function(t,n){e.na("signInViaPopup",null,new T("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Vc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&fr(o),t?Yr(t):null})).o((function(t){throw o&&fr(o),t})))},t.Yc=function(t){if(!Pr())return ke(new T("operation-not-supported-in-this-environment"));var e=this;return _h(this,hh(this).then((function(){return function(t){return sh(t,(function(){return t.b.set(eh,t.c.F,t.a)}))}(e.i)})).then((function(){return qc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.ra=function(){var t=this;return fh(this).then((function(e){return t.b&&Gc(t.b.b),e})).o((function(e){throw t.b&&Gc(t.b.b),e}))},t.dd=function(t){if(!t)return ke(new T("null-user"));if(this.S!=t.tenantId)return ke(new T("tenant-id-mismatch"));var e=this,n={};n.apiKey=gh(this).options.apiKey,n.authDomain=gh(this).options.authDomain,n.appName=gh(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[Js]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new _l(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&El(e,r),jl(e,t),e}(t,n,e.D,e.Ga());return _h(this,this.h.then((function(){if(gh(e).options.apiKey!=t.l)return r.reload()})).then((function(){return mh(e)&&t.uid==mh(e).uid?(jl(mh(e),t),e.da(t)):(dh(e,r),Rl(r),e.da(r))})).then((function(){bh(e)})))},t.Bb=function(){var t=this;return _h(this,this.h.then((function(){return t.b&&Gc(t.b.b),mh(t)?(dh(t,null),ih(t.i).then((function(){bh(t)}))):Ce()})))},t.Zc=function(){var t=this;return oh(this.i,gh(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=mh(t)&&e){n=mh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return jl(mh(t),e),mh(t).I();(mh(t)||e)&&(dh(t,e),e&&(Rl(e),e.ha=t.D),t.b&&Dc(t.b,t),bh(t))}}))},t.da=function(t){return rh(this.i,t)},t.mc=function(){bh(this),this.da(mh(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return vh(e,Ce(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(mh(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),_h(t,t.h.then((function(){!t.l&&H(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(yh(t)))})))}(this,(function(){t.next(mh(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(mh(r)):"function"==typeof t.next&&t.next(mh(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(mh(r)):"function"==typeof t.next&&t.next(mh(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return _h(this,this.h.then((function(){return mh(e)?mh(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return vh(e,ru(e.a,Xa,{token:t}))})).then((function(t){var n=t.user;return Ul(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return vh(n,ru(n.a,Ja,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return vh(n,ru(n.a,Ca,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return vh(e,t.ka(e.a))}))},t.Sc=function(t){return zr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=mh(t);if(e&&e.isAnonymous){var n=Yr({providerId:null,isNewUser:!1});return Yr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return vh(t,t.a.Ab()).then((function(e){var n=e.user;return Ul(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return mh(this)&&mh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&mh(this)&&kl(mh(this))},t.Pc=function(t){var e=this;V(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&mh(this)&&Al(mh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),_h(this,this.h.then((function(){e.l||H(e.s,t)&&t(yh(e))})))},t.removeAuthTokenListener=function(t){G(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(nh("local"),t.a,this.ja),this.b&&(Lc(this.b,this),Gc(this.b.b)),Promise.resolve()},t.hc=function(t){return _h(this,function(t,e){return ru(t,ka,{identifier:e,continueUri:Rr()?ur():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Ro(t)},t.xb=function(t,e){var n=this;return _h(this,Ce().then((function(){var t=new Ai(e);if(!t.c)throw new T("argument-error",Ri+" must be true when sending sign in link to email");return Ui(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return _h(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return _h(this,this.a.Sa(t).then((function(t){return new oi(t)})))},t.kb=function(t){return _h(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return _h(this,Ce().then((function(){return void 0===e||ht(e)?{}:Ui(new Ai(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return _h(this,Zc(this,t,e,b(this.ab,this)))},t.Vc=function(t,e){var n=this;return _h(this,Ce().then((function(){var r=e||ur(),i=Po(t,r);if(!(r=Ro(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new T("tenant-id-mismatch");return n.ab(i)})))},wh.prototype.render=function(){},wh.prototype.reset=function(){},wh.prototype.getResponse=function(){},wh.prototype.execute=function(){};var Th=null;function Eh(t,e){return(e=Sh(e))&&t.a[e]||null}function Sh(t){return(t=void 0===t?1e12:t)?t.toString():null}function Ch(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ae(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():an(this.f,"click",this.i)}function kh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Ah(){}function Nh(){}Ih.prototype.render=function(t,e){return this.a[this.b.toString()]=new Ch(t,e),this.b++},Ih.prototype.reset=function(t){var e=Eh(this,t);t=Sh(t),e&&t&&(e.delete(),delete this.a[t])},Ih.prototype.getResponse=function(t){return(t=Eh(this,t))?t.getResponse():null},Ih.prototype.execute=function(t){(t=Eh(this,t))&&t.execute()},Ch.prototype.getResponse=function(){return kh(this),this.b},Ch.prototype.execute=function(){kh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},Ch.prototype.delete=function(){kh(this),this.g=!0,clearTimeout(this.a),this.a=null,ln(this.f,"click",this.i)},Qr(Ah,"FACTOR_ID","phone"),Nh.prototype.g=function(){return Th||(Th=new Ih),Ce(Th)},Nh.prototype.c=function(){};var Ph=null;function Rh(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var xh=new gt(_t,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Oh=new qr(3e4,6e4);Rh.prototype.g=function(t){var e=this;return new be((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),Oh.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete s[e.a]},Ce(Bs(Et(xh,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Rh.prototype.c=function(){this.b--};var Dh=null;function Lh(t,e,n,r,i,o,a){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(Ph||(Ph=new Nh),a=Ph):(Dh||(Dh=new Rh),a=Dh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Uh])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[jh],!s.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ae(e)||!this.i&&ae(e).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ys(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Mh];this.a[Mh]=function(t){if(qh(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Ar(c,s);"function"==typeof e&&e(t)}};var l=this.a[Fh];this.a[Fh]=function(){if(qh(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=Ar(l,s);"function"==typeof t&&t()}}}var Mh="callback",Fh="expired-callback",Uh="sitekey",jh="size";function qh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Vh(t,e){return t.h.push(e),e.oa((function(){z(t.h,e)})),e}function Bh(t){if(t.J)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Kh(t,e,n){var r=!1;try{this.b=n||zs.app()}catch(s){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=zs.SDK_VERSION?Cr(zs.SDK_VERSION,o):null,Lh.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,N(S),r)}function Wh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Hh.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=Hh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new T("argument-error",t+" failed: "+r)}(t=Lh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Vh(this,Ce().then((function(){if(Rr()&&!br())return gr();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,qa,{})})).then((function(e){t.a[Uh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Bh(this);var t=this;return Vh(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=ae(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!se&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Vt(s.name),'"'),s.type){o.push(' type="',Vt(s.type),'"');var a={};dt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=pe(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ue(o,s)),2<r.length&&fe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Bh(this);var t=this;return Vh(this,this.render().then((function(e){return new be((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){G(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Bh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Bh(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ae(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},w(Kh,Lh);var Hh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function zh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Gh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Qh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function $h(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Yh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Xh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Jh(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Zh(t){return d(t)&&"string"==typeof t.uid}function tf(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function ef(t,e){for(var n in e){var r=e[n].name;t[r]=of(r,t[n],e[n].j)}}function nf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_((function(t){return this[t]}),n),set:_((function(t,e,n,r){Wh(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function rf(t,e,n,r){t[e]=of(e,n,r)}function of(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Wh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}ef(ah.prototype,{kb:{name:"applyActionCode",j:[zh("code")]},Sa:{name:"checkActionCode",j:[zh("code")]},ob:{name:"confirmPasswordReset",j:[zh("code"),zh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[zh("email"),zh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[zh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[zh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[tf(Qh(),$h(),"nextOrObserver"),$h("opt_error",!0),$h("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[tf(Qh(),$h(),"nextOrObserver"),$h("opt_error",!0),$h("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[zh("email"),tf(Qh("opt_actionCodeSettings",!0),Yh(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[zh("email"),Qh("actionCodeSettings")]},yb:{name:"setPersistence",j:[zh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Xh()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Xh()]},Tc:{name:"signInWithCustomToken",j:[zh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[zh("email"),zh("password")]},Vc:{name:"signInWithEmailLink",j:[zh("email"),zh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[tf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof _l)}},Yh(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[zh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[zh("url"),Qh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[zh("code")]}}),nf(ah.prototype,{lc:{name:"languageCode",lb:tf(zh(),Yh(),"languageCode")},ti:{name:"tenantId",lb:tf(zh(),Yh(),"tenantId")}}),ah.Persistence=Zu,ah.Persistence.LOCAL="local",ah.Persistence.SESSION="session",ah.Persistence.NONE="none",ef(_l.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Gh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Gh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Xh()]},rb:{name:"linkWithCredential",j:[Xh()]},Dc:{name:"linkWithPhoneNumber",j:[zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Xh()]},ub:{name:"reauthenticateWithCredential",j:[Xh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[tf(Qh("opt_actionCodeSettings",!0),Yh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[zh(null,!0)]},cd:{name:"unlink",j:[zh("provider")]},Cb:{name:"updateEmail",j:[zh("email")]},Db:{name:"updatePassword",j:[zh("password")]},ed:{name:"updatePhoneNumber",j:[Xh("phone")]},Eb:{name:"updateProfile",j:[Qh("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[zh("email"),tf(Qh("opt_actionCodeSettings",!0),Yh(null,!0),"opt_actionCodeSettings",!0)]}}),ef(Ih.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(wh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(be.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),nf(Xc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Gh("appVerificationDisabledForTesting")}}),ef(Jc.prototype,{confirm:{name:"confirm",j:[zh("verificationCode")]}}),rf(ao,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[vo,Ao,Oo,ho],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[tf(zh(),Qh(),"json")]),rf(No,"credential",(function(t,e){return new ko(t,e)}),[zh("email"),zh("password")]),ef(ko.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),ef(bo.prototype,{Ca:{name:"addScope",j:[zh("scope")]},Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),rf(bo,"credential",_o,[tf(zh(),Qh(),"token")]),rf(No,"credentialWithLink",Po,[zh("email"),zh("emailLink")]),ef(wo.prototype,{Ca:{name:"addScope",j:[zh("scope")]},Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),rf(wo,"credential",Io,[tf(zh(),Qh(),"token")]),ef(To.prototype,{Ca:{name:"addScope",j:[zh("scope")]},Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),rf(To,"credential",Eo,[tf(zh(),tf(Qh(),Yh()),"idToken"),tf(zh(),Yh(),"accessToken",!0)]),ef(So.prototype,{Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),rf(So,"credential",Co,[tf(zh(),Qh(),"token"),zh("secret",!0)]),ef(yo.prototype,{Ca:{name:"addScope",j:[zh("scope")]},credential:{name:"credential",j:[tf(zh(),tf(Qh(),Yh()),"optionsOrIdToken"),tf(zh(),Yh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),ef(fo.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),ef(co.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),rf(Lo,"credential",Mo,[zh("verificationId"),zh("verificationCode")]),ef(Lo.prototype,{gb:{name:"verifyPhoneNumber",j:[tf(zh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Jh(t.session,oo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Jh(t.session,so)&&Zh(t.multiFactorHint):t.session&&t.multiFactorUid?Jh(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),ef(xo.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),ef(T.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),ef(Ho.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),ef(Wo.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),ef(il.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),ef(el.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),ef(ll.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},zh("displayName",!0)]},bd:{name:"unenroll",j:[tf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Zh},zh(),"multiFactorInfoIdentifier")]}}),ef(Kh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),rf(bi,"parseLink",ki,[zh("link")]),rf(Ah,"assertion",(function(t){return new ul(t)}),[Xh("phone")]),function(){if(void 0===zs||!zs.INTERNAL||!zs.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ai,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:si,VERIFY_AND_CHANGE_EMAIL:ui,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ah,AuthCredential:ao,Error:T};rf(t,"EmailAuthProvider",No,[]),rf(t,"FacebookAuthProvider",bo,[]),rf(t,"GithubAuthProvider",wo,[]),rf(t,"GoogleAuthProvider",To,[]),rf(t,"TwitterAuthProvider",So,[]),rf(t,"OAuthProvider",yo,[zh("providerId")]),rf(t,"SAMLAuthProvider",mo,[zh("providerId")]),rf(t,"PhoneAuthProvider",Lo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof ah)}}]),rf(t,"RecaptchaVerifier",Kh,[tf(zh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Qh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof zs.app.App)}}]),rf(t,"ActionCodeURL",bi,[]),rf(t,"PhoneMultiFactorGenerator",Ah,[]),zs.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new ah(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),zs.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),zs.registerVersion("@firebase/auth","0.16.8"),zs.INTERNAL.extendNamespace({User:_l})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Gs="";function Qs(t){Gs=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $s,Ys=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),es(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:ts(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),Xs=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return rs(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),Js=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ys(e)}}catch(aA){}return new Xs},Zs=Js("localStorage"),ta=Js("sessionStorage"),ea=new Rs("@firebase/database"),na=($s=1,function(){return $s++}),ra=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,Po(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new as;n.update(e);var r=n.digest();return Oo.encodeByteArray(r)},ia=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=ia.apply(null,i):n+="object"==typeof i?es(i):i,n+=" "}return n},oa=null,sa=!0,aa=function(t,e){Po(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(ea.logLevel=Ts.VERBOSE,oa=ea.log.bind(ea),e&&ta.set("logging_enabled",!0)):"function"==typeof t?oa=t:(oa=null,ta.remove("logging_enabled"))},ua=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===sa&&(sa=!1,null===oa&&!0===ta.get("logging_enabled")&&aa(!0)),oa){var n=ia.apply(null,t);oa(n)}},ca=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];ua.apply(void 0,ko([t],Co(e)))}},la=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+ia.apply(void 0,ko([],Co(t)));ea.error(n)},ha=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+ia.apply(void 0,ko([],Co(t)));throw ea.error(n),new Error(n)},fa=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+ia.apply(void 0,ko([],Co(t)));ea.warn(n)},pa=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},da="[MIN_NAME]",va="[MAX_NAME]",ga=function(t,e){if(t===e)return 0;if(t===da||e===va)return-1;if(e===da||t===va)return 1;var n=Ea(t),r=Ea(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},ma=function(t,e){return t===e?0:t<e?-1:1},ya=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+es(e))},ba=function(t){if("object"!=typeof t||null===t)return es(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=es(e[i]),r+=":",r+=ba(t[e[i]]);return r+="}"},_a=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Ia=function(t){Po(!pa(t),"Invalid JSON number");var e,n,r,i,o,s=1023;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),s))+s,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(o=0;o<64;o+=8){var l=parseInt(u.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Ta=new RegExp("^-?(0*)\\d{1,10}$"),Ea=function(t){if(Ta.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Sa=function(t){try{t()}catch(aA){setTimeout((function(){var e=aA.stack||"";throw fa("Exception was thrown by user callback.",e),aA}),Math.floor(0))}},Ca=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},ka=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){fa('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),Aa=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(ua("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fa(t)},t}(),Na=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),Pa=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ra=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zs.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Zs.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();function xa(t,e,n){var r;if(Po("string"==typeof e,"typeof type must == string"),Po("object"==typeof n,"typeof params must == object"),"websocket"===e)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return wa(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oa=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),rs(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Fo(this.counters_)},t}(),Da={},La={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t){var e=t.toString();return Da[e]||(Da[e]=new Oa),Da[e]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Fa=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&Sa((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),Ua=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ca(t),this.stats_=Ma(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),xa(e,"long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Fa(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new ja((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Co(t,5),i=r[0],o=r[1],s=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Co(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&Pa.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=es(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Do(e),r=_a(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},t.prototype.incrementIncomingBytes_=function(t){var e=es(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),ja=function(){function t(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=na(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(aA){ua("frame writing exception"),aA.stack&&ua(aA.stack),ua(aA)}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||ua("No IE domain setting required")}catch(aA){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){ua("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(aA){}}),Math.floor(1))},t}(),qa=null;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */"undefined"!=typeof MozWebSocket?qa=MozWebSocket:"undefined"!=typeof WebSocket&&(qa=WebSocket);var Va=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ca(this.connId),this.stats_=Ma(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={v:"5"};return"undefined"!=typeof location&&location.hostname&&Pa.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),xa(t,"websocket",i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zs.set("previous_websocket_failure",!0);try{if(zo());else{var r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new qa(this.connURL,[],r)}}catch(aA){this.log_("Error instantiating WebSocket.");var i=aA.message||aA.data;return i&&this.log_(i),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==qa&&!t.forceDisallow_},t.previouslyFailed=function(){return Zs.isInMemoryStorage||!0===Zs.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){Zs.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=ts(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Po(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=es(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=_a(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(aA){this.log_("Exception thrown from WebSocket.send():",aA.message||aA.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Ba=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Ua,Va]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=Va&&Va.isAvailable(),o=i&&!Va.previouslyFailed();if(e.webSocketOnly&&(i||fa("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Va];else{var s=this.transports_=[];try{for(var a=So(t.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var c=u.value;c&&c.isAvailable()&&s.push(c)}}catch(l){n={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Ka=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ca("c:"+this.id+":"),this.transportManager_=new Ba(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ca((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=ya("t",t),n=ya("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=ya("t",t),n=ya("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=ya("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?la("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):la("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&fa("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ca((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ca((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Wa=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Ha=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Po(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=ko([],Co(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Po(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),za=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Bo()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return wo(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Po("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Ha),Ga=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(){return new Ga("")}function $a(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ya(t){return t.pieces_.length-t.pieceNum_}function Xa(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ga(t.pieces_,e)}function Ja(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Za(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function tu(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ga(e,0)}function eu(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ga)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new Ga(n,0)}function nu(t){return t.pieceNum_>=t.pieces_.length}function ru(t,e){var n=$a(t),r=$a(e);if(null===n)return e;if(n===r)return ru(Xa(t),Xa(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function iu(t,e){for(var n=Za(t,0),r=Za(e,0),i=0;i<n.length&&i<r.length;i++){var o=ga(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function ou(t,e){if(Ya(t)!==Ya(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function su(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(Ya(t)>Ya(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var au=function(t,e){this.errorPrefix_=e,this.parts_=Za(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=vs(this.parts_[n]);uu(this)};function uu(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+cu(t))}function cu(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lu,hu,fu=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return wo(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Po("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Ha),pu=function(t){function e(n,r,i,o,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=s,l.authTokenProvider_=a,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=ca("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!zo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return fu.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&za.getInstance().on("online",l.onOnline_,l),l}return wo(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(es(i)),Po(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new jo,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Po(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Po(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&rs(t,"w")){var n=is(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();fa("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=ns(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(t=ns(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(t){var r=t.s,i=t.d||"error";e.authToken_===n&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Po(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+es(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):la("Unrecognized action received from server: "+es(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Po(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return To(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,u,c,l,h,f,p,d,v=this;return Eo(this,(function(g){switch(g.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this.lastSessionId,s=!1,a=null,u=function(){a?a.close():(s=!0,r())},c=function(t){Po(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(t)},this.realtime_={close:u,sendRequest:c},l=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)])];case 2:return h=Co.apply(void 0,[g.sent(),2]),f=h[0],p=h[1],s?ua("getToken() completed but was canceled"):(ua("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,a=new Ka(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){fa(t+" ("+v.repoInfo_.toString()+")"),v.interrupt("server_kill")}),o)),[3,4];case 3:return d=g.sent(),this.log_("Failed to get token: "+d),s||(this.repoInfo_.nodeAdmin&&fa(d),u()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){ua("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){ua("Resuming connection for reason: "+t),delete this.interruptReasons_[t],os(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return ba(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Ga(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){ua("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){ua("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=So(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,So(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Gs.replace(/\./g,"-")]=1,Bo()?t["framework.cordova"]=1:Ho()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=za.getInstance().currentlyOnline();return os(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Wa),du=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),vu=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new du(da,t),r=new du(da,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return du.MIN},t}(),gu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wo(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return lu},set:function(t){lu=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return ga(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Ro("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return du.MIN},e.prototype.maxPost=function(){return new du(va,lu)},e.prototype.makePost=function(t,e){return Po("string"==typeof t,"KeyIndex indexValue must always be a string."),new du(t,lu)},e.prototype.toString=function(){return".key"},e}(vu),mu=new gu,yu=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),bu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:wu.EMPTY_NODE,this.right=null!=o?o:wu.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return wu.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return wu.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),_u=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new bu(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),wu=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,bu.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,bu.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new yu(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new yu(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new yu(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new yu(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new _u,t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Iu(t,e){return ga(t.name,e.name)}function Tu(t,e){return ga(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eu,Su,Cu,ku=function(t){return"number"==typeof t?"number:"+Ia(t):"string:"+t},Au=function(t){if(t.isLeafNode()){var e=t.val();Po("string"==typeof e||"number"==typeof e||"object"==typeof e&&rs(e,".sv"),"Priority must be a string or number.")}else Po(t===hu||t.isEmpty(),"priority of unexpected type.");Po(t===hu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Nu=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Po(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Au(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Eu},set:function(t){Eu=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return nu(e)?this:".priority"===$a(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=$a(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Po(".priority"!==r||1===Ya(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xa(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+ku(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?Ia(this.value_):this.value_,this.lazyHash_=ra(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Po(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return Po(i>=0,"Unknown leaf type: "+n),Po(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Pu,Ru,xu=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wo(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?ga(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return du.MIN},e.prototype.maxPost=function(){return new du(va,new Nu("[PRIORITY-POST]",Cu))},e.prototype.makePost=function(t,e){var n=Su(t);return new du(e,new Nu("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(vu)),Ou=Math.log(2),Du=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Ou,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Lu=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new bu(s,o.node,bu.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new bu(s,o.node,bu.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new bu(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,bu.BLACK):(a(h,bu.BLACK),a(h,bu.RED))}return o}(new Du(t.length));return new wu(r||e,o)},Mu={},Fu=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Po(Mu&&xu,"ChildrenNode.ts has not been loaded"),Pu=Pu||new t({".priority":Mu},{".priority":xu})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=is(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof wu?e:null},t.prototype.hasIndex=function(t){return rs(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Po(e!==mu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,s=n.getIterator(du.Wrap),a=s.getNext();a;)o=o||e.isDefinedOn(a.node),i.push(a),a=s.getNext();r=o?Lu(i,e.getCompare()):Mu;var u=e.toString(),c=Io({},this.indexSet_);c[u]=e;var l=Io({},this.indexes_);return l[u]=r,new t(l,c)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(ss(this.indexes_,(function(t,i){var o=is(r.indexSet_,i);if(Po(o,"Missing index implementation for "+i),t===Mu){if(o.isDefinedOn(e.node)){for(var s=[],a=n.getIterator(du.Wrap),u=a.getNext();u;)u.name!==e.name&&s.push(u),u=a.getNext();return s.push(e),Lu(s,o.getCompare())}return Mu}var c=n.get(e.name),l=t;return c&&(l=l.remove(new du(e.name,c))),l.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(ss(this.indexes_,(function(t){if(t===Mu)return t;var r=n.get(e.name);return r?t.remove(new du(e.name,r)):t})),this.indexSet_)},t}(),Uu=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Au(this.priorityNode_),this.children_.isEmpty()&&Po(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Ru||(Ru=new t(new wu(Tu),null,Fu.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Ru},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Ru:e},t.prototype.getChild=function(t){var e=$a(t);return null===e?this:this.getImmediateChild(e).getChild(Xa(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Po(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new du(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?Ru:this.priorityNode_;return new t(i,s,o)},t.prototype.updateChild=function(t,e){var n=$a(t);if(null===n)return e;Po(".priority"!==$a(t)||1===Ya(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Xa(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(xu,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+ku(this.getPriority().val())+":"),this.forEachChild(xu,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":ra(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new du(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new du(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new du(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,du.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,du.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ju?-1:0},t.prototype.withIndex=function(e){if(e===mu||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===mu||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(xu),r=e.getIterator(xu),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===mu?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ju=new(function(t){function e(){return t.call(this,new wu(Tu),Uu.EMPTY_NODE,Fu.Default)||this}return wo(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Uu.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Uu));Object.defineProperties(du,{MIN:{value:new du(da,Uu.EMPTY_NODE)},MAX:{value:new du(va,ju)}}),gu.__EMPTY_NODE=Uu.EMPTY_NODE,Nu.__childrenNodeConstructor=Uu,hu=ju,function(t){Cu=t}(ju);function qu(t,e){if(void 0===e&&(e=null),null===t)return Uu.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Po(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Nu(t,qu(e));if(t instanceof Array){var n=Uu.EMPTY_NODE;return wa(t,(function(e,r){if(rs(t,e)&&"."!==e.substring(0,1)){var i=qu(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(qu(e))}var r=[],i=!1;if(wa(t,(function(t,e){if("."!==t.substring(0,1)){var n=qu(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new du(t,n)))}})),0===r.length)return Uu.EMPTY_NODE;var o=Lu(r,Iu,(function(t){return t.name}),Tu);if(i){var s=Lu(r,xu.getCompare());return new Uu(o,qu(e),new Fu({".priority":s},{".priority":xu}))}return new Uu(o,qu(e),Fu.Default)}!function(t){Su=t}(qu);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Vu,Bu,Ku=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Po(!nu(e)&&".priority"!==$a(e),"Can't create PathIndex with empty path or .priority key"),n}return wo(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?ga(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=qu(t),r=Uu.EMPTY_NODE.updateChild(this.indexPath_,n);return new du(e,r)},e.prototype.maxPost=function(){var t=Uu.EMPTY_NODE.updateChild(this.indexPath_,ju);return new du(va,t)},e.prototype.toString=function(){return Za(this.indexPath_,0).join("/")},e}(vu),Wu=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wo(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?ga(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return du.MIN},e.prototype.maxPost=function(){return du.MAX},e.prototype.makePost=function(t,e){var n=qu(t);return new du(e,n)},e.prototype.toString=function(){return".value"},e}(vu)),Hu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",zu=(Vu=0,Bu=[],function(t){var e,n=t===Vu;Vu=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=Hu.charAt(t%64),t=Math.floor(t/64);Po(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===Bu[e];e--)Bu[e]=0;Bu[e]++}else for(e=0;e<12;e++)Bu[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=Hu.charAt(Bu[e]);return Po(20===i.length,"nextPushId: Length should be 20."),i}),Gu=function(t){if("2147483647"===t)return"-";var e=Ea(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return va;var o=n[i],s=Hu.charAt(Hu.indexOf(o)+1);return n[i]=s,n.slice(0,i+1).join("")},Qu=function(t){if("-2147483648"===t)return da;var e=Ea(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Hu.charAt(Hu.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function $u(t){return{type:"value",snapshotNode:t}}function Yu(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Xu(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ju(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Zu=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){Po(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Xu(e,s)):Po(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Yu(e,n)):o.trackChildChange(Ju(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(xu,(function(t,r){e.hasChild(t)||n.trackChildChange(Xu(t,r))})),e.isLeafNode()||e.forEachChild(xu,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Ju(e,r,i))}else n.trackChildChange(Yu(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Uu.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),tc=function(){function t(e){this.indexedFilter_=new Zu(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new du(e,n))||(n=Uu.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Uu.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Uu.EMPTY_NODE);var i=this;return e.forEachChild(xu,(function(t,e){i.matches(new du(t,e))||(r=r.updateImmediateChild(t,Uu.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ec=function(){function t(t){this.rangedFilter_=new tc(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new du(e,n))||(n=Uu.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Uu.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Uu.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Uu.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){s=i.getNext();!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Uu.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;Po(a.numChildren()===this.limit_,"");var u=new du(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var h=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(l&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(Ju(e,n,h)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Xu(e,h));var d=a.updateImmediateChild(e,Uu.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Yu(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(Xu(c.name,c.node)),i.trackChildChange(Yu(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,Uu.EMPTY_NODE)):t},t}(),nc=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xu}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Po(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Po(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:da},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Po(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Po(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:va},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Po(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===xu},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function ic(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function oc(t,e){var n=t.copy();return n.index_=e,n}function sc(t){var e,n={};return t.isDefault()||(t.index_===xu?e="$priority":t.index_===Wu?e="$value":t.index_===mu?e="$key":(Po(t.index_ instanceof Ku,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=es(e),t.startSet_&&(n.startAt=es(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+es(t.indexStartName_))),t.endSet_&&(n.endAt=es(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+es(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function ac(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==xu&&(e.i=t.index_.toString()),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uc=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=ca("p:rest:"),o.listens_={},o}return wo(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Po(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);var a=e.getListenId_(t,r),u={};this.listens_[a]=u;var c=sc(t._queryParams);this.restRequest_(s+".json",c,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(s,n,!1,r),is(o.listens_,a)===u)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=sc(t._queryParams),r=t._path.toString(),i=new jo;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var o=Co(i,2),s=o[0],a=o[1];s&&s.accessToken&&(e.auth=s.accessToken),a&&a.token&&(e.ac=a.token);var u=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(n&&4===c.readyState){r.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var t=null;if(c.status>=200&&c.status<300){try{t=ts(c.responseText)}catch(aA){fa("Failed to parse JSON response for "+u+": "+c.responseText)}n(null,t)}else 401!==c.status&&404!==c.status&&fa("Got unsuccessful REST response for "+u+" Status: "+c.status),n(c.status);n=null}},c.open("GET",u,!0),c.send()}))},e}(Wa),cc=function(){function t(){this.rootNode_=Uu.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function lc(){return{value:null,children:new Map}}function hc(t,e,n){if(nu(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=$a(e);t.children.has(r)||t.children.set(r,lc()),hc(t.children.get(r),e=Xa(e),n)}}function fc(t,e){if(nu(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(xu,(function(e,n){hc(t,new Ga(e),n)})),fc(t,e)}if(t.children.size>0){var r=$a(e);if(e=Xa(e),t.children.has(r))fc(t.children.get(r),e)&&t.children.delete(r);return 0===t.children.size}return!0}function pc(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,(function(t,r){pc(r,new Ga(e.toString()+"/"+t),n)}))}var dc,vc,gc=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Io({},t);return this.last_&&wa(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),mc=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new gc(t);var n=1e4+2e4*Math.random();Ca(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;wa(e,(function(e,i){i>0&&rs(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),Ca(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(vc=dc||(dc={}))[vc.OVERWRITE=0]="OVERWRITE",vc[vc.MERGE=1]="MERGE",vc[vc.ACK_USER_WRITE=2]="ACK_USER_WRITE",vc[vc.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var bc,_c=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=dc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(nu(this.path)){if(null!=this.affectedTree.value)return Po(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Ga(e));return new t(Qa(),n,this.revert)}return Po($a(this.path)===e,"operationForChild called for unrelated child."),new t(Xa(this.path),this.affectedTree,this.revert)},t}(),wc=function(){function t(t,e){this.source=t,this.path=e,this.type=dc.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return nu(this.path)?new t(this.source,Qa()):new t(this.source,Xa(this.path))},t}(),Ic=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=dc.OVERWRITE}return t.prototype.operationForChild=function(e){return nu(this.path)?new t(this.source,Qa(),this.snap.getImmediateChild(e)):new t(this.source,Xa(this.path),this.snap)},t}(),Tc=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=dc.MERGE}return t.prototype.operationForChild=function(e){if(nu(this.path)){var n=this.children.subtree(new Ga(e));return n.isEmpty()?null:n.value?new Ic(this.source,Qa(),n.value):new t(this.source,Qa(),n)}return Po($a(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Xa(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ec=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(nu(t))return this.isFullyInitialized()&&!this.filtered_;var e=$a(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Sc=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(t,e,n,r,i,o){var s=r.filter((function(t){return t.type===n}));s.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Ro("Should only compare child_ events.");var r=new du(e.childName,e.snapshotNode),i=new du(n.childName,n.snapshotNode);return t.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,n)})),s.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,o);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function kc(t,e){return{eventCache:t,serverCache:e}}function Ac(t,e,n,r){return kc(new Ec(e,n,r),t.serverCache)}function Nc(t,e,n,r){return kc(t.eventCache,new Ec(e,n,r))}function Pc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Rc(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xc=function(){function t(t,e){void 0===e&&(bc||(bc=new wu(ma)),e=bc),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return wa(e,(function(t,e){n=n.set(new Ga(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Qa(),value:this.value};if(nu(t))return null;var n=$a(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Xa(t),e);return null!=i?{path:eu(new Ga(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(nu(e))return this;var n=$a(e),r=this.children.get(n);return null!==r?r.subtree(Xa(e)):new t(null)},t.prototype.set=function(e,n){if(nu(e))return new t(n,this.children);var r=$a(e),i=(this.children.get(r)||new t(null)).set(Xa(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(nu(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=$a(e),r=this.children.get(n);if(r){var i=r.remove(Xa(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(nu(t))return this.value;var e=$a(t),n=this.children.get(e);return n?n.get(Xa(t)):null},t.prototype.setTree=function(e,n){if(nu(e))return n;var r=$a(e),i=(this.children.get(r)||new t(null)).setTree(Xa(e),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(Qa(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(eu(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Qa(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(nu(t))return null;var i=$a(t),o=this.children.get(i);return o?o.findOnPath_(Xa(t),eu(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Qa(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(nu(e))return this;this.value&&r(n,this.value);var i=$a(e),o=this.children.get(i);return o?o.foreachOnPath_(Xa(e),eu(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(Qa(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(eu(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Oc=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new xc(null))},t}();function Dc(t,e,n){if(nu(e))return new Oc(new xc(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=ru(i,e);return o=o.updateChild(s,n),new Oc(t.writeTree_.set(i,o))}var a=new xc(n),u=t.writeTree_.setTree(e,a);return new Oc(u)}function Lc(t,e,n){var r=t;return wa(n,(function(t,n){r=Dc(r,eu(e,t),n)})),r}function Mc(t,e){if(nu(e))return Oc.empty();var n=t.writeTree_.setTree(e,new xc(null));return new Oc(n)}function Fc(t,e){return null!=Uc(t,e)}function Uc(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(ru(n.path,e)):null}function jc(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(xu,(function(t,n){e.push(new du(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new du(t,n.value))})),e}function qc(t,e){if(nu(e))return t;var n=Uc(t,e);return new Oc(null!=n?new xc(n):t.writeTree_.subtree(e))}function Vc(t){return t.writeTree_.isEmpty()}function Bc(t,e){return Kc(Qa(),t.writeTree_,e)}function Kc(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(Po(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Kc(eu(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(eu(t,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t,e){return rl(e,t)}function Hc(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));Po(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,o=!1,s=t.allWrites.length-1;i&&s>=0;){var a=t.allWrites[s];a.visible&&(s>=n&&zc(a,r.path)?i=!1:su(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return function(t){t.visibleWrites=Qc(t.allWrites,Gc,Qa()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0;r.snap?t.visibleWrites=Mc(t.visibleWrites,r.path):wa(r.children,(function(e){t.visibleWrites=Mc(t.visibleWrites,eu(r.path,e))}));return!0}return!1}function zc(t,e){if(t.snap)return su(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&su(eu(t.path,n),e))return!0;return!1}function Gc(t){return t.visible}function Qc(t,e,n){for(var r=Oc.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)su(n,s)?r=Dc(r,a=ru(n,s),o.snap):su(s,n)&&(a=ru(s,n),r=Dc(r,Qa(),o.snap.getChild(a)));else{if(!o.children)throw Ro("WriteRecord should have .snap or .children");if(su(n,s))r=Lc(r,a=ru(n,s),o.children);else if(su(s,n))if(nu(a=ru(s,n)))r=Lc(r,Qa(),o.children);else{var u=is(o.children,$a(a));if(u){var c=u.getChild(Xa(a));r=Dc(r,Qa(),c)}}}}}return r}function $c(t,e,n,r,i){if(r||i){var o=qc(t.visibleWrites,e);if(!i&&Vc(o))return n;if(i||null!=n||Fc(o,Qa())){return Bc(Qc(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(su(t.path,e)||su(e,t.path))}),e),n||Uu.EMPTY_NODE)}return null}var s=Uc(t.visibleWrites,e);if(null!=s)return s;var a=qc(t.visibleWrites,e);return Vc(a)?n:null!=n||Fc(a,Qa())?Bc(a,n||Uu.EMPTY_NODE):null}function Yc(t,e,n,r){return $c(t.writeTree,t.treePath,e,n,r)}function Xc(t,e){return function(t,e,n){var r=Uu.EMPTY_NODE,i=Uc(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(xu,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=qc(t.visibleWrites,e);return n.forEachChild(xu,(function(t,e){var n=Bc(qc(o,new Ga(t)),e);r=r.updateImmediateChild(t,n)})),jc(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return jc(qc(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function Jc(t,e,n,r){return function(t,e,n,r,i){Po(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=eu(e,n);if(Fc(t.visibleWrites,o))return null;var s=qc(t.visibleWrites,o);return Vc(s)?i.getChild(n):Bc(s,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function Zc(t,e){return function(t,e){return Uc(t.visibleWrites,e)}(t.writeTree,eu(t.treePath,e))}function tl(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=qc(t.visibleWrites,e),c=Uc(u,Qa());if(null!=c)a=c;else{if(null==n)return[];a=Bc(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),p=f.getNext();p&&l.length<i;)0!==h(p,r)&&l.push(p),p=f.getNext();return l}(t.writeTree,t.treePath,e,n,r,i,o)}function el(t,e,n){return function(t,e,n,r){var i=eu(e,n),o=Uc(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?Bc(qc(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function nl(t,e){return rl(eu(t.treePath,e),t.writeTree)}function rl(t,e){return{treePath:t,writeTree:e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var il=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Po("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Po(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Ju(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Xu(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Yu(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Ro("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Ju(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),ol=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),sl=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ec(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return el(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Rc(this.viewCache_),i=tl(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t,e,n,r,i){var o,s,a=new il;if(n.type===dc.OVERWRITE){var u=n;u.source.fromUser?o=ll(t,e,u.path,u.snap,r,i,a):(Po(u.source.fromServer,"Unknown source."),s=u.source.tagged||e.serverCache.isFiltered()&&!nu(u.path),o=cl(t,e,u.path,u.snap,r,i,s,a))}else if(n.type===dc.MERGE){var c=n;c.source.fromUser?o=function(t,e,n,r,i,o,s){var a=e;return r.foreach((function(r,u){var c=eu(n,r);hl(e,$a(c))&&(a=ll(t,a,c,u,i,o,s))})),r.foreach((function(r,u){var c=eu(n,r);hl(e,$a(c))||(a=ll(t,a,c,u,i,o,s))})),a}(t,e,c.path,c.children,r,i,a):(Po(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.serverCache.isFiltered(),o=pl(t,e,c.path,c.children,r,i,s,a))}else if(n.type===dc.ACK_USER_WRITE){var l=n;o=l.revert?function(t,e,n,r,i,o){var s;if(null!=Zc(r,n))return e;var a=new sl(r,e,i),u=e.eventCache.getNode(),c=void 0;if(nu(n)||".priority"===$a(n)){var l=void 0;if(e.serverCache.isFullyInitialized())l=Yc(r,Rc(e));else{var h=e.serverCache.getNode();Po(h instanceof Uu,"serverChildren would be complete if leaf node"),l=Xc(r,h)}l=l,c=t.filter.updateFullNode(u,l,o)}else{var f=$a(n),p=el(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?t.filter.updateChild(u,f,p,Xa(n),a,o):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(u,f,Uu.EMPTY_NODE,Xa(n),a,o):u).isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Yc(r,Rc(e))).isLeafNode()&&(c=t.filter.updateFullNode(c,s,o))}return s=e.serverCache.isFullyInitialized()||null!=Zc(r,Qa()),Ac(e,c,s,t.filter.filtersNodes())}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,l.path,r,i,a):function(t,e,n,r,i,o,s){if(null!=Zc(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(nu(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return cl(t,e,n,u.getNode().getChild(n),i,o,a,s);if(nu(n)){var c=new xc(null);return u.getNode().forEachChild(mu,(function(t,e){c=c.set(new Ga(t),e)})),pl(t,e,n,c,i,o,a,s)}return e}var l=new xc(null);return r.foreach((function(t,e){var r=eu(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),pl(t,e,n,l,i,o,a,s)}(t,e,l.path,l.affectedTree,r,i,a)}else{if(n.type!==dc.LISTEN_COMPLETE)throw Ro("Unknown operation type: "+n.type);o=function(t,e,n,r,i){var o=e.serverCache,s=Nc(e,o.getNode(),o.isFullyInitialized()||nu(n),o.isFiltered());return ul(t,s,n,r,ol,i)}(t,e,n.path,r,a)}var h=a.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Pc(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push($u(Pc(e)))}}(e,o,h),{viewCache:o,changes:h}}function ul(t,e,n,r,i,o){var s=e.eventCache;if(null!=Zc(r,n))return e;var a=void 0,u=void 0;if(nu(n))if(Po(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var c=Rc(e),l=Xc(r,c instanceof Uu?c:Uu.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{var h=Yc(r,Rc(e));a=t.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{var f=$a(n);if(".priority"===f){Po(1===Ya(n),"Can't have a priority with additional path components");var p=s.getNode(),d=Jc(r,n,p,u=e.serverCache.getNode());a=null!=d?t.filter.updatePriority(p,d):s.getNode()}else{var v=Xa(n),g=void 0;if(s.isCompleteForChild(f)){u=e.serverCache.getNode();var m=Jc(r,n,s.getNode(),u);g=null!=m?s.getNode().getImmediateChild(f).updateChild(v,m):s.getNode().getImmediateChild(f)}else g=el(r,f,e.serverCache);a=null!=g?t.filter.updateChild(s.getNode(),f,g,v,i,o):s.getNode()}}return Ac(e,a,s.isFullyInitialized()||nu(n),t.filter.filtersNodes())}function cl(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(nu(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=$a(n);if(!c.isCompleteForPath(n)&&Ya(n)>1)return e;var p=Xa(n),d=c.getNode().getImmediateChild(f).updateChild(p,r);u=".priority"===f?l.updatePriority(c.getNode(),d):l.updateChild(c.getNode(),f,d,p,ol,null)}var v=Nc(e,u,c.isFullyInitialized()||nu(n),l.filtersNodes());return ul(t,v,n,i,new sl(i,v,o),a)}function ll(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new sl(i,e,o);if(nu(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Ac(e,u,!0,t.filter.filtersNodes());else{var h=$a(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Ac(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=Xa(n),p=c.getNode().getImmediateChild(h),d=void 0;if(nu(f))d=r;else{var v=l.getCompleteChild(h);d=null!=v?".priority"===Ja(f)&&v.getChild(tu(f)).isEmpty()?v:v.updateChild(f,r):Uu.EMPTY_NODE}if(p.equals(d))a=e;else a=Ac(e,t.filter.updateChild(c.getNode(),h,d,f,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function hl(t,e){return t.eventCache.isCompleteForChild(e)}function fl(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function pl(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=nu(n)?r:new xc(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=fl(0,e.serverCache.getNode().getImmediateChild(n),r);c=cl(t,c,new Ga(n),u,i,o,s,a)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=fl(0,e.serverCache.getNode().getImmediateChild(n),r);c=cl(t,c,new Ga(n),h,i,o,s,a)}})),c}var dl,vl=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new Zu(r.getIndex()),o=(n=r).loadsAllData()?new Zu(n.getIndex()):n.hasLimit()?new ec(n):new tc(n);this.processor_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(Uu.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(Uu.EMPTY_NODE,a.getNode(),null),l=new Ec(u,s.isFullyInitialized(),i.filtersNodes()),h=new Ec(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=kc(h,l),this.eventGenerator_=new Sc(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function gl(t,e){var n=Rc(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!nu(e)&&!n.getImmediateChild($a(e)).isEmpty())?n.getChild(e):null}function ml(t){return 0===t.eventRegistrations_.length}function yl(t,e,n){var r=[];if(n){Po(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var o=[],s=0;s<t.eventRegistrations_.length;++s){var a=t.eventRegistrations_[s];if(a.matches(e)){if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(s+1));break}}else o.push(a)}t.eventRegistrations_=o}else t.eventRegistrations_=[];return r}function bl(t,e,n,r){e.type===dc.MERGE&&null!==e.source.queryId&&(Po(Rc(t.viewCache_),"We should always have a full cache before handling merges"),Po(Pc(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,s=t.viewCache_,a=al(t.processor_,s,e,n,r);return i=t.processor_,o=a.viewCache,Po(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Po(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Po(a.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,_l(t,a.changes,a.viewCache.eventCache.getNode(),null)}function _l(t,e,n,r){var i=r?[r]:t.eventRegistrations_;return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),Cc(t,i,"child_removed",e,r,n),Cc(t,i,"child_added",e,r,n),Cc(t,i,"child_moved",o,r,n),Cc(t,i,"child_changed",e,r,n),Cc(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wl,Il=function(){this.views=new Map};function Tl(t,e,n,r){var i,o,s=e.source.queryId;if(null!==s){var a=t.views.get(s);return Po(null!=a,"SyncTree gave us an op for an invalid query."),bl(a,e,n,r)}var u=[];try{for(var c=So(t.views.values()),l=c.next();!l.done;l=c.next()){a=l.value;u=u.concat(bl(a,e,n,r))}}catch(h){i={error:h}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function El(t,e,n,r,i){var o=e._queryIdentifier,s=t.views.get(o);if(!s){var a=Yc(n,i?r:null),u=!1;a?u=!0:r instanceof Uu?(a=Xc(n,r),u=!1):(a=Uu.EMPTY_NODE,u=!1);var c=kc(new Ec(a,u,!1),new Ec(r,i,!1));return new vl(e,c)}return s}function Sl(t,e,n,r,i,o){var s=El(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(xu,(function(t,e){r.push(Yu(t,e))})),n.isFullyInitialized()&&r.push($u(n.getNode())),_l(t,r,n.getNode(),e)}(s,n)}function Cl(t,e,n,r){var i,o,s=e._queryIdentifier,a=[],u=[],c=Rl(t);if("default"===s)try{for(var l=So(t.views.entries()),h=l.next();!h.done;h=l.next()){var f=Co(h.value,2),p=f[0],d=f[1];u=u.concat(yl(d,n,r)),ml(d)&&(t.views.delete(p),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){i={error:v}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else(d=t.views.get(s))&&(u=u.concat(yl(d,n,r)),ml(d)&&(t.views.delete(s),d.query._queryParams.loadsAllData()||a.push(d.query)));return c&&!Rl(t)&&a.push(new(Po(dl,"Reference.ts has not been loaded"),dl)(e._repo,e._path)),{removed:a,events:u}}function kl(t){var e,n,r=[];try{for(var i=So(t.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Al(t,e){var n,r,i=null;try{for(var o=So(t.views.values()),s=o.next();!s.done;s=o.next()){var a=s.value;i=i||gl(a,e)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Nl(t,e){if(e._queryParams.loadsAllData())return xl(t);var n=e._queryIdentifier;return t.views.get(n)}function Pl(t,e){return null!=Nl(t,e)}function Rl(t){return null!=xl(t)}function xl(t){var e,n;try{for(var r=So(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ol=1,Dl=function(t){this.listenProvider_=t,this.syncPointTree_=new xc(null),this.pendingWriteTree_={visibleWrites:Oc.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Ll(t,e,n,r,i){return function(t,e,n,r,i){Po(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Dc(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?Kl(t,new Ic({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Ml(t,e,n,r){!function(t,e,n,r){Po(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Lc(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=xc.fromObject(n);return Kl(t,new Tc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}function Fl(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(Hc(t.pendingWriteTree_,e)){var i=new xc(null);return null!=r.snap?i=i.set(Qa(),!0):wa(r.children,(function(t){i=i.set(new Ga(t),!0)})),Kl(t,new _c(r.path,i,n))}return[]}function Ul(t,e,n){return Kl(t,new Ic({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function jl(t,e,n,r){var i=e._path,o=t.syncPointTree_.get(i),s=[];if(o&&("default"===e._queryIdentifier||Pl(o,e))){var a=Cl(o,e,n,r);0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var u=a.removed;s=a.events;var c=-1!==u.findIndex((function(t){return t._queryParams.loadsAllData()})),l=t.syncPointTree_.findOnPath(i,(function(t,e){return Rl(e)}));if(c&&!l){var h=t.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(t){return t.fold((function(t,e,n){if(e&&Rl(e))return[xl(e)];var r=[];return e&&(r=kl(e)),wa(n,(function(t,e){r=r.concat(e)})),r}))}(h),p=0;p<f.length;++p){var d=f[p],v=d.query,g=zl(t,d);t.listenProvider_.startListening(Jl(v),Gl(t,v),g.hashFn,g.onComplete)}}if(!l&&u.length>0&&!r)if(c){t.listenProvider_.stopListening(Jl(e),null)}else u.forEach((function(e){var n=t.queryToTagMap.get(Ql(e));t.listenProvider_.stopListening(Jl(e),n)}));!function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=Ql(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,u)}return s}function ql(t,e,n){var r=e._path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=ru(t,r);i=i||Al(e,n),o=o||Rl(e)}));var s,a=t.syncPointTree_.get(r);(a?(o=o||Rl(a),i=i||Al(a,Qa())):(a=new Il,t.syncPointTree_=t.syncPointTree_.set(r,a)),null!=i)?s=!0:(s=!1,i=Uu.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=Al(e,Qa());n&&(i=i.updateImmediateChild(t,n))})));var u=Pl(a,e);if(!u&&!e._queryParams.loadsAllData()){var c=Ql(e);Po(!t.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=Ol++;t.queryToTagMap.set(c,l),t.tagToQueryMap.set(l,c)}var h=Sl(a,e,n,Wc(t.pendingWriteTree_,r),i,s);if(!u&&!o){var f=Nl(a,e);h=h.concat(function(t,e,n){var r=e._path,i=Gl(t,e),o=zl(t,n),s=t.listenProvider_.startListening(Jl(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)Po(!Rl(a.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=a.fold((function(t,e,n){if(!nu(t)&&e&&Rl(e))return[xl(e).query];var r=[];return e&&(r=r.concat(kl(e).map((function(t){return t.query})))),wa(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var l=u[c];t.listenProvider_.stopListening(Jl(l),Gl(t,l))}return s}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,f))}return h}function Vl(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=Al(n,ru(t,e));if(r)return r}));return $c(r,e,i,n,!0)}function Bl(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=ru(t,n);r=r||Al(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||Al(i,Qa()):(i=new Il,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Ec(r,!0,!1):null;return function(t){return Pc(t.viewCache_)}(El(i,e,Wc(t.pendingWriteTree_,e._path),o?s.getNode():Uu.EMPTY_NODE,o))}function Kl(t,e){return Wl(e,t.syncPointTree_,null,Wc(t.pendingWriteTree_,Qa()))}function Wl(t,e,n,r){if(nu(t.path))return Hl(t,e,n,r);var i=e.get(Qa());null==n&&null!=i&&(n=Al(i,Qa()));var o=[],s=$a(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=nl(r,s);o=o.concat(Wl(a,u,c,l))}return i&&(o=o.concat(Tl(i,t,r,n))),o}function Hl(t,e,n,r){var i=e.get(Qa());null==n&&null!=i&&(n=Al(i,Qa()));var o=[];return e.children.inorderTraversal((function(e,i){var s=n?n.getImmediateChild(e):null,a=nl(r,e),u=t.operationForChild(e);u&&(o=o.concat(Hl(u,i,s,a)))})),i&&(o=o.concat(Tl(i,t,r,n))),o}function zl(t,e){var n=e.query,r=Gl(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||Uu.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=$l(t,n);if(r){var i=Yl(r),o=i.path,s=i.queryId,a=ru(o,e);return Xl(t,o,new wc(yc(s),a))}return[]}(t,n._path,r):function(t,e){return Kl(t,new wc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return jl(t,n,null,i)}}}function Gl(t,e){var n=Ql(e);return t.queryToTagMap.get(n)}function Ql(t){return t._path.toString()+"$"+t._queryIdentifier}function $l(t,e){return t.tagToQueryMap.get(e)}function Yl(t){var e=t.indexOf("$");return Po(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ga(t.substr(0,e))}}function Xl(t,e,n){var r=t.syncPointTree_.get(e);return Po(r,"Missing sync point for query tag that we're tracking"),Tl(r,n,Wc(t.pendingWriteTree_,e),null)}function Jl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Po(wl,"Reference.ts has not been loaded"),wl)(t._repo,t._path):t}var Zl=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),th=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=eu(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Vl(this.syncTree_,this.path_)},t}(),eh=function(t,e,n){return t&&"object"==typeof t?(Po(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?nh(t[".sv"],e,n):"object"==typeof t[".sv"]?rh(t[".sv"],e):void Po(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},nh=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Po(!1,"Unexpected server value: "+t)}},rh=function(t,e,n){t.hasOwnProperty("increment")||Po(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Po(!1,"Unexpected increment value: "+r);var i=e.node();if(Po(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},ih=function(t,e,n,r){return sh(e,new th(n,t),r)},oh=function(t,e,n){return sh(t,new Zl(e),n)};function sh(t,e,n){var r,i=t.getPriority().val(),o=eh(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=eh(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Nu(a,qu(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Nu(o))),u.forEachChild(xu,(function(t,i){var o=sh(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ah=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function uh(t,e){for(var n=e instanceof Ga?e:new Ga(e),r=t,i=$a(n);null!==i;){var o=is(r.node.children,i)||{children:{},childCount:0};r=new ah(i,r,o),i=$a(n=Xa(n))}return r}function ch(t){return t.node.value}function lh(t,e){t.node.value=e,vh(t)}function hh(t){return t.node.childCount>0}function fh(t,e){wa(t.node.children,(function(n,r){e(new ah(n,t,r))}))}function ph(t,e,n,r){n&&!r&&e(t),fh(t,(function(t){ph(t,e,!0,r)})),n&&r&&e(t)}function dh(t){return new Ga(null===t.parent?t.name:dh(t.parent)+"/"+t.name)}function vh(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===ch(t)&&!hh(t)}(n),i=rs(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,vh(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,vh(t))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.parent,t.name,t)}var gh=/[\[\].#$\/\u0000-\u001F\u007F]/,mh=/[\[\].#$\u0000-\u001F\u007F]/,yh=function(t){return"string"==typeof t&&0!==t.length&&!gh.test(t)},bh=function(t){return"string"==typeof t&&0!==t.length&&!mh.test(t)},_h=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!pa(t)||t&&"object"==typeof t&&rs(t,".sv")},wh=function(t,e,n,r){r&&void 0===e||Ih(fs(t,"value"),e,n)},Ih=function(t,e,n){var r=n instanceof Ga?new au(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+cu(r));if("function"==typeof e)throw new Error(t+"contains a function "+cu(r)+" with contents = "+e.toString());if(pa(e))throw new Error(t+"contains "+e.toString()+" "+cu(r));if("string"==typeof e&&e.length>10485760/3&&vs(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+cu(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(wa(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!yh(e)))throw new Error(t+" contains an invalid key ("+e+") "+cu(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,a;a=e,(s=r).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(a),s.byteLength_+=vs(a),uu(s),Ih(t,n,r),function(t){var e=t.parts_.pop();t.byteLength_-=vs(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)})),i&&o)throw new Error(t+' contains ".value" child '+cu(r)+" in addition to actual children.")}},Th=function(t,e,n,r){if(!r||void 0!==e){var i=fs(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var o=[];wa(e,(function(t,e){var r=new Ga(t);if(Ih(i,e,eu(n,r)),".priority"===Ja(r)&&!_h(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=Za(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!yh(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(iu);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&su(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,o)}},Eh=function(t,e,n){if(!n||void 0!==e){if(pa(e))throw new Error(fs(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!_h(e))throw new Error(fs(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Sh=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(fs(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ch=function(t,e,n,r){if(!(r&&void 0===n||yh(n)))throw new Error(fs(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},kh=function(t,e,n,r){if(!(r&&void 0===n||bh(n)))throw new Error(fs(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ah=function(t,e){if(".info"===$a(e))throw new Error(t+" failed = Can't modify data under /.info/")},Nh=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!yh(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),bh(t)}(n))throw new Error(fs(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ph=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(fs(t,e)+"must be a boolean.")},Rh=function(){this.eventLists_=[],this.recursionDepth_=0};function xh(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||ou(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Oh(t,e,n){xh(t,n),Lh(t,(function(t){return ou(t,e)}))}function Dh(t,e,n){xh(t,n),Lh(t,(function(t){return su(t,e)||su(e,t)}))}function Lh(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];if(i)e(i.path)?(Mh(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}n&&(t.eventLists_=[]),t.recursionDepth_--}function Mh(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();oa&&ua("event: "+n.toString()),Sa(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fh=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Rh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lc(),this.transactionQueueTree_=new ah,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Uh(t,e,n){if(t.stats_=Ma(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new uc(t.repoInfo_,(function(e,n,r,i){Vh(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return Bh(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{es(n)}catch(aA){throw new Error("Invalid authOverride provided: "+aA)}}t.persistentConnection_=new pu(t.repoInfo_,e,(function(e,n,r,i){Vh(t,e,n,r,i)}),(function(e){Bh(t,e)}),(function(e){!function(t,e){wa(e,(function(e,n){Kh(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i,o;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=(r=t.repoInfo_,i=function(){return new mc(t.stats_,t.server_)},o=r.toString(),La[o]||(La[o]=i()),La[o]),t.infoData_=new cc,t.infoSyncTree_=new Dl({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Ul(t.infoSyncTree_,e._path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Kh(t,"connected",!1),t.serverSyncTree_=new Dl({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);Dh(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}function jh(t){var e=t.infoData_.getNode(new Ga(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function qh(t){return(e=(e={timestamp:jh(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Vh(t,e,n,r,i){t.dataUpdateCount++;var o=new Ga(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var s=[];if(i)if(r){var a=ss(n,(function(t){return qu(t)}));s=function(t,e,n,r){var i=$l(t,r);if(i){var o=Yl(i),s=o.path,a=o.queryId,u=ru(s,e),c=xc.fromObject(n);return Xl(t,s,new Tc(yc(a),u,c))}return[]}(t.serverSyncTree_,o,a,i)}else{var u=qu(n);s=function(t,e,n,r){var i=$l(t,r);if(null!=i){var o=Yl(i),s=o.path,a=o.queryId,u=ru(s,e);return Xl(t,s,new Ic(yc(a),u,n))}return[]}(t.serverSyncTree_,o,u,i)}else if(r){var c=ss(n,(function(t){return qu(t)}));s=function(t,e,n){var r=xc.fromObject(n);return Kl(t,new Tc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,o,c)}else{var l=qu(n);s=Ul(t.serverSyncTree_,o,l)}var h=o;s.length>0&&(h=tf(t,o)),Dh(t.eventQueue_,h,s)}function Bh(t,e){Kh(t,"connected",e),!1===e&&function(t){Yh(t,"onDisconnectEvents");var e=qh(t),n=lc();pc(t.onDisconnect_,Qa(),(function(r,i){var o=ih(r,i,t.serverSyncTree_,e);hc(n,r,o)}));var r=[];pc(n,Qa(),(function(e,n){r=r.concat(Ul(t.serverSyncTree_,e,n));var i=sf(t,e);tf(t,i)})),t.onDisconnect_=lc(),Dh(t.eventQueue_,Qa(),r)}(t)}function Kh(t,e,n){var r=new Ga("/.info/"+e),i=qu(n);t.infoData_.updateSnapshot(r,i);var o=Ul(t.infoSyncTree_,r,i);Dh(t.eventQueue_,r,o)}function Wh(t){return t.nextWriteId_++}function Hh(t,e,n,r,i){Yh(t,"set",{path:e.toString(),value:n,priority:r});var o=qh(t),s=qu(n,r),a=Vl(t.serverSyncTree_,e),u=oh(s,a,o),c=Wh(t),l=Ll(t.serverSyncTree_,e,u,c,!0);xh(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),(function(n,r){var o="ok"===n;o||fa("set at "+e+" failed: "+n);var s=Fl(t.serverSyncTree_,c,!o);Dh(t.eventQueue_,e,s),Xh(t,i,n,r)}));var h=sf(t,e);tf(t,h),Dh(t.eventQueue_,h,[])}function zh(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&fc(t.onDisconnect_,e),Xh(t,n,r,i)}))}function Gh(t,e,n,r){var i=qu(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&hc(t.onDisconnect_,e,i),Xh(t,r,n,o)}))}function Qh(t,e,n){var r;r=".info"===$a(e._path)?jl(t.infoSyncTree_,e,n):jl(t.serverSyncTree_,e,n),Oh(t.eventQueue_,e._path,r)}function $h(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}function Yh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),ua.apply(void 0,ko([r],Co(e)))}function Xh(t,e,n,r){e&&Sa((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function Jh(t,e,n){return Vl(t.serverSyncTree_,e,n)||Uu.EMPTY_NODE}function Zh(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||of(t,e),ch(e)){var n=nf(t,e);Po(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=Jh(t,e,r),o=i,s=i.hash(),a=0;a<n.length;a++){var u=n[a];Po(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=ru(e,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=e;t.server_.put(h.toString(),l,(function(r){Yh(t,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Fl(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},a=0;a<n.length;a++)s(a);of(t,uh(t.transactionQueueTree_,e)),Zh(t,t.transactionQueueTree_),Dh(t.eventQueue_,e,i);for(a=0;a<o.length;a++)Sa(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)3===n[a].status?n[a].status=4:n[a].status=0;else{fa("transaction at "+h.toString()+" failed: "+r);for(a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r}tf(t,e)}}),s)}(t,dh(e),n)}else hh(e)&&fh(e,(function(e){Zh(t,e)}))}function tf(t,e){var n=ef(t,e),r=dh(n);return function(t,e,n){if(0===e.length)return;for(var r=[],i=[],o=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),s=function(s){var a,u,c=e[s],l=ru(n,c.path),h=!1;if(Po(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,a=c.abortReason,i=i.concat(Fl(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,a="maxretry",i=i.concat(Fl(t.serverSyncTree_,c.currentWriteId,!0));else{var f=Jh(t,c.path,o);c.currentInputSnapshot=f;var p=e[s].update(f.val());if(void 0!==p){Ih("transaction failed: Data returned ",p,c.path);var d=qu(p);"object"==typeof p&&null!=p&&rs(p,".priority")||(d=d.updatePriority(f.getPriority()));var v=c.currentWriteId,g=qh(t),m=oh(d,f,g);c.currentOutputSnapshotRaw=d,c.currentOutputSnapshotResolved=m,c.currentWriteId=Wh(t),o.splice(o.indexOf(v),1),i=(i=i.concat(Ll(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat(Fl(t.serverSyncTree_,v,!0))}else h=!0,a="nodata",i=i.concat(Fl(t.serverSyncTree_,c.currentWriteId,!0))}Dh(t.eventQueue_,n,i),i=[],h&&(e[s].status=2,u=e[s].unwatcher,setTimeout(u,Math.floor(0)),e[s].onComplete&&("nodata"===a?r.push((function(){return e[s].onComplete(null,!1,e[s].currentInputSnapshot)})):r.push((function(){return e[s].onComplete(new Error(a),!1,null)}))))},a=0;a<e.length;a++)s(a);of(t,t.transactionQueueTree_);for(a=0;a<r.length;a++)Sa(r[a]);Zh(t,t.transactionQueueTree_)}(t,nf(t,n),r),r}function ef(t,e){var n,r=t.transactionQueueTree_;for(n=$a(e);null!==n&&void 0===ch(r);)r=uh(r,n),n=$a(e=Xa(e));return r}function nf(t,e){var n=[];return rf(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function rf(t,e,n){var r=ch(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);fh(e,(function(e){rf(t,e,n)}))}function of(t,e){var n=ch(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,lh(e,n.length>0?n:void 0)}fh(e,(function(e){of(t,e)}))}function sf(t,e){var n=dh(ef(t,e)),r=uh(t.transactionQueueTree_,e);return function(t,e,n){for(var r=n?t:t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){af(t,e)})),af(t,r),ph(r,(function(e){af(t,e)})),n}function af(t,e){var n=ch(e);if(n){for(var r=[],i=[],o=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(Po(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(Po(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Fl(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?lh(e,void 0):n.length=o+1,Dh(t.eventQueue_,dh(e),i);for(s=0;s<r.length;s++)Sa(r[s])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uf=function(t,e){var n=cf(t),r=n.namespace;"firebase.com"===n.domain&&ha(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||ha("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&fa("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Ra(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new Ga(n.pathString)}},cf=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));var l=t.indexOf("/");-1===l&&(l=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(l,h)),l<h&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(aA){}e+="/"+i}return e}(t.substring(l,h)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=So(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):fa("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,h)));(c=e.indexOf(":"))>=0?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},lf=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+es(this.snapshot.exportVal())},t}(),hf=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),ff=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Po(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),pf=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new jo;return zh(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},t.prototype.remove=function(){Ah("OnDisconnect.remove",this._path);var t=new jo;return Gh(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){Ah("OnDisconnect.set",this._path),wh("OnDisconnect.set",t,this._path,!1);var e=new jo;return Gh(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){Ah("OnDisconnect.setWithPriority",this._path),wh("OnDisconnect.setWithPriority",t,this._path,!1),Eh("OnDisconnect.setWithPriority",e,!1);var n=new jo;return function(t,e,n,r,i){var o=qu(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&hc(t.onDisconnect_,e,o),Xh(0,i,n,r)}))}(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){Ah("OnDisconnect.update",this._path),Th("OnDisconnect.update",t,this._path,!1);var e=new jo;return function(t,e,n,r){if(os(n))return ua("onDisconnect().update() called with empty data.  Don't do anything."),void Xh(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&wa(n,(function(n,r){var i=qu(r);hc(t.onDisconnect_,eu(e,n),i)})),Xh(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),df=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return nu(this._path)?null:Ja(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new yf(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=ac(this._queryParams),e=ba(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return ac(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=ms(e))instanceof t))return!1;var n=this._repo===e._repo,r=ou(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function vf(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function gf(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===mu){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==da)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==va)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===xu){if(null!=e&&!_h(e)||null!=n&&!_h(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Po(t.getIndex()instanceof Ku||t.getIndex()===Wu,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function mf(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var yf=function(t){function e(e,n){return t.call(this,e,n,new nc,!1)||this}return wo(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=tu(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(df),bf=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new Ga(e),r=If(this.ref,e);return new t(this._node.getChild(n),r,xu)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return e(new t(i,If(n.ref,r),xu))}))},t.prototype.hasChild=function(t){var e=new Ga(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function _f(t,e){return(t=ms(t))._checkNotDeleted("ref"),void 0!==e?If(t._root,e):t._root}function wf(t,e){(t=ms(t))._checkNotDeleted("refFromURL");var n=uf(e,t._repo.repoInfo_.nodeAdmin);Nh("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||ha("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),_f(t,n.path.toString())}function If(t,e){var n,r,i,o;return null===$a((t=ms(t))._path)?(n="child",r="path",o=!1,(i=e)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),kh(n,r,i,o)):kh("child","path",e,!1),new yf(t._repo,eu(t._path,e))}function Tf(t,e){t=ms(t),Ah("push",t._path),wh("push",e,t._path,!0);var n,r=jh(t._repo),i=zu(r),o=If(t,i),s=If(t,i);return n=null!=e?Sf(s,e).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),o}function Ef(t){return Ah("remove",t._path),Sf(t,null)}function Sf(t,e){t=ms(t),Ah("set",t._path),wh("set",e,t._path,!1);var n=new jo;return Hh(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function Cf(t,e){t=ms(t),Ah("setPriority",t._path),Eh("setPriority",e,!1);var n=new jo;return Hh(t._repo,eu(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function kf(t,e,n){if(Ah("setWithPriority",t._path),wh("setWithPriority",e,t._path,!1),Eh("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new jo;return Hh(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function Af(t,e){Th("update",e,t._path,!1);var n=new jo;return function(t,e,n,r){Yh(t,"update",{path:e.toString(),value:n});var i=!0,o=qh(t),s={};if(wa(n,(function(n,r){i=!1,s[n]=ih(eu(e,n),qu(r),t.serverSyncTree_,o)})),i)ua("update() called with empty data.  Don't do anything."),Xh(0,r,"ok",void 0);else{var a=Wh(t),u=Ml(t.serverSyncTree_,e,s,a);xh(t.eventQueue_,u),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||fa("update at "+e+" failed: "+n);var s=Fl(t.serverSyncTree_,a,!o),u=s.length>0?tf(t,e):e;Dh(t.eventQueue_,u,s),Xh(0,r,n,i)})),wa(n,(function(n){var r=sf(t,eu(e,n));tf(t,r)})),Dh(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function Nf(t){return function(t,e){var n=Bl(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=qu(n).withIndex(e._queryParams.getIndex()),i=Ul(t.serverSyncTree_,e._path,r);return Oh(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return Yh(t,"get for query "+es(e)+" failed: "+n),Promise.reject(new Error(n))}))}((t=ms(t))._repo,t).then((function(e){return new bf(e,new yf(t._repo,t._path),t._queryParams.getIndex())}))}var Pf=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new lf("value",this,new bf(t.snapshotNode,new yf(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new hf(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Rf=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new hf(this,t,e):null},t.prototype.createEvent=function(t,e){Po(null!=t.childName,"Child events should have a childName.");var n=If(new yf(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new lf(t.type,this,new bf(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function xf(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){Qh(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new ff(n,o||void 0),c="value"===e?new Pf(u):new Rf(e,u);return function(t,e,n){var r;r=".info"===$a(e._path)?ql(t.infoSyncTree_,e,n):ql(t.serverSyncTree_,e,n),Oh(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return Qh(t._repo,t,c)}}function Of(t,e,n,r){return xf(t,"value",e,n,r)}function Df(t,e,n,r){return xf(t,"child_added",e,n,r)}function Lf(t,e,n,r){return xf(t,"child_changed",e,n,r)}function Mf(t,e,n,r){return xf(t,"child_moved",e,n,r)}function Ff(t,e,n,r){return xf(t,"child_removed",e,n,r)}function Uf(t,e,n){var r=null,i=n?new ff(n):null;"value"===e?r=new Pf(i):e&&(r=new Rf(e,i)),Qh(t._repo,t,r)}var jf=function(){},qf=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return wo(e,t),e.prototype._apply=function(t){wh("endAt",this._value,t._path,!0);var e=ic(t._queryParams,this._value,this._key);if(mf(e),gf(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new df(t._repo,t._path,e,t._orderByCalled)},e}(jf);function Vf(t,e){return Ch("endAt","key",e,!0),new qf(t,e)}var Bf=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return wo(e,t),e.prototype._apply=function(t){wh("endBefore",this._value,t._path,!1);var e,n,r,i,o=(e=t._queryParams,n=this._value,r=this._key,e.index_===mu?("string"==typeof n&&(n=Qu(n)),i=ic(e,n,r)):i=ic(e,n,null==r?da:Qu(r)),i.endBeforeSet_=!0,i);if(mf(o),gf(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new df(t._repo,t._path,o,t._orderByCalled)},e}(jf);function Kf(t,e){return Ch("endBefore","key",e,!0),new Bf(t,e)}var Wf=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return wo(e,t),e.prototype._apply=function(t){wh("startAt",this._value,t._path,!0);var e=rc(t._queryParams,this._value,this._key);if(mf(e),gf(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new df(t._repo,t._path,e,t._orderByCalled)},e}(jf);function Hf(t,e){return void 0===t&&(t=null),Ch("startAt","key",e,!0),new Wf(t,e)}var zf=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return wo(e,t),e.prototype._apply=function(t){wh("startAfter",this._value,t._path,!1);var e=function(t,e,n){var r;t.index_===mu?("string"==typeof e&&(e=Gu(e)),r=rc(t,e,n)):r=rc(t,e,null==n?va:Gu(n));return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(mf(e),gf(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new df(t._repo,t._path,e,t._orderByCalled)},e}(jf);function Gf(t,e){return Ch("startAfter","key",e,!0),new zf(t,e)}var Qf=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return wo(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new df(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="l",r),t._orderByCalled);var e,n,r},e}(jf);function $f(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Qf(t)}var Yf=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return wo(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new df(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="r",r),t._orderByCalled);var e,n,r},e}(jf);function Xf(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Yf(t)}var Jf=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return wo(e,t),e.prototype._apply=function(t){vf(t,"orderByChild");var e=new Ga(this._path);if(nu(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new Ku(e),r=oc(t._queryParams,n);return gf(r),new df(t._repo,t._path,r,!0)},e}(jf);function Zf(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return kh("orderByChild","path",t,!1),new Jf(t)}var tp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wo(e,t),e.prototype._apply=function(t){vf(t,"orderByKey");var e=oc(t._queryParams,mu);return gf(e),new df(t._repo,t._path,e,!0)},e}(jf);function ep(){return new tp}var np=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wo(e,t),e.prototype._apply=function(t){vf(t,"orderByPriority");var e=oc(t._queryParams,xu);return gf(e),new df(t._repo,t._path,e,!0)},e}(jf);function rp(){return new np}var ip=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wo(e,t),e.prototype._apply=function(t){vf(t,"orderByValue");var e=oc(t._queryParams,Wu);return gf(e),new df(t._repo,t._path,e,!0)},e}(jf);function op(){return new ip}var sp=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return wo(e,t),e.prototype._apply=function(t){if(wh("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new qf(this._value,this._key)._apply(new Wf(this._value,this._key)._apply(t))},e}(jf);function ap(t,e){return Ch("equalTo","key",e,!0),new sp(t,e)}function up(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=ms(t);try{for(var s=So(r),a=s.next();!a.done;a=s.next()){var u=a.value;o=u._apply(o)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o}!function(t){Po(!dl,"__referenceConstructor has already been defined"),dl=t}(yf),function(t){Po(!wl,"__referenceConstructor has already been defined"),wl=t}(yf);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cp={},lp=!1;function hp(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||ha("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ua("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=uf(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,o="http://"+c+"?ns="+u.namespace,u=(a=uf(o,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new Na(Na.OWNER):new Aa(t.name,t.options,e);Nh("Invalid Firebase Database URL",a),nu(a.path)||ha("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=cp[e.name];i||(i={},cp[e.name]=i);var o=i[t.toURLString()];o&&ha("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new Fh(t,lp,n,r),i[t.toURLString()]=o,o}(u,t,l,new ka(t.name,n));return new fp(h,t)}var fp=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(Uh(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new yf(this._repo,Qa())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return null!==this._rootInternal&&(t=this._repo,e=this.app.name,(n=cp[e])&&n[t.key]===t||ha("Database "+e+"("+t.repoInfo_+") has already been deleted."),$h(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&ha("Cannot call "+t+" on a deleted database.")},t}();function pp(t,e,n,r){void 0===r&&(r={}),(t=ms(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&ha("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,o=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ha('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Na(Na.OWNER);else if(r.mockUserToken){var s="string"==typeof r.mockUserToken?r.mockUserToken:qo(r.mockUserToken,t.app.options.projectId);o=new Na(s)}!function(t,e,n,r){t.repoInfo_=new Ra(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,o)}function dp(t){(t=ms(t))._checkNotDeleted("goOffline"),$h(t._repo)}function vp(t){var e;(t=ms(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume("repo_interrupt")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gp={".sv":"timestamp"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var mp=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function yp(t,e,n){var r;if(t=ms(t),Ah("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new jo,s=Of(t,(function(){}));return function(t,e,n,r,i,o){Yh(t,"transaction on "+e);var s={path:e,update:n,onComplete:r,status:null,order:na(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Jh(t,e,void 0);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{Ih("transaction failed: Data returned ",u,s.path),s.status=0;var c=uh(t.transactionQueueTree_,e),l=ch(c)||[];l.push(s),lh(c,l);var h=void 0;"object"==typeof u&&null!==u&&rs(u,".priority")?(h=is(u,".priority"),Po(_h(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(Vl(t.serverSyncTree_,e)||Uu.EMPTY_NODE).getPriority().val();var f=qh(t),p=qu(u,h),d=oh(p,a,f);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=d,s.currentWriteId=Wh(t);var v=Ll(t.serverSyncTree_,e,d,s.currentWriteId,s.applyLocally);Dh(t.eventQueue_,e,v),Zh(t,t.transactionQueueTree_)}}(t._repo,t._path,e,(function(e,n,r){var i=null;e?o.reject(e):(i=new bf(r,new yf(t._repo,t._path),xu),o.resolve(new mp(n,i)))}),s,i),o.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bp=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){hs("OnDisconnect.cancel",0,1,arguments.length),ps("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){hs("OnDisconnect.remove",0,1,arguments.length),ps("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){hs("OnDisconnect.set",1,2,arguments.length),ps("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){hs("OnDisconnect.setWithPriority",2,3,arguments.length),ps("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if(hs("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,fa("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ps("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},t}(),_p=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return hs("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),wp=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return hs("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return hs("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return hs("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return hs("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return hs("DataSnapshot.child",0,1,arguments.length),e=String(e),kh("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return hs("DataSnapshot.hasChild",1,1,arguments.length),kh("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return hs("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return hs("DataSnapshot.forEach",1,1,arguments.length),ps("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return hs("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return hs("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return hs("DataSnapshot.ref",0,0,arguments.length),new Tp(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ip=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var o,s=this;hs("Query.on",2,4,arguments.length),ps("Query.on","callback",n,!1);var a=t.getCancelAndContextArgs_("Query.on",r,i),u=function(t,e){n.call(a.context,new wp(s.database,t),e)};u.userCallback=n,u.context=a.context;var c=null===(o=a.cancel)||void 0===o?void 0:o.bind(a.context);switch(e){case"value":return Of(this._delegate,u,c),n;case"child_added":return Df(this._delegate,u,c),n;case"child_removed":return Ff(this._delegate,u,c),n;case"child_changed":return Lf(this._delegate,u,c),n;case"child_moved":return Mf(this._delegate,u,c),n;default:throw new Error(fs("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(hs("Query.off",0,3,arguments.length),Sh("Query.off",t,!0),ps("Query.off","callback",e,!0),ds("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Uf(this._delegate,t,r)}else Uf(this._delegate,t)},t.prototype.get=function(){var t=this;return Nf(this._delegate).then((function(e){return new wp(t.database,e)}))},t.prototype.once=function(e,n,r,i){var o=this;hs("Query.once",1,4,arguments.length),ps("Query.once","callback",n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),a=new jo,u=function(t,e){var r=new wp(o.database,t);n&&n.call(s.context,r,e),a.resolve(r)};u.userCallback=n,u.context=s.context;var c=function(t){s.cancel&&s.cancel.call(s.context,t),a.reject(t)};switch(e){case"value":Of(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":Df(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":Ff(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":Lf(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":Mf(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(fs("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return a.promise},t.prototype.limitToFirst=function(e){return hs("Query.limitToFirst",1,1,arguments.length),new t(this.database,up(this._delegate,$f(e)))},t.prototype.limitToLast=function(e){return hs("Query.limitToLast",1,1,arguments.length),new t(this.database,up(this._delegate,Xf(e)))},t.prototype.orderByChild=function(e){return hs("Query.orderByChild",1,1,arguments.length),new t(this.database,up(this._delegate,Zf(e)))},t.prototype.orderByKey=function(){return hs("Query.orderByKey",0,0,arguments.length),new t(this.database,up(this._delegate,ep()))},t.prototype.orderByPriority=function(){return hs("Query.orderByPriority",0,0,arguments.length),new t(this.database,up(this._delegate,rp()))},t.prototype.orderByValue=function(){return hs("Query.orderByValue",0,0,arguments.length),new t(this.database,up(this._delegate,op()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),hs("Query.startAt",0,2,arguments.length),new t(this.database,up(this._delegate,Hf(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),hs("Query.startAfter",0,2,arguments.length),new t(this.database,up(this._delegate,Gf(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),hs("Query.endAt",0,2,arguments.length),new t(this.database,up(this._delegate,Vf(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),hs("Query.endBefore",0,2,arguments.length),new t(this.database,up(this._delegate,Kf(e,n)))},t.prototype.equalTo=function(e,n){return hs("Query.equalTo",1,2,arguments.length),new t(this.database,up(this._delegate,ap(e,n)))},t.prototype.toString=function(){return hs("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return hs("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(hs("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,ps(t,"cancel",r.cancel,!0),r.context=n,ds(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(fs(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Tp(this.database,new yf(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Tp=function(t){function e(e,n){var r=t.call(this,e,new df(n._repo,n._path,new nc,!1))||this;return r.database=e,r._delegate=n,r}return wo(e,t),e.prototype.getKey=function(){return hs("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return hs("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,If(this._delegate,t))},e.prototype.getParent=function(){hs("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return hs("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){hs("Reference.set",1,2,arguments.length),ps("Reference.set","onComplete",e,!0);var n=Sf(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if(hs("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,fa("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ah("Reference.update",this._delegate._path),ps("Reference.update","onComplete",e,!0);var i=Af(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},e.prototype.setWithPriority=function(t,e,n){hs("Reference.setWithPriority",2,3,arguments.length),ps("Reference.setWithPriority","onComplete",n,!0);var r=kf(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){hs("Reference.remove",0,1,arguments.length),ps("Reference.remove","onComplete",t,!0);var e=Ef(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;hs("Reference.transaction",1,3,arguments.length),ps("Reference.transaction","transactionUpdate",t,!1),ps("Reference.transaction","onComplete",e,!0),Ph("Reference.transaction","applyLocally",n,!0);var i=yp(this._delegate,t,{applyLocally:n}).then((function(t){return new _p(t.committed,new wp(r.database,t.snapshot))}));return e&&i.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),i},e.prototype.setPriority=function(t,e){hs("Reference.setPriority",1,2,arguments.length),ps("Reference.setPriority","onComplete",e,!0);var n=Cf(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;hs("Reference.push",0,2,arguments.length),ps("Reference.push","onComplete",n,!0);var i=Tf(this._delegate,t),o=i.then((function(t){return new e(r.database,t)}));n&&o.then((function(){return n(null)}),(function(t){return n(t)}));var s=new e(this.database,i);return s.then=o.then.bind(o),s.catch=o.catch.bind(o,void 0),s},e.prototype.onDisconnect=function(){return Ah("Reference.onDisconnect",this._delegate._path),new bp(new pf(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Ip),Ep=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),pp(this._delegate,t,e,n)},t.prototype.ref=function(t){if(hs("database.ref",0,1,arguments.length),t instanceof Tp){var e=wf(this._delegate,t.toString());return new Tp(this,e)}e=_f(this._delegate,t);return new Tp(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";hs(e,1,1,arguments.length);var n=wf(this._delegate,t);return new Tp(this,n)},t.prototype.goOffline=function(){return hs("database.goOffline",0,0,arguments.length),dp(this._delegate)},t.prototype.goOnline=function(){return hs("database.goOnline",0,0,arguments.length),vp(this._delegate)},t.ServerValue={TIMESTAMP:gp,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sp=Object.freeze({__proto__:null,forceLongPolling:function(){Va.forceDisallow(),Ua.forceAllow()},forceWebSockets:function(){Ua.forceDisallow()},isWebSocketsAvailable:function(){return Va.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new gc(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);wa(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){var n,r;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */t.stats_.incrementCounter(e),n=t.statsReporter_,r=e,n.statsToReport_[r]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;Qs(r);var u=new bs("auth-internal",new ws("database-standalone"));return u.setComponent(new ys("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Ep(hp(e,u,void 0,n,a),e),namespace:o}}}),Cp=pu;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},pu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var kp,Ap=Ka,Np=Ra,Pp=Object.freeze({__proto__:null,DataConnection:Cp,RealTimeConnection:Ap,hijackHash:function(t){var e=pu.prototype.put;return pu.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){pu.prototype.put=e}},ConnectionTarget:Np,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){lp=t}(t)}}),Rp=Ep.ServerValue;Qs((kp=zs).SDK_VERSION),kp.INTERNAL.registerComponent(new ys("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Ep(hp(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:Tp,Query:Ip,Database:Ep,DataSnapshot:wp,enableLogging:aa,INTERNAL:Sp,ServerValue:Rp,TEST_ACCESS:Pp}).setMultipleInstances(!0)),kp.registerVersion("@firebase/database","0.11.0");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var xp=function(t,e){return(xp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Op(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Dp,Lp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Mp=Mp||{},Fp=Lp||self;function Up(){}function jp(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function qp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Vp="closure_uid_"+(1e9*Math.random()>>>0),Bp=0;function Kp(t,e,n){return t.call.apply(t.bind,arguments)}function Wp(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Hp(t,e,n){return(Hp=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Kp:Wp).apply(null,arguments)}function zp(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Gp(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Qp(){this.s=this.s,this.o=this.o}var $p={};Qp.prototype.s=!1,Qp.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Vp)&&t[Vp]||(t[Vp]=++Bp)}(this);delete $p[t]}},Qp.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Yp=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Xp=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Jp(t){return Array.prototype.concat.apply([],arguments)}function Zp(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function td(t){return/^[\s\xa0]*$/.test(t)}var ed,nd=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function rd(t,e){return-1!=t.indexOf(e)}function id(t,e){return t<e?-1:t>e?1:0}t:{var od=Fp.navigator;if(od){var sd=od.userAgent;if(sd){ed=sd;break t}}ed=""}function ad(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ud(t){var e={};for(var n in t)e[n]=t[n];return e}var cd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ld(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<cd.length;o++)n=cd[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function hd(t){return hd[" "](t),t}hd[" "]=Up;var fd,pd,dd=rd(ed,"Opera"),vd=rd(ed,"Trident")||rd(ed,"MSIE"),gd=rd(ed,"Edge"),md=gd||vd,yd=rd(ed,"Gecko")&&!(rd(ed.toLowerCase(),"webkit")&&!rd(ed,"Edge"))&&!(rd(ed,"Trident")||rd(ed,"MSIE"))&&!rd(ed,"Edge"),bd=rd(ed.toLowerCase(),"webkit")&&!rd(ed,"Edge");function _d(){var t=Fp.document;return t?t.documentMode:void 0}t:{var wd="",Id=(pd=ed,yd?/rv:([^\);]+)(\)|;)/.exec(pd):gd?/Edge\/([\d\.]+)/.exec(pd):vd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(pd):bd?/WebKit\/(\S+)/.exec(pd):dd?/(?:Version)[ \/]?(\S+)/.exec(pd):void 0);if(Id&&(wd=Id?Id[1]:""),vd){var Td=_d();if(null!=Td&&Td>parseFloat(wd)){fd=String(Td);break t}}fd=wd}var Ed,Sd={};function Cd(){return function(t){var e=Sd;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=nd(String(fd)).split("."),n=nd("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=id(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||id(0==o[2].length,0==s[2].length)||id(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(Fp.document&&vd){var kd=_d();Ed=kd||(parseInt(fd,10)||void 0)}else Ed=void 0;var Ad=Ed,Nd=function(){if(!Fp.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Fp.addEventListener("test",Up,e),Fp.removeEventListener("test",Up,e)}catch(n){}return t}();function Pd(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Rd(t,e){if(Pd.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(yd){t:{try{hd(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:xd[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Rd.Z.h.call(this)}}Pd.prototype.h=function(){this.defaultPrevented=!0},Gp(Rd,Pd);var xd={2:"touch",3:"pen",4:"mouse"};Rd.prototype.h=function(){Rd.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Od="closure_listenable_"+(1e6*Math.random()|0),Dd=0;function Ld(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Dd,this.ca=this.fa=!1}function Md(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Fd(t){this.src=t,this.g={},this.h=0}function Ud(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Yp(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Md(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function jd(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Fd.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=jd(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new Ld(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var qd="closure_lm_"+(1e6*Math.random()|0),Vd={};function Bd(t,e,n,r,i){if(r&&r.once)return Wd(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Bd(t,e[o],n,r,i);return null}return n=Xd(n),t&&t[Od]?t.N(e,n,qp(r)?!!r.capture:!!r,i):Kd(t,e,n,!1,r,i)}function Kd(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=qp(i)?!!i.capture:!!i,a=$d(t);if(a||(t[qd]=a=new Fd(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=Qd;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Nd||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Gd(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Wd(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Wd(t,e[o],n,r,i);return null}return n=Xd(n),t&&t[Od]?t.O(e,n,qp(r)?!!r.capture:!!r,i):Kd(t,e,n,!0,r,i)}function Hd(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Hd(t,e[o],n,r,i);else r=qp(r)?!!r.capture:!!r,n=Xd(n),t&&t[Od]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=jd(o=t.g[e],n,r,i))&&(Md(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=$d(t))&&(e=t.g[e.toString()],t=-1,e&&(t=jd(e,n,r,i)),(n=-1<t?e[t]:null)&&zd(n))}function zd(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Od])Ud(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Gd(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=$d(e))?(Ud(n,t),0==n.h&&(n.src=null,e[qd]=null)):Md(t)}}}function Gd(t){return t in Vd?Vd[t]:Vd[t]="on"+t}function Qd(t,e){if(t.ca)t=!0;else{e=new Rd(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&zd(t),t=n.call(r,e)}return t}function $d(t){return(t=t[qd])instanceof Fd?t:null}var Yd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xd(t){return"function"==typeof t?t:(t[Yd]||(t[Yd]=function(e){return t.handleEvent(e)}),t[Yd])}function Jd(){Qp.call(this),this.i=new Fd(this),this.P=this,this.I=null}function Zd(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Pd(e,t);else if(e instanceof Pd)e.target=e.target||t;else{var i=e;ld(e=new Pd(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=tv(s,r,!0,e)&&i}if(i=tv(s=e.g=t,r,!0,e)&&i,i=tv(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=tv(s=e.g=n[o],r,!1,e)&&i}function tv(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&Ud(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Gp(Jd,Qp),Jd.prototype[Od]=!0,Jd.prototype.removeEventListener=function(t,e,n,r){Hd(this,t,e,n,r)},Jd.prototype.M=function(){if(Jd.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Md(n[r]);delete e.g[t],e.h--}}this.I=null},Jd.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Jd.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var ev=Fp.JSON.stringify;function nv(){var t=lv,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var rv,iv=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=ov.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),ov=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new sv}),(function(t){return t.reset()})),sv=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function av(t){Fp.setTimeout((function(){throw t}),0)}function uv(t,e){rv||function(){var t=Fp.Promise.resolve(void 0);rv=function(){t.then(hv)}}(),cv||(rv(),cv=!0),lv.add(t,e)}var cv=!1,lv=new iv;function hv(){for(var t;t=nv();){try{t.h.call(t.g)}catch(n){av(n)}var e=ov;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}cv=!1}function fv(t,e){Jd.call(this),this.h=t||1,this.g=e||Fp,this.j=Hp(this.kb,this),this.l=Date.now()}function pv(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function dv(t,e,n){if("function"==typeof t)n&&(t=Hp(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Hp(t.handleEvent,t)}return 2147483647<Number(e)?-1:Fp.setTimeout(t,e||0)}function vv(t){t.g=dv((function(){t.g=null,t.i&&(t.i=!1,vv(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Gp(fv,Jd),(Dp=fv.prototype).da=!1,Dp.S=null,Dp.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Zd(this,"tick"),this.da&&(pv(this),this.start()))}},Dp.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Dp.M=function(){fv.Z.M.call(this),pv(this),delete this.g};var gv=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}xp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:vv(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Fp.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Qp);function mv(t){Qp.call(this),this.h=t,this.g={}}Gp(mv,Qp);var yv=[];function bv(t,e,n,r){Array.isArray(n)||(n&&(yv[0]=n.toString()),n=yv);for(var i=0;i<n.length;i++){var o=Bd(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function _v(t){ad(t.g,(function(t,e){this.g.hasOwnProperty(e)&&zd(t)}),t),t.g={}}function wv(){this.g=!0}function Iv(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return ev(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}mv.prototype.M=function(){mv.Z.M.call(this),_v(this)},mv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wv.prototype.Aa=function(){this.g=!1},wv.prototype.info=function(){};var Tv={},Ev=null;function Sv(){return Ev=Ev||new Jd}function Cv(t){Pd.call(this,Tv.Ma,t)}function kv(t){var e=Sv();Zd(e,new Cv(e,t))}function Av(t,e){Pd.call(this,Tv.STAT_EVENT,t),this.stat=e}function Nv(t){var e=Sv();Zd(e,new Av(e,t))}function Pv(t,e){Pd.call(this,Tv.Na,t),this.size=e}function Rv(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Fp.setTimeout((function(){t()}),e)}Tv.Ma="serverreachability",Gp(Cv,Pd),Tv.STAT_EVENT="statevent",Gp(Av,Pd),Tv.Na="timingevent",Gp(Pv,Pd);var xv={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ov={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Dv(){}function Lv(t){return t.h||(t.h=t.i())}function Mv(){}Dv.prototype.h=null;var Fv,Uv={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function jv(){Pd.call(this,"d")}function qv(){Pd.call(this,"c")}function Vv(){}function Bv(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new mv(this),this.P=Wv,t=md?125:void 0,this.W=new fv(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Kv}function Kv(){this.i=null,this.g="",this.h=!1}Gp(jv,Pd),Gp(qv,Pd),Gp(Vv,Dv),Vv.prototype.g=function(){return new XMLHttpRequest},Vv.prototype.i=function(){return{}},Fv=new Vv;var Wv=45e3,Hv={},zv={};function Gv(t,e,n){t.K=1,t.v=gg(lg(e)),t.s=n,t.U=!0,Qv(t,null)}function Qv(t,e){t.F=Date.now(),Jv(t),t.A=lg(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Ng(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Kv,t.g=Pm(t.l,n?e:null,!t.s),0<t.O&&(t.L=new gv(Hp(t.Ia,t,t.g),t.O)),bv(t.V,t.g,"readystatechange",t.gb),e=t.H?ud(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),kv(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function $v(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Yv(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Xv(t,n))==zv){4==e&&(t.o=4,Nv(14),i=!1),Iv(t.j,t.m,null,"[Incomplete Response]");break}if(r==Hv){t.o=4,Nv(15),Iv(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Iv(t.j,t.m,r,null),rg(t,r)}$v(t)&&r!=zv&&r!=Hv&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Nv(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Im(e),e.L=!0,Nv(11))):(Iv(t.j,t.m,n,"[Invalid Chunked Response]"),ng(t),eg(t))}function Xv(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?zv:(n=Number(e.substring(n,r)),isNaN(n)?Hv:(r+=1)+n>e.length?zv:(e=e.substr(r,n),t.C=r+n,e))}function Jv(t){t.Y=Date.now()+t.P,Zv(t,t.P)}function Zv(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Rv(Hp(t.eb,t),e)}function tg(t){t.B&&(Fp.clearTimeout(t.B),t.B=null)}function eg(t){0==t.l.G||t.I||Sm(t.l,t)}function ng(t){tg(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,pv(t.W),_v(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function rg(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Mg(n.i,t)))if(n.I=t.N,!t.J&&Mg(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Em(n),pm(n)}wm(n),Nv(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Rv(Hp(n.ab,n),6e3));if(1>=Lg(n.i)&&n.ka){try{n.ka()}catch(g){}n.ka=void 0}}else km(n,11)}else if((t.J||n.g==t)&&Em(n),!td(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(rd(l,"spdy")||rd(l,"quic")||rd(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Fg(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,vg(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=Nm(r,r.H?r.la:null,r.W),p.J){Ug(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(tg(d),Jv(d)),r.g=p}else _m(r);0<n.l.length&&gm(n)}else"stop"!=o[0]&&"close"!=o[0]||km(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?km(n,7):fm(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}kv(4)}catch(g){}}function ig(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(jp(t)||"string"==typeof t)Xp(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(jp(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(jp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function og(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof og)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function sg(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];ag(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)ag(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function ag(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Dp=Bv.prototype).setTimeout=function(t){this.P=t},Dp.gb=function(t){t=t.target;var e=this.L;e&&3==am(t)?e.l():this.Ia(t)},Dp.Ia=function(t){try{if(t==this.g)t:{var e=am(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||md||this.g&&(this.h.h||this.g.ga()||um(this.g)))){this.I||4!=e||7==n||kv(8==n||0>=r?3:2),tg(this);var i=this.g.ba();this.N=i;e:if($v(this)){var o=um(this.g);t="";var s=o.length,a=4==am(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ng(this),eg(this);var u="";break e}this.h.i=new Fp.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!td(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,Nv(12),ng(this),eg(this);break t}Iv(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,rg(this,i)}this.U?(Yv(this,e,u),md&&this.i&&3==e&&(bv(this.V,this.W,"tick",this.fb),this.W.start())):(Iv(this.j,this.m,u,null),rg(this,u)),4==e&&ng(this),this.i&&!this.I&&(4==e?Sm(this.l,this):(this.i=!1,Jv(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Nv(12)):(this.o=0,Nv(13)),ng(this),eg(this)}}}catch(f){}},Dp.fb=function(){if(this.g){var t=am(this.g),e=this.g.ga();this.C<e.length&&(tg(this),Yv(this,t,e),this.i&&4!=t&&Jv(this))}},Dp.cancel=function(){this.I=!0,ng(this)},Dp.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(kv(3),Nv(17)),ng(this),this.o=2,eg(this)):Zv(this,this.Y-t)},(Dp=og.prototype).R=function(){sg(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Dp.T=function(){return sg(this),this.g.concat()},Dp.get=function(t,e){return ag(this.h,t)?this.h[t]:e},Dp.set=function(t,e){ag(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Dp.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ug=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function cg(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof cg){this.g=void 0!==e?e:t.g,hg(this,t.j),this.s=t.s,fg(this,t.i),pg(this,t.m),this.l=t.l,e=t.h;var n=new Sg;n.i=e.i,e.g&&(n.g=new og(e.g),n.h=e.h),dg(this,n),this.o=t.o}else t&&(n=String(t).match(ug))?(this.g=!!e,hg(this,n[1]||"",!0),this.s=mg(n[2]||""),fg(this,n[3]||"",!0),pg(this,n[4]),this.l=mg(n[5]||"",!0),dg(this,n[6]||"",!0),this.o=mg(n[7]||"")):(this.g=!!e,this.h=new Sg(null,this.g))}function lg(t){return new cg(t)}function hg(t,e,n){t.j=n?mg(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function fg(t,e,n){t.i=n?mg(e,!0):e}function pg(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function dg(t,e,n){e instanceof Sg?(t.h=e,function(t,e){e&&!t.j&&(Cg(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(kg(this,e),Ng(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=yg(e,Tg)),t.h=new Sg(e,t.g))}function vg(t,e,n){t.h.set(e,n)}function gg(t){return vg(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function mg(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function yg(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,bg),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function bg(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}cg.prototype.toString=function(){var t=[],e=this.j;e&&t.push(yg(e,_g,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(yg(e,_g,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(yg(n,"/"==n.charAt(0)?Ig:wg,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",yg(n,Eg)),t.join("")};var _g=/[#\/\?@]/g,wg=/[#\?:]/g,Ig=/[#\?]/g,Tg=/[#\?@]/g,Eg=/#/g;function Sg(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Cg(t){t.g||(t.g=new og,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function kg(t,e){Cg(t),e=Pg(t,e),ag(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,ag((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&sg(t)))}function Ag(t,e){return Cg(t),e=Pg(t,e),ag(t.g.h,e)}function Ng(t,e,n){kg(t,e),0<n.length&&(t.i=null,t.g.set(Pg(t,e),Zp(n)),t.h+=n.length)}function Pg(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Dp=Sg.prototype).add=function(t,e){Cg(this),this.i=null,t=Pg(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Dp.forEach=function(t,e){Cg(this),this.g.forEach((function(n,r){Xp(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Dp.T=function(){Cg(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Dp.R=function(t){Cg(this);var e=[];if("string"==typeof t)Ag(this,t)&&(e=Jp(e,this.g.get(Pg(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Jp(e,t[n])}return e},Dp.set=function(t,e){return Cg(this),this.i=null,Ag(this,t=Pg(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Dp.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Dp.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var Rg=function(t,e){this.h=t,this.g=e};function xg(t){this.l=t||Og,Fp.PerformanceNavigationTiming?t=0<(t=Fp.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Fp.g&&Fp.g.Ea&&Fp.g.Ea()&&Fp.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Og=10;function Dg(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Lg(t){return t.h?1:t.g?t.g.size:0}function Mg(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Fg(t,e){t.g?t.g.add(e):t.h=e}function Ug(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function jg(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Op(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Zp(t.i)}function qg(){}function Vg(){this.g=new qg}function Bg(t,e,n){var r=n||"";try{ig(t,(function(t,n){var i=t;qp(t)&&(i=ev(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(aA){throw e.push(r+"type="+encodeURIComponent("_badmap")),aA}}function Kg(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Wg(t){this.l=t.$b||null,this.j=t.ib||!1}function Hg(t,e){Jd.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=zg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xg.prototype.cancel=function(){var t,e;if(this.i=jg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Op(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},qg.prototype.stringify=function(t){return Fp.JSON.stringify(t,void 0)},qg.prototype.parse=function(t){return Fp.JSON.parse(t,void 0)},Gp(Wg,Dv),Wg.prototype.g=function(){return new Hg(this.l,this.j)},Wg.prototype.i=function(t){return function(){return t}}({}),Gp(Hg,Jd);var zg=0;function Gg(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Qg(t){t.readyState=4,t.l=null,t.j=null,t.A=null,$g(t)}function $g(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Dp=Hg.prototype).open=function(t,e){if(this.readyState!=zg)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,$g(this)},Dp.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Fp).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Dp.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qg(this)),this.readyState=zg},Dp.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,$g(this)),this.g&&(this.readyState=3,$g(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Fp.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gg(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Dp.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Qg(this):$g(this),3==this.readyState&&Gg(this)}},Dp.Ua=function(t){this.g&&(this.response=this.responseText=t,Qg(this))},Dp.Ta=function(t){this.g&&(this.response=t,Qg(this))},Dp.ha=function(){this.g&&Qg(this)},Dp.setRequestHeader=function(t,e){this.v.append(t,e)},Dp.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Dp.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Hg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Yg=Fp.JSON.parse;function Xg(t){Jd.call(this),this.headers=new og,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Jg,this.K=this.L=!1}Gp(Xg,Jd);var Jg="",Zg=/^https?$/i,tm=["POST","PUT"];function em(t){return"content-type"==t.toLowerCase()}function nm(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,rm(t),om(t)}function rm(t){t.D||(t.D=!0,Zd(t,"complete"),Zd(t,"error"))}function im(t){if(t.h&&void 0!==Mp&&(!t.C[1]||4!=am(t)||2!=t.ba()))if(t.v&&4==am(t))dv(t.Fa,0,t);else if(Zd(t,"readystatechange"),4==am(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(ug)[1]||null;if(!o&&Fp.self&&Fp.self.location){var s=Fp.self.location.protocol;o=s.substr(0,s.length-1)}i=!Zg.test(o?o.toLowerCase():"")}e=i}if(e)Zd(t,"complete"),Zd(t,"success");else{t.m=6;try{var a=2<am(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",rm(t)}}finally{om(t)}}}function om(t,e){if(t.g){sm(t);var n=t.g,r=t.C[0]?Up:null;t.g=null,t.C=null,e||Zd(t,"ready");try{n.onreadystatechange=r}catch(aA){}}}function sm(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Fp.clearTimeout(t.A),t.A=null)}function am(t){return t.g?t.g.readyState:0}function um(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Jg:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function cm(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ad(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):vg(t,e,n))}function lm(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function hm(t){this.za=0,this.l=[],this.h=new wv,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=lm("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=lm("baseRetryDelayMs",5e3,t),this.$a=lm("retryDelaySeedMs",1e4,t),this.Ya=lm("forwardChannelMaxRetries",2,t),this.ra=lm("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new xg(t&&t.concurrentRequestLimit),this.Ca=new Vg,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function fm(t){if(dm(t),3==t.G){var e=t.V++,n=lg(t.F);vg(n,"SID",t.J),vg(n,"RID",e),vg(n,"TYPE","terminate"),ym(t,n),(e=new Bv(t,t.h,e,void 0)).K=2,e.v=gg(lg(n)),n=!1,Fp.navigator&&Fp.navigator.sendBeacon&&(n=Fp.navigator.sendBeacon(e.v.toString(),"")),!n&&Fp.Image&&((new Image).src=e.v,n=!0),n||(e.g=Pm(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Jv(e)}Am(t)}function pm(t){t.g&&(Im(t),t.g.cancel(),t.g=null)}function dm(t){pm(t),t.u&&(Fp.clearTimeout(t.u),t.u=null),Em(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Fp.clearTimeout(t.m),t.m=null)}function vm(t,e){t.l.push(new Rg(t.Za++,e)),3==t.G&&gm(t)}function gm(t){Dg(t.i)||t.m||(t.m=!0,uv(t.Ha,t),t.C=0)}function mm(t,e){var n;n=e?e.m:t.V++;var r=lg(t.F);vg(r,"SID",t.J),vg(r,"RID",n),vg(r,"AID",t.U),ym(t,r),t.o&&t.s&&cm(r,t.o,t.s),n=new Bv(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=bm(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Fg(t.i,n),Gv(n,r,e)}function ym(t,e){t.j&&ig({},(function(t,n){vg(e,n,t)}))}function bm(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Hp(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{Bg(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function _m(t){t.g||t.u||(t.Y=1,uv(t.Ga,t),t.A=0)}function wm(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=Rv(Hp(t.Ga,t),Cm(t,t.A)),t.A++,!0)}function Im(t){null!=t.B&&(Fp.clearTimeout(t.B),t.B=null)}function Tm(t){t.g=new Bv(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=lg(t.oa);vg(e,"RID","rpc"),vg(e,"SID",t.J),vg(e,"CI",t.N?"0":"1"),vg(e,"AID",t.U),ym(t,e),vg(e,"TYPE","xmlhttp"),t.o&&t.s&&cm(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=gg(lg(e)),n.s=null,n.U=!0,Qv(n,t)}function Em(t){null!=t.v&&(Fp.clearTimeout(t.v),t.v=null)}function Sm(t,e){var n=null;if(t.g==e){Em(t),Im(t),t.g=null;var r=2}else{if(!Mg(t.i,e))return;n=e.D,Ug(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Zd(r=Sv(),new Pv(r,n,e,i)),gm(t)}else _m(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Lg(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Rv(Hp(t.Ha,t,e),Cm(t,t.C)),t.C++,0)))}(t,e)||2==r&&wm(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:km(t,5);break;case 4:km(t,10);break;case 3:km(t,6);break;default:km(t,2)}}function Cm(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function km(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Hp(t.jb,t);n||(n=new cg("//www.google.com/images/cleardot.gif"),Fp.location&&"http"==Fp.location.protocol||hg(n,"https"),gg(n)),function(t,e){var n=new wv;if(Fp.Image){var r=new Image;r.onload=zp(Kg,n,r,"TestLoadImage: loaded",!0,e),r.onerror=zp(Kg,n,r,"TestLoadImage: error",!1,e),r.onabort=zp(Kg,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=zp(Kg,n,r,"TestLoadImage: timeout",!1,e),Fp.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Nv(2);t.G=0,t.j&&t.j.va(e),Am(t),dm(t)}function Am(t){t.G=0,t.I=-1,t.j&&(0==jg(t.i).length&&0==t.l.length||(t.i.i.length=0,Zp(t.l),t.l.length=0),t.j.ua())}function Nm(t,e,n){var r=function(t){return t instanceof cg?lg(t):new cg(t,void 0)}(n);if(""!=r.i)e&&fg(r,e+"."+r.i),pg(r,r.m);else{var i=Fp.location;r=function(t,e,n,r){var i=new cg(null,void 0);return t&&hg(i,t),e&&fg(i,e),n&&pg(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&ad(t.aa,(function(t,e){vg(r,e,t)})),e=t.D,n=t.sa,e&&n&&vg(r,e,n),vg(r,"VER",t.ma),ym(t,r),r}function Pm(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Xg(new Wg({ib:!0})):new Xg(t.qa)).L=t.H,e}function Rm(){}function xm(){if(vd&&!(10<=Number(Ad)))throw Error("Environmental error: no available transport.")}function Om(t,e){Jd.call(this),this.g=new hm(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!td(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!td(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Mm(this)}function Dm(t){jv.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Lm(){qv.call(this),this.status=1}function Mm(t){this.g=t}(Dp=Xg.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Fv.g(),this.C=this.u?Lv(this.u):Lv(Fv),this.g.onreadystatechange=Hp(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void nm(this,o)}t=n||"";var i=new og(this.headers);r&&ig(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=em,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Fp.FormData&&t instanceof Fp.FormData,!(0<=Yp(tm,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{sm(this),0<this.B&&((this.K=function(t){return vd&&Cd()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hp(this.pa,this)):this.A=dv(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){nm(this,o)}},Dp.pa=function(){void 0!==Mp&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zd(this,"timeout"),this.abort(8))},Dp.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Zd(this,"complete"),Zd(this,"abort"),om(this))},Dp.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),om(this,!0)),Xg.Z.M.call(this)},Dp.Fa=function(){this.s||(this.F||this.v||this.l?im(this):this.cb())},Dp.cb=function(){im(this)},Dp.ba=function(){try{return 2<am(this)?this.g.status:-1}catch(pd){return-1}},Dp.ga=function(){try{return this.g?this.g.responseText:""}catch(pd){return""}},Dp.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Yg(e)}},Dp.Da=function(){return this.m},Dp.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Dp=hm.prototype).ma=8,Dp.G=1,Dp.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Dp.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Bv(this,this.h,t,void 0),n=this.s;if(this.P&&(n?ld(n=ud(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=bm(this,e,r),vg(i=lg(this.F),"RID",t),vg(i,"CVER",22),this.D&&vg(i,"X-HTTP-Session-Id",this.D),ym(this,i),this.o&&n&&cm(i,this.o,n),Fg(this.i,e),this.Ra&&vg(i,"TYPE","init"),this.ja?(vg(i,"$req",r),vg(i,"SID","null"),e.$=!0,Gv(e,i,null)):Gv(e,i,r),this.G=2}}else 3==this.G&&(t?mm(this,t):0==this.l.length||Dg(this.i)||mm(this))},Dp.Ga=function(){if(this.u=null,Tm(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Rv(Hp(this.bb,this),t)}},Dp.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Nv(10),pm(this),Tm(this))},Dp.ab=function(){null!=this.v&&(this.v=null,pm(this),wm(this),Nv(19))},Dp.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Nv(2)):(this.h.info("Failed to ping google.com"),Nv(1))},(Dp=Rm.prototype).xa=function(){},Dp.wa=function(){},Dp.va=function(){},Dp.ua=function(){},Dp.Oa=function(){},xm.prototype.g=function(t,e){return new Om(t,e)},Gp(Om,Jd),Om.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),uv(Hp(t.hb,t,e))),Nv(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Nm(t,null,t.W),gm(t)},Om.prototype.close=function(){fm(this.g)},Om.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,vm(this.g,e)}else this.v?((e={}).__data__=ev(t),vm(this.g,e)):vm(this.g,t)},Om.prototype.M=function(){this.g.j=null,delete this.j,fm(this.g),delete this.g,Om.Z.M.call(this)},Gp(Dm,jv),Gp(Lm,qv),Gp(Mm,Rm),Mm.prototype.xa=function(){Zd(this.g,"a")},Mm.prototype.wa=function(t){Zd(this.g,new Dm(t))},Mm.prototype.va=function(t){Zd(this.g,new Lm(t))},Mm.prototype.ua=function(){Zd(this.g,"b")},xm.prototype.createWebChannel=xm.prototype.g,Om.prototype.send=Om.prototype.u,Om.prototype.open=Om.prototype.m,Om.prototype.close=Om.prototype.close,xv.NO_ERROR=0,xv.TIMEOUT=8,xv.HTTP_ERROR=6,Ov.COMPLETE="complete",Mv.EventType=Uv,Uv.OPEN="a",Uv.CLOSE="b",Uv.ERROR="c",Uv.MESSAGE="d",Jd.prototype.listen=Jd.prototype.N,Xg.prototype.listenOnce=Xg.prototype.O,Xg.prototype.getLastError=Xg.prototype.La,Xg.prototype.getLastErrorCode=Xg.prototype.Da,Xg.prototype.getStatus=Xg.prototype.ba,Xg.prototype.getResponseJson=Xg.prototype.Qa,Xg.prototype.getResponseText=Xg.prototype.ga,Xg.prototype.send=Xg.prototype.ea;var Fm=xv,Um=Ov,jm=Tv,qm=10,Vm=11,Bm=Wg,Km=Mv,Wm=Xg,Hm=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Hm.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Gm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return wo(e,t),e}(Error),Qm=new Rs("@firebase/firestore");function $m(){return Qm.logLevel}function Ym(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Qm.logLevel<=Ts.DEBUG){var r=e.map(Zm);Qm.debug.apply(Qm,ko(["Firestore (8.10.0): "+t],r))}}function Xm(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Qm.logLevel<=Ts.ERROR){var r=e.map(Zm);Qm.error.apply(Qm,ko(["Firestore (8.10.0): "+t],r))}}function Jm(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Qm.logLevel<=Ts.WARN){var r=e.map(Zm);Qm.warn.apply(Qm,ko(["Firestore (8.10.0): "+t],r))}}function Zm(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+t;throw Xm(e),new Error(e)}function ey(t,e){t||ty()}function ny(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iy=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=ry(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function oy(t,e){return t<e?-1:t>e?1:0}function sy(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function ay(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uy=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Gm(zm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Gm(zm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Gm(zm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Gm(zm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?oy(this.nanoseconds,t.nanoseconds):oy(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),cy=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new uy(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hy(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fy(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var py=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ty(),void 0===n?n=t.length-e:n>t.length-e&&ty(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),dy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wo(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Gm(zm.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(py),vy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wo(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return vy.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Gm(zm.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Gm(zm.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Gm(zm.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Gm(zm.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(py),my=function(){function t(t){this.fields=t,t.sort(gy.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return sy(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),yy=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return oy(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();yy.EMPTY_BYTE_STRING=new yy("");var by=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _y(t){if(ey(!!t),"string"==typeof t){var e=0,n=by.exec(t);if(ey(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wy(t.seconds),nanos:wy(t.nanos)}}function wy(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Iy(t){return"string"==typeof t?yy.fromBase64String(t):yy.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ey(t){var e=t.mapValue.fields.__previous_value__;return Ty(e)?Ey(e):e}function Sy(t){var e=_y(t.mapValue.fields.__local_write_time__.timestampValue);return new uy(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t){return null==t}function ky(t){return 0===t&&1/t==-1/0}function Ay(t){return"number"==typeof t&&Number.isInteger(t)&&!ky(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ny=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(dy.fromString(e))},t.fromName=function(e){return new t(dy.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===dy.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return dy.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new dy(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ty(t)?4:10:ty()}function Ry(t,e){var n,r=Py(t);if(r!==Py(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Sy(t).isEqual(Sy(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=_y(t.timestampValue),r=_y(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,Iy(t.bytesValue).isEqual(Iy(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return wy(t.geoPointValue.latitude)===wy(e.geoPointValue.latitude)&&wy(t.geoPointValue.longitude)===wy(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return wy(t.integerValue)===wy(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=wy(t.doubleValue),r=wy(e.doubleValue);return n===r?ky(n)===ky(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return sy(t.arrayValue.values||[],e.arrayValue.values||[],Ry);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ly(n)!==ly(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ry(n[i],r[i])))return!1;return!0}(t,e);default:return ty()}}function xy(t,e){return void 0!==(t.values||[]).find((function(t){return Ry(t,e)}))}function Oy(t,e){var n,r,i,o,s=Py(t),a=Py(e);if(s!==a)return oy(s,a);switch(s){case 0:return 0;case 1:return oy(t.booleanValue,e.booleanValue);case 2:return r=e,i=wy((n=t).integerValue||n.doubleValue),o=wy(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return Dy(t.timestampValue,e.timestampValue);case 4:return Dy(Sy(t),Sy(e));case 5:return oy(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Iy(t),r=Iy(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=oy(n[i],r[i]);if(0!==o)return o}return oy(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=oy(wy(t.latitude),wy(e.latitude));return 0!==n?n:oy(wy(t.longitude),wy(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Oy(n[i],r[i]);if(o)return o}return oy(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=oy(r[s],o[s]);if(0!==a)return a;var u=Oy(n[r[s]],i[o[s]]);if(0!==u)return u}return oy(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ty()}}function Dy(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return oy(t,e);var n=_y(t),r=_y(e),i=oy(n.seconds,r.seconds);return 0!==i?i:oy(n.nanos,r.nanos)}function Ly(t){return My(t)}function My(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(e=t.timestampValue,"time("+(n=_y(e)).seconds+","+n.nanos+")"):"stringValue"in t?t.stringValue:"bytesValue"in t?Iy(t.bytesValue).toBase64():"referenceValue"in t?(i=t.referenceValue,Ny.fromName(i).toString()):"geoPointValue"in t?"geo("+(r=t.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=My(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+My(t.fields[o])}return e+"}"}(t.mapValue):ty();var e,n,r,i}function Fy(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Uy(t){return!!t&&"integerValue"in t}function jy(t){return!!t&&"arrayValue"in t}function qy(t){return!!t&&"nullValue"in t}function Vy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function By(t){return!!t&&"mapValue"in t}function Ky(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return hy(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Ky(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ky(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wy=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!By(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ky(e)},t.prototype.setAll=function(t){var e=this,n=gy.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Ky(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());By(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Ry(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];By(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){hy(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(Ky(this.value))},t}();function Hy(t){var e=[];return hy(t.fields,(function(t,n){var r=new gy([t]);if(By(n)){var i=Hy(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new my(e)}var zy=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,cy.min(),Wy.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Wy.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Wy.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Wy.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Wy.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Gy=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Gy(t,e,n,r,i,o,s)}function $y(t){var e=ny(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return(e=t).field.canonicalString()+e.op.toString()+Ly(e.value);var e})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.canonicalString()+e.dir;var e})).join(","),Cy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ub(e.startAt)),e.endAt&&(n+="|ub:",n+=ub(e.endAt)),e.h=n}return e.h}function Yy(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!lb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Ry(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fb(t.startAt,e.startAt)&&fb(t.endAt,e.endAt)}function Xy(t){return Ny.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Jy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return wo(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Zy(t,n,r):"array-contains"===n?new rb(t,r):"in"===n?new ib(t,r):"not-in"===n?new ob(t,r):"array-contains-any"===n?new sb(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new tb(t,n):new eb(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Oy(e,this.value)):null!==e&&Py(this.value)===Py(e)&&this.m(Oy(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ty()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Zy=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ny.fromName(r.referenceValue),i}return wo(e,t),e.prototype.matches=function(t){var e=Ny.comparator(t.key,this.key);return this.m(e)},e}(Jy),tb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=nb("in",n),r}return wo(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Jy),eb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=nb("not-in",n),r}return wo(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Jy);function nb(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Ny.fromName(t.referenceValue)}))}var rb=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return wo(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return jy(e)&&xy(e.arrayValue,this.value)},e}(Jy),ib=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return wo(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&xy(this.value.arrayValue,e)},e}(Jy),ob=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return wo(e,t),e.prototype.matches=function(t){if(xy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!xy(this.value.arrayValue,e)},e}(Jy),sb=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return wo(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!jy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return xy(e.value.arrayValue,t)}))},e}(Jy),ab=function(t,e){this.position=t,this.before=e};function ub(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ly(t)})).join(",")}var cb=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function lb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function hb(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Ny.comparator(Ny.fromName(s.referenceValue),n.key):Oy(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function fb(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ry(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pb=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function db(t,e,n,r,i,o,s,a){return new pb(t,e,n,r,i,o,s,a)}function vb(t){return new pb(t)}function gb(t){return!Cy(t.limit)&&"F"===t.limitType}function mb(t){return!Cy(t.limit)&&"L"===t.limitType}function yb(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function bb(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function _b(t){return null!==t.collectionGroup}function wb(t){var e=ny(t);if(null===e.p){e.p=[];var n=bb(e),r=yb(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new cb(n)),e.p.push(new cb(gy.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new cb(gy.keyField(),u))}}}return e.p}function Ib(t){var e=ny(t);if(!e.T)if("F"===e.limitType)e.T=Qy(e.path,e.collectionGroup,wb(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=wb(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new cb(o.field,s))}var a=e.endAt?new ab(e.endAt.position,!e.endAt.before):null,u=e.startAt?new ab(e.startAt.position,!e.startAt.before):null;e.T=Qy(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function Tb(t,e,n){return new pb(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eb(t,e){return Yy(Ib(t),Ib(e))&&t.limitType===e.limitType}function Sb(t){return $y(Ib(t))+"|lt:"+t.limitType}function Cb(t){return"Query(target="+(e=Ib(t),n=e.path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ly(e.value);var e})).join(", ")+"]"),Cy(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.canonicalString()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+ub(e.startAt)),e.endAt&&(n+=", endAt: "+ub(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function kb(t,e){return e.isFoundDocument()&&(n=t,i=(r=e).key.path,null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ny.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i))&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!hb(t.startAt,wb(t),e)||t.endAt&&hb(t.endAt,wb(t),e))}(t,e);var n,r,i}function Ab(t){return function(e,n){for(var r=!1,i=0,o=wb(t);i<o.length;i++){var s=o[i],a=Nb(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Nb(t,e,n){var r,i,o,s,a=t.field.isKeyField()?Ny.comparator(e.key,n.key):(r=t.field,i=n,o=e.data.field(r),s=i.data.field(r),null!==o&&null!==s?Oy(o,s):ty());switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return ty()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ky(e)?"-0":e}}function Rb(t){return{integerValue:""+t}}function xb(t,e){return Ay(e)?Rb(e):Pb(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ob=function(){this._=void 0};function Db(t,e,n){return t instanceof Fb?(i=e,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):t instanceof Ub?jb(t,e):t instanceof qb?Vb(t,e):function(t,e){var n=Mb(t,e),r=Kb(n)+Kb(t.A);return Uy(n)&&Uy(t.A)?Rb(r):Pb(t.R,r)}(t,e);var r,i,o}function Lb(t,e,n){return t instanceof Ub?jb(t,e):t instanceof qb?Vb(t,e):n}function Mb(t,e){return t instanceof Bb?Uy(r=e)||(n=r)&&"doubleValue"in n?e:{integerValue:0}:null;var n,r}var Fb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wo(e,t),e}(Ob),Ub=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return wo(e,t),e}(Ob);function jb(t,e){for(var n=Wb(e),r=function(t){n.some((function(e){return Ry(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var qb=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return wo(e,t),e}(Ob);function Vb(t,e){for(var n=Wb(e),r=function(t){n=n.filter((function(e){return!Ry(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Bb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return wo(e,t),e}(Ob);function Kb(t){return wy(t.integerValue||t.doubleValue)}function Wb(t){return jy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hb=function(t,e){this.field=t,this.transform=e},zb=function(t,e){this.version=t,this.transformResults=e},Gb=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Qb(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var $b=function(){};function Yb(t,e,n){var r,i,o,s,a;t instanceof e_?(i=e,o=n,s=(r=t).value.clone(),a=i_(r.fieldTransforms,i,o.transformResults),s.setAll(a),i.convertToFoundDocument(o.version,s).setHasCommittedMutations()):t instanceof n_?function(t,e,n){if(Qb(t.precondition,e)){var r=i_(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(r_(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Xb(t,e,n){var r;t instanceof e_?function(t,e,n){if(Qb(t.precondition,e)){var r=t.value.clone(),i=o_(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(t_(e),r).setHasLocalMutations()}}(t,e,n):t instanceof n_?function(t,e,n){if(Qb(t.precondition,e)){var r=o_(t.fieldTransforms,n,e),i=e.data;i.setAll(r_(t)),i.setAll(r),e.convertToFoundDocument(t_(e),i).setHasLocalMutations()}}(t,e,n):(r=e,Qb(t.precondition,r)&&r.convertToNoDocument(cy.min()))}function Jb(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Mb(o.transform,s||null);null!=a&&(null==n&&(n=Wy.empty()),n.set(o.field,a))}return n||null}function Zb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&sy(n,r,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof Ub&&o instanceof Ub||i instanceof qb&&o instanceof qb?sy(i.elements,o.elements,Ry):i instanceof Bb&&o instanceof Bb?Ry(i.A,o.A):i instanceof Fb&&o instanceof Fb);var n,r,i,o}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function t_(t){return t.isFoundDocument()?t.version:cy.min()}var e_=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return wo(e,t),e}($b),n_=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return wo(e,t),e}($b);function r_(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function i_(t,e,n){var r=new Map;ey(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Lb(s,a,n[i]))}return r}function o_(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Db(a,u,e))}return r}var s_,a_,u_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return wo(e,t),e}($b),c_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return wo(e,t),e}($b),l_=function(t){this.count=t};function h_(t){switch(t){case zm.OK:return ty();case zm.CANCELLED:case zm.UNKNOWN:case zm.DEADLINE_EXCEEDED:case zm.RESOURCE_EXHAUSTED:case zm.INTERNAL:case zm.UNAVAILABLE:case zm.UNAUTHENTICATED:return!1;case zm.INVALID_ARGUMENT:case zm.NOT_FOUND:case zm.ALREADY_EXISTS:case zm.PERMISSION_DENIED:case zm.FAILED_PRECONDITION:case zm.ABORTED:case zm.OUT_OF_RANGE:case zm.UNIMPLEMENTED:case zm.DATA_LOSS:return!0;default:return ty()}}function f_(t){if(void 0===t)return Xm("GRPC error has no .code"),zm.UNKNOWN;switch(t){case s_.OK:return zm.OK;case s_.CANCELLED:return zm.CANCELLED;case s_.UNKNOWN:return zm.UNKNOWN;case s_.DEADLINE_EXCEEDED:return zm.DEADLINE_EXCEEDED;case s_.RESOURCE_EXHAUSTED:return zm.RESOURCE_EXHAUSTED;case s_.INTERNAL:return zm.INTERNAL;case s_.UNAVAILABLE:return zm.UNAVAILABLE;case s_.UNAUTHENTICATED:return zm.UNAUTHENTICATED;case s_.INVALID_ARGUMENT:return zm.INVALID_ARGUMENT;case s_.NOT_FOUND:return zm.NOT_FOUND;case s_.ALREADY_EXISTS:return zm.ALREADY_EXISTS;case s_.PERMISSION_DENIED:return zm.PERMISSION_DENIED;case s_.FAILED_PRECONDITION:return zm.FAILED_PRECONDITION;case s_.ABORTED:return zm.ABORTED;case s_.OUT_OF_RANGE:return zm.OUT_OF_RANGE;case s_.UNIMPLEMENTED:return zm.UNIMPLEMENTED;case s_.DATA_LOSS:return zm.DATA_LOSS;default:return ty()}}(a_=s_||(s_={}))[a_.OK=0]="OK",a_[a_.CANCELLED=1]="CANCELLED",a_[a_.UNKNOWN=2]="UNKNOWN",a_[a_.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",a_[a_.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",a_[a_.NOT_FOUND=5]="NOT_FOUND",a_[a_.ALREADY_EXISTS=6]="ALREADY_EXISTS",a_[a_.PERMISSION_DENIED=7]="PERMISSION_DENIED",a_[a_.UNAUTHENTICATED=16]="UNAUTHENTICATED",a_[a_.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",a_[a_.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",a_[a_.ABORTED=10]="ABORTED",a_[a_.OUT_OF_RANGE=11]="OUT_OF_RANGE",a_[a_.UNIMPLEMENTED=12]="UNIMPLEMENTED",a_[a_.INTERNAL=13]="INTERNAL",a_[a_.UNAVAILABLE=14]="UNAVAILABLE",a_[a_.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var p_=function(){function t(t,e){this.comparator=t,this.root=e||v_.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,v_.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,v_.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new d_(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new d_(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new d_(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new d_(this.root,t,this.comparator,!0)},t}(),d_=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),v_=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw ty();if(this.right.isRed())throw ty();var t=this.left.check();if(t!==this.right.check())throw ty();return t+(this.isRed()?0:1)},t}();v_.EMPTY=null,v_.RED=!0,v_.BLACK=!1,v_.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ty()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new v_(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var g_=function(){function t(t){this.comparator=t,this.data=new p_(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new m_(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new m_(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),m_=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),y_=new p_(Ny.comparator);function b_(){return y_}var __=new p_(Ny.comparator);function w_(){return __}var I_=new p_(Ny.comparator);function T_(){return I_}var E_=new g_(Ny.comparator);function S_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=E_,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var C_=new g_(oy);function k_(){return C_}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A_=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,N_.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(cy.min(),r,k_(),b_(),S_())},t}(),N_=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(yy.EMPTY_BYTE_STRING,n,S_(),S_(),S_())},t}(),P_=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},R_=function(t,e){this.targetId=t,this.V=e},x_=function(t,e,n,r){void 0===n&&(n=yy.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},O_=function(){function t(){this.S=0,this.D=M_(),this.C=yy.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=S_(),e=S_(),n=S_();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ty()}})),new N_(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=M_()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),D_=function(){function t(t){this.W=t,this.G=new Map,this.H=b_(),this.J=L_(),this.Y=new g_(oy)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:ty()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Xy(i))if(0===n){var o=new Ny(i.path);this.tt(e,o,zy.newNoDocument(o,cy.min()))}else ey(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Xy(o.target)){var s=new Ny(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,zy.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=S_();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new A_(t,n,this.Y,this.H,r);return this.H=b_(),this.J=L_(),this.Y=new g_(oy),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new O_,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new g_(oy),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Ym("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new O_),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function L_(){return new p_(Ny.comparator)}function M_(){return new p_(Ny.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var F_={asc:"ASCENDING",desc:"DESCENDING"},U_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},j_=function(t,e){this.databaseId=t,this.I=e};function q_(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function V_(t,e){return t.I?e.toBase64():e.toUint8Array()}function B_(t,e){return q_(t,e.toTimestamp())}function K_(t){return ey(!!t),cy.fromTimestamp((e=_y(t),new uy(e.seconds,e.nanos)));var e}function W_(t,e){return(n=t,new dy(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function H_(t){var e=dy.fromString(t);return ey(vw(e)),e}function z_(t,e){return W_(t.databaseId,e.path)}function G_(t,e){var n=H_(e);if(n.get(1)!==t.databaseId.projectId)throw new Gm(zm.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Gm(zm.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ny(X_(n))}function Q_(t,e){return W_(t.databaseId,e)}function $_(t){var e=H_(t);return 4===e.length?dy.emptyPath():X_(e)}function Y_(t){return new dy(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function X_(t){return ey(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function J_(t,e,n){return{name:z_(t,e),fields:n.value.mapValue.fields}}function Z_(t,e,n){var r=G_(t,e.name),i=K_(e.updateTime),o=new Wy({mapValue:{fields:e.fields}}),s=zy.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function tw(t,e){var n,r,i;if(e instanceof e_)n={update:J_(t,e.key,e.value)};else if(e instanceof u_)n={delete:z_(t,e.key)};else if(e instanceof n_)n={update:J_(t,e.key,e.data),updateMask:dw(e.fieldMask)};else{if(!(e instanceof c_))return ty();n={verify:z_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Fb)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ub)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof qb)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Bb)return{fieldPath:e.field.canonicalString(),increment:n.A};throw ty()}(0,t)}))),e.precondition.isNone||(n.currentDocument=(r=t,void 0!==(i=e.precondition).updateTime?{updateTime:B_(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ty())),n}function ew(t,e){var n,r=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?Gb.updateTime(K_(n.updateTime)):void 0!==n.exists?Gb.exists(n.exists):Gb.none():Gb.none(),i=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)ey("REQUEST_TIME"===e.setToServerValue),n=new Fb;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Ub(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new qb(i)}else"increment"in e?n=new Bb(t,e.increment):ty();var o=gy.fromServerFormat(e.fieldPath);return new Hb(o,n)}(t,e)})):[];if(e.update){e.update.name;var o=G_(t,e.update.name),s=new Wy({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new my(e.map((function(t){return gy.fromServerFormat(t)})))}(e.updateMask);return new n_(o,s,a,r,i)}return new e_(o,s,r,i)}if(e.delete){var u=G_(t,e.delete);return new u_(u,r)}if(e.verify){var c=G_(t,e.verify);return new c_(c,r)}return ty()}function nw(t,e){return{documents:[Q_(t,e.path)]}}function rw(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Q_(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Q_(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Vy(t.value))return{unaryFilter:{field:lw(t.field),op:"IS_NAN"}};if(qy(t.value))return{unaryFilter:{field:lw(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Vy(t.value))return{unaryFilter:{field:lw(t.field),op:"IS_NOT_NAN"}};if(qy(t.value))return{unaryFilter:{field:lw(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lw(t.field),op:cw(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:lw((e=t).field),direction:uw(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a,u=(s=t,a=e.limit,s.I||Cy(a)?a:{value:a});return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=sw(e.startAt)),e.endAt&&(n.structuredQuery.endAt=sw(e.endAt)),n}function iw(t){var e=$_(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ey(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=ow(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new cb(hw((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u,c,l=null;n.limit&&(u=n.limit,l=Cy(c="object"==typeof u?u.value:u)?null:c);var h=null;n.startAt&&(h=aw(n.startAt));var f=null;return n.endAt&&(f=aw(n.endAt)),db(e,i,a,s,l,"F",h,f)}function ow(t){return t?void 0!==t.unaryFilter?[pw(t)]:void 0!==t.fieldFilter?[fw(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return ow(t)})).reduce((function(t,e){return t.concat(e)})):ty():[]}function sw(t){return{before:t.before,values:t.position}}function aw(t){var e=!!t.before,n=t.values||[];return new ab(n,e)}function uw(t){return F_[t]}function cw(t){return U_[t]}function lw(t){return{fieldPath:t.canonicalString()}}function hw(t){return gy.fromServerFormat(t.fieldPath)}function fw(t){return Jy.create(hw(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ty()}}(t.fieldFilter.op),t.fieldFilter.value)}function pw(t){switch(t.unaryFilter.op){case"IS_NAN":var e=hw(t.unaryFilter.field);return Jy.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=hw(t.unaryFilter.field);return Jy.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=hw(t.unaryFilter.field);return Jy.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=hw(t.unaryFilter.field);return Jy.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ty()}}function dw(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function vw(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=yw(e)),e=mw(t.get(n),e);return yw(e)}function mw(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function yw(t){return t+""}function bw(t){var e=t.length;if(ey(e>=2),2===e)return ey(""===t.charAt(0)&&""===t.charAt(1)),dy.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&ty(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ty()}o=s+2}return new dy(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _w=function(t,e){this.seconds=t,this.nanoseconds=e},ww=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ww.store="owner",ww.key="owner";var Iw=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Iw.store="mutationQueues",Iw.keyPath="userId";var Tw=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Tw.store="mutations",Tw.keyPath="batchId",Tw.userMutationsIndex="userMutationsIndex",Tw.userMutationsKeyPath=["userId","batchId"];var Ew=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,gw(e)]},t.key=function(t,e,n){return[t,gw(e),n]},t}();Ew.store="documentMutations",Ew.PLACEHOLDER=new Ew;var Sw=function(t,e){this.path=t,this.readTime=e},Cw=function(t,e){this.path=t,this.version=e},kw=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};kw.store="remoteDocuments",kw.readTimeIndex="readTimeIndex",kw.readTimeIndexPath="readTime",kw.collectionReadTimeIndex="collectionReadTimeIndex",kw.collectionReadTimeIndexPath=["parentPath","readTime"];var Aw=function(t){this.byteSize=t};Aw.store="remoteDocumentGlobal",Aw.key="remoteDocumentGlobalKey";var Nw=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Nw.store="targets",Nw.keyPath="targetId",Nw.queryTargetsIndexName="queryTargetsIndex",Nw.queryTargetsKeyPath=["canonicalId","targetId"];var Pw=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Pw.store="targetDocuments",Pw.keyPath=["targetId","path"],Pw.documentTargetsIndex="documentTargetsIndex",Pw.documentTargetsKeyPath=["path","targetId"];var Rw=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Rw.key="targetGlobalKey",Rw.store="targetGlobal";var xw=function(t,e){this.collectionId=t,this.parent=e};xw.store="collectionParents",xw.keyPath=["collectionId","parent"];var Ow=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ow.store="clientMetadata",Ow.keyPath="clientId";var Dw=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Dw.store="bundles",Dw.keyPath="bundleId";var Lw=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Lw.store="namedQueries",Lw.keyPath="name";var Mw=ko(ko([],ko(ko([],ko(ko([],ko(ko([],[Iw.store,Tw.store,Ew.store,kw.store,Nw.store,ww.store,Rw.store,Pw.store]),[Ow.store])),[Aw.store])),[xw.store])),[Dw.store,Lw.store]),Fw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Uw=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),jw=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},qw=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&ty(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Vw=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new jw,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Ww(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=$w(e.target.error);n.ft.reject(new Ww(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Ww(n,o)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Ym("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new zw(e)},t}(),Bw=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Vo())&&Xm("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ym("SimpleDb","Removing database:",t),Gw(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Vo(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return To(this,void 0,void 0,(function(){var e,n=this;return Eo(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Ym("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ww(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Gm(zm.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Ww(t,n))},i.onupgradeneeded=function(t){Ym("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Ym("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return To(this,void 0,void 0,(function(){var i,o,s,a,u;return Eo(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Eo(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Vw.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),qw.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,Ym("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Kw=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Gw(this.Pt.delete())},t}(),Ww=function(t){function e(e,n){var r=this;return(r=t.call(this,zm.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return wo(e,t),e}(Gm);function Hw(t){return"IndexedDbTransactionError"===t.name}var zw=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ym("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ym("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Gw(n)},t.prototype.add=function(t){return Ym("SimpleDb","ADD",this.store.name,t,t),Gw(this.store.add(t))},t.prototype.get=function(t){var e=this;return Gw(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Ym("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Ym("SimpleDb","DELETE",this.store.name,t),Gw(this.store.delete(t))},t.prototype.count=function(){return Ym("SimpleDb","COUNT",this.store.name),Gw(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){Ym("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new qw((function(n,r){e.onerror=function(t){var e=$w(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new qw((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Kw(i),s=e(i.primaryKey,i.value,o);if(s instanceof qw){var a=s.catch((function(t){return o.done(),qw.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return qw.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Gw(t){return new qw((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=$w(t.target.error);n(e)}}))}var Qw=!1;function $w(t){var e=Bw._t(Vo());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Gm("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Qw||(Qw=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yw=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return wo(e,t),e}(Uw);function Xw(t,e){var n=ny(t);return Bw.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jw=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Yb(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Xb(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Xb(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(cy.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),S_())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&sy(this.mutations,t.mutations,(function(t,e){return Zb(t,e)}))&&sy(this.baseMutations,t.baseMutations,(function(t,e){return Zb(t,e)}))},t}(),Zw=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){ey(e.mutations.length===r.length);for(var i=T_(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),tI=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=cy.min()),void 0===o&&(o=cy.min()),void 0===s&&(s=yy.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),eI=function(t){this.Lt=t};function nI(t,e){if(e.document)return Z_(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ny.fromSegments(e.noDocument.path),r=aI(e.noDocument.readTime),i=zy.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Ny.fromSegments(e.unknownDocument.path);return r=aI(e.unknownDocument.version),zy.newUnknownDocument(o,r)}return ty()}function rI(t,e,n){var r,i,o=iI(n),s=e.key.path.popLast().toArray();if(e.isFoundDocument()){var a={name:z_(r=t.Lt,(i=e).key),fields:i.data.value.mapValue.fields,updateTime:q_(r,i.version.toTimestamp())},u=e.hasCommittedMutations;return new kw(null,null,a,u,o,s)}if(e.isNoDocument()){var c=e.key.path.toArray(),l=sI(e.version);return u=e.hasCommittedMutations,new kw(null,new Sw(c,l),null,u,o,s)}if(e.isUnknownDocument()){var h=e.key.path.toArray(),f=sI(e.version);return new kw(new Cw(h,f),null,null,!0,o,s)}return ty()}function iI(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function oI(t){var e=new uy(t[0],t[1]);return cy.fromTimestamp(e)}function sI(t){var e=t.toTimestamp();return new _w(e.seconds,e.nanoseconds)}function aI(t){var e=new uy(t.seconds,t.nanoseconds);return cy.fromTimestamp(e)}function uI(t,e){for(var n=(e.baseMutations||[]).map((function(e){return ew(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return ew(t.Lt,e)})),a=uy.fromMillis(e.localWriteTimeMs);return new Jw(e.batchId,a,n,s)}function cI(t){var e,n,r=aI(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?aI(t.lastLimboFreeSnapshotVersion):cy.min();return void 0!==t.query.documents?(ey(1===(n=t.query).documents.length),e=Ib(vb($_(n.documents[0])))):e=Ib(iw(t.query)),new tI(e,t.targetId,0,t.lastListenSequenceNumber,r,i,yy.fromBase64String(t.resumeToken))}function lI(t,e){var n,r=sI(e.snapshotVersion),i=sI(e.lastLimboFreeSnapshotVersion);n=Xy(e.target)?nw(t.Lt,e.target):rw(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Nw(e.targetId,$y(e.target),r,o,e.sequenceNumber,i,n)}function hI(t){var e=iw({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Tb(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fI=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return pI(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:aI(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return pI(t).put({bundleId:(n=e).id,createTime:sI(K_(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return dI(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:hI(e.bundledQuery),readTime:aI(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return dI(t).put({name:(n=e).name,readTime:sI(K_(n.readTime)),bundledQuery:n.bundledQuery});var n},t}();function pI(t){return Xw(t,Dw.store)}function dI(t){return Xw(t,Lw.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vI=function(){function t(){this.Bt=new gI}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),qw.resolve()},t.prototype.getCollectionParents=function(t,e){return qw.resolve(this.Bt.getEntries(e))},t}(),gI=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new g_(dy.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new g_(dy.comparator)).toArray()},t}(),mI=function(){function t(){this.qt=new gI}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:gw(i)};return yI(t).put(o)}return qw.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ay(e),""],!1,!0);return yI(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(bw(o.parent))}return n}))},t}();function yI(t){return Xw(t,xw.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_I=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t,e,n){var r=t.store(Tw.store),i=t.store(Ew.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){ey(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Ew.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return qw.waitFor(o).next((function(){return c}))}function II(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ty();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_I.DEFAULT_COLLECTION_PERCENTILE=10,_I.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_I.DEFAULT=new _I(41943040,_I.DEFAULT_COLLECTION_PERCENTILE,_I.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_I.DISABLED=new _I(-1,0,0);var TI=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return ey(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return SI(t).$t({index:Tw.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=CI(t),s=SI(t);return s.add({}).next((function(a){ey("number"==typeof a);for(var u=new Jw(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return tw(t.Lt,e)})),i=n.mutations.map((function(e){return tw(t.Lt,e)}));return new Tw(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new g_((function(t,e){return oy(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Ew.key(i.userId,d.key.path,a);h=h.add(d.key.path.popLast()),l.push(s.put(c)),l.push(o.put(v,Ew.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),qw.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return SI(t).get(e).next((function(t){return t?(ey(t.userId===n.userId),uI(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?qw.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return SI(t).$t({index:Tw.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(ey(e.batchId>=r),o=uI(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return SI(t).$t({index:Tw.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return SI(t).Nt(Tw.userMutationsIndex,n).next((function(t){return t.map((function(t){return uI(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Ew.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return CI(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=bw(u);if(a===n.userId&&e.path.isEqual(l))return SI(t).get(c).next((function(t){if(!t)throw ty();ey(t.userId===n.userId),o.push(uI(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new g_(oy),i=[];return e.forEach((function(e){var o=Ew.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=CI(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=bw(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),qw.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Ew.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new g_(oy);return CI(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=bw(u);s===n.userId&&r.isPrefixOf(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(SI(t).get(e).next((function(t){if(null===t)throw ty();ey(t.userId===n.userId),r.push(uI(n.R,t))})))})),qw.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return wI(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),qw.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return qw.resolve();var r=IDBKeyRange.lowerBound(Ew.prefixForUser(e.userId)),i=[];return CI(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=bw(t[1]);i.push(o)}else r.done()})).next((function(){ey(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return EI(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return kI(t).get(this.userId).next((function(t){return t||new Iw(e.userId,-1,"")}))},t}();function EI(t,e,n){var r=Ew.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return CI(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function SI(t){return Xw(t,Tw.store)}function CI(t){return Xw(t,Ew.store)}function kI(t){return Xw(t,Iw.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AI=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),NI=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new AI(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return cy.fromTimestamp(new uy(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return PI(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return ey(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return PI(t).$t((function(s,a){var u=cI(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return qw.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return PI(t).$t((function(t,n){var r=cI(n);e(r)}))},t.prototype.Xt=function(t){return RI(t).get(Rw.key).next((function(t){return ey(null!==t),t}))},t.prototype.Zt=function(t,e){return RI(t).put(Rw.key,e)},t.prototype.te=function(t,e){return PI(t).put(lI(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=$y(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return PI(t).$t({range:r,index:Nw.queryTargetsIndexName},(function(t,n,r){var o=cI(n);Yy(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=xI(t);return e.forEach((function(e){var s=gw(e.path);i.push(o.put(new Pw(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),qw.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=xI(t);return qw.forEach(e,(function(e){var o=gw(e.path);return qw.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=xI(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=xI(t),i=S_();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=bw(t[1]),o=new Ny(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=gw(e.path),r=IDBKeyRange.bound([n],[ay(n)],!1,!0),i=0;return xI(t).$t({index:Pw.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return PI(t).get(e).next((function(t){return t?cI(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t){return Xw(t,Nw.store)}function RI(t){return Xw(t,Rw.store)}function xI(t){return Xw(t,Pw.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(t){return To(this,void 0,void 0,(function(){return Eo(this,(function(e){if(t.code!==zm.FAILED_PRECONDITION||t.message!==Fw)throw t;return Ym("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=oy(n,i);return 0===s?oy(r,o):s}var LI=function(){function t(t){this.ne=t,this.buffer=new g_(DI),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();DI(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),MI=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Ym("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return To(e,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Hw(e=n.sent())?(Ym("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,OI(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),FI=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return qw.resolve(Hm.o);var r=new LI(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ym("LruGarbageCollector","Garbage collection skipped; disabled"),qw.resolve(bI)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ym("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),bI):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Ym("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),$m()<=Ts.DEBUG&&Ym("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),qw.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),UI=function(){function t(t,e){this.db=t,this.garbageCollector=new FI(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return jI(t,n)},t.prototype.removeReference=function(t,e,n){return jI(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return jI(t,e)},t.prototype._e=function(t,e){return r=e,i=!1,kI(n=t).Ot((function(t){return EI(n,t,r).next((function(t){return t&&(i=!0),qw.resolve(!t)}))})).next((function(){return i}));var n,r,i},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),xI(t).delete([0,gw(s.path)])}))}));i.push(u)}})).next((function(){return qw.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return jI(t,e)},t.prototype.we=function(t,e){var n,r=xI(t),i=Hm.o;return r.$t({index:Pw.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==Hm.o&&e(new Ny(bw(n)),i),i=a,n=s):i=Hm.o})).next((function(){i!==Hm.o&&e(new Ny(bw(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function jI(t,e){return xI(t).put((n=e,r=t.currentSequenceNumber,new Pw(0,gw(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qI=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){hy(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return fy(this.inner)},t}(),VI=function(){function t(){this.changes=new qI((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:cy.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:zy.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?qw.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),BI=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return HI(t).put(zI(e),n)},t.prototype.removeEntry=function(t,e){var n=HI(t),r=zI(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return HI(t).get(zI(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return HI(t).get(zI(e)).next((function(t){return{document:n.ye(e,t),size:II(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=b_();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=b_(),i=new p_(Ny.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,II(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return qw.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return HI(t).$t({range:r},(function(t,e,r){for(var s=Ny.fromSegments(t);o&&Ny.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=b_(),o=e.path.length+1,s={};if(n.isEqual(cy.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=iI(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=kw.collectionReadTimeIndex}return HI(t).$t(s,(function(t,n,s){if(t.length===o){var a=nI(r.R,n);e.path.isPrefixOf(a.key.path)?kb(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new KI(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return WI(t).get(Aw.key).next((function(t){return ey(!!t),t}))},t.prototype.me=function(t,e){return WI(t).put(Aw.key,e)},t.prototype.ye=function(t,e){if(e){var n=nI(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(cy.min()))return n}return zy.newInvalidDocument(t)},t}(),KI=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new qI((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return wo(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new g_((function(t,e){return oy(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=rI(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=II(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=rI(e.Ie.R,zy.newNoDocument(o,cy.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),qw.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(VI);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(t){return Xw(t,Aw.store)}function HI(t){return Xw(t,kw.store)}function zI(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GI=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;ey(n<r&&n>=0&&r<=11);var o=new Vw("createOrUpgrade",e);n<1&&r>=1&&(t.createObjectStore(ww.store),function(t){t.createObjectStore(Iw.store,{keyPath:Iw.keyPath}),t.createObjectStore(Tw.store,{keyPath:Tw.keyPath,autoIncrement:!0}).createIndex(Tw.userMutationsIndex,Tw.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Ew.store)}(t),QI(t),function(t){t.createObjectStore(kw.store)}(t));var s=qw.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Pw.store),t.deleteObjectStore(Nw.store),t.deleteObjectStore(Rw.store)}(t),QI(t)),s=s.next((function(){return function(t){var e=t.store(Rw.store),n=new Rw(0,0,cy.min().toTimestamp(),0);return e.put(Rw.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Tw.store).Nt().next((function(n){t.deleteObjectStore(Tw.store),t.createObjectStore(Tw.store,{keyPath:Tw.keyPath,autoIncrement:!0}).createIndex(Tw.userMutationsIndex,Tw.userMutationsKeyPath,{unique:!0});var r=e.store(Tw.store),i=n.map((function(t){return r.put(t)}));return qw.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Ow.store,{keyPath:Ow.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Aw.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(kw.store);e.createIndex(kw.readTimeIndex,kw.readTimeIndexPath,{unique:!1}),e.createIndex(kw.collectionReadTimeIndex,kw.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Dw.store,{keyPath:Dw.keyPath})}(t),function(t){t.createObjectStore(Lw.store,{keyPath:Lw.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(kw.store).$t((function(t,n){e+=II(n)})).next((function(){var n=new Aw(e);return t.store(Aw.store).put(Aw.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Iw.store),r=t.store(Tw.store);return n.Nt().next((function(n){return qw.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Tw.userMutationsIndex,i).next((function(r){return qw.forEach(r,(function(r){ey(r.userId===n.userId);var i=uI(e.R,r);return wI(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Pw.store),n=t.store(kw.store);return t.store(Rw.store).get(Rw.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new dy(n),s=[0,gw(o)];r.push(e.get(s).next((function(n){return n?qw.resolve():(r=o,e.put(new Pw(0,gw(r),t.highestListenSequenceNumber)));var r})))})).next((function(){return qw.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(xw.store,{keyPath:xw.keyPath});var n=e.store(xw.store),r=new gI,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:gw(i)})}};return e.store(kw.store).$t({Ft:!0},(function(t,e){var n=new dy(t);return i(n.popLast())})).next((function(){return e.store(Ew.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=bw(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Nw.store);return n.$t((function(t,r){var i=cI(r),o=lI(e.R,i);return n.put(o)}))},t}();function QI(t){t.createObjectStore(Pw.store,{keyPath:Pw.keyPath}).createIndex(Pw.documentTargetsIndex,Pw.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Nw.store,{keyPath:Nw.keyPath}).createIndex(Nw.queryTargetsIndexName,Nw.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Rw.store)}var $I="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",YI=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Gm(zm.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var h,f;this.referenceDelegate=new UI(this,i),this.Le=n+"main",this.R=new eI(u),this.Be=new Bw(this.Le,11,new GI(this.R)),this.qe=new NI(this.referenceDelegate,this.R),this.Ut=new mI,this.Ue=(h=this.R,f=this.Ut,new BI(h,f)),this.Ke=new fI,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Xm("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Gm(zm.FAILED_PRECONDITION,$I);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Hm(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return To(e,void 0,void 0,(function(){return Eo(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return To(e,void 0,void 0,(function(){return Eo(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return To(e,void 0,void 0,(function(){return Eo(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return JI(e).put(new Ow(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Hw(e))return Ym("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ym("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return XI(t).get(ww.key).next((function(t){return qw.resolve(e.tn(t))}))},t.prototype.en=function(t){return JI(t).delete(this.clientId)},t.prototype.nn=function(){return To(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Eo(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Xw(t,Ow.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return qw.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?qw.resolve(!0):XI(t).get(ww.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Gm(zm.FAILED_PRECONDITION,$I);return!1}}return!(!e.networkEnabled||!e.inForeground)||JI(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Ym("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return To(this,void 0,void 0,(function(){var t=this;return Eo(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[ww.store,Ow.store],(function(e){var n=new Yw(e,Hm.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return JI(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return TI.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ym("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Mw,(function(o){return i=new Yw(o,r.Ne?r.Ne.next():Hm.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Xm("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Gm(zm.FAILED_PRECONDITION,Fw);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return XI(t).get(ww.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Gm(zm.FAILED_PRECONDITION,$I)}))},t.prototype.Ze=function(t){var e=new ww(this.clientId,this.allowTabSynchronization,Date.now());return XI(t).put(ww.key,e)},t.yt=function(){return Bw.yt()},t.prototype.Xe=function(t){var e=this,n=XI(t);return n.get(ww.key).next((function(t){return e.tn(t)?(Ym("IndexedDbPersistence","Releasing primary lease."),n.delete(ww.key)):qw.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Xm("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),!Ko()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Ym("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return Xm("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Xm("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function XI(t){return Xw(t,ww.store)}function JI(t){return Xw(t,Ow.store)}function ZI(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var tT=function(t,e){this.progress=t,this.wn=e},eT=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,Ny.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):_b(e)?this.In(t,e,n):this.An(t,e,n);var r},t.prototype.Tn=function(t,e){return this.mn(t,new Ny(e)).next((function(t){var e=w_();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=w_();return this.Ut.getCollectionParents(t,i).next((function(s){return qw.forEach(s,(function(s){var a,u,c=(a=e,u=s.child(i),new pb(u,null,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt));return r.An(t,c,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=zy.newInvalidDocument(c),r=r.insert(c,l)),Xb(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){kb(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=S_(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof n_&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),nT=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=S_(),i=S_(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),rT=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i,o=this;return 0===(i=e).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(cy.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(i){var s=o.Cn(e,i);return(gb(e)||mb(e))&&o.Nn(e.limitType,s,r,n)?o.Dn(t,e):($m()<=Ts.DEBUG&&Ym("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Cb(e)),o.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new g_(Ab(t));return e.forEach((function(e,r){kb(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return $m()<=Ts.DEBUG&&Ym("QueryEngine","Using full collection scan to execute query:",Cb(e)),this.Sn.getDocumentsMatchingQuery(t,e,cy.min())},t}(),iT=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new p_(oy),this.Fn=new qI((function(t){return $y(t)}),Yy),this.$n=cy.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new eT(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t,e,n,r){return new iT(t,e,n,r)}function sT(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o;return Eo(this,(function(s){switch(s.label){case 0:return n=ny(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new eT(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=S_(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];s=s.add(y.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function aT(t,e){var n=ny(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,s,a,u,c,l=e.batch.keys(),h=n.On.newChangeBuffer({trackRemovals:!0});return(r=n,i=t,o=e,s=h,a=o.batch,u=a.keys(),c=qw.resolve(),u.forEach((function(t){c=c.next((function(){return s.getEntry(i,t)})).next((function(e){var n=o.docVersions.get(t);ey(null!==n),e.version.compareTo(n)<0&&(a.applyToRemoteDocument(e,o),e.isValidDocument()&&s.addEntry(e,o.commitVersion))}))})),c.next((function(){return r._n.removeMutationBatch(i,a)}))).next((function(){return h.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,l)}))}))}function uT(t){var e=ny(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function cT(t,e){var n=ny(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var s=[];e.targetChanges.forEach((function(e,o){var a,u,c,l=i.get(o);if(l){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var h=e.resumeToken;if(h.approximateByteSize()>0){var f=l.withResumeToken(h,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,f),a=l,c=e,ey((u=f).resumeToken.approximateByteSize()>0),(0===a.resumeToken.approximateByteSize()||u.snapshotVersion.toMicroseconds()-a.snapshotVersion.toMicroseconds()>=3e8||c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size>0)&&s.push(n.qe.updateTargetData(t,f))}}}));var a=b_();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(lT(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(cy.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return qw.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.kn=i,t}))}function lT(t,e,n,r,i){var o=S_();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=b_();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(cy.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Ym("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function hT(t,e){var n=ny(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function fT(t,e){var n=ny(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,qw.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new tI(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function pT(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o,s;return Eo(this,(function(a){switch(a.label){case 0:r=ny(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Hw(s=a.sent()))throw s;return Ym("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}}))}))}function dT(t,e,n){var r=ny(t),i=cy.min(),o=S_();return r.persistence.runTransaction("Execute query","readonly",(function(t){return(s=r,a=t,u=Ib(e),c=ny(s),l=c.Fn.get(u),void 0!==l?qw.resolve(c.kn.get(l)):c.qe.getTargetData(a,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:cy.min(),n?o:S_())})).next((function(t){return{documents:t,Bn:o}}));var s,a,u,c,l}))}function vT(t,e){var n=ny(t),r=ny(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function gT(t){var e=ny(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.On,r=t,i=e.$n,o=ny(n),s=b_(),a=iI(i),u=HI(r),c=IDBKeyRange.lowerBound(a,!0),u.$t({index:kw.readTimeIndex,range:c},(function(t,e){var n=nI(o.R,e);s=s.insert(n.key,n),a=e.readTime})).next((function(){return{wn:s,readTime:oI(a)}}));var n,r,i,o,s,a,u,c})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function mT(t){return To(this,void 0,void 0,(function(){var e;return Eo(this,(function(n){return[2,(e=ny(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e=HI(t),n=cy.min(),e.$t({index:kw.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=oI(e.readTime)),r.done()})).next((function(){return n}));var e,n})).then((function(t){e.$n=t}))]}))}))}function yT(t,e,n,r){return To(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,f,p;return Eo(this,(function(d){switch(d.label){case 0:for(i=ny(t),o=S_(),s=b_(),a=T_(),u=0,c=n;u<c.length;u++)l=c[u],h=e.qn(l.metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,fT(i,(v=r,Ib(vb(dy.fromString("__bundle__/docs/"+v)))))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return lT(t,f,s,cy.min(),a).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return i.qe.addMatchingKeys(t,o,p.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}var v}))}))}function bT(t,e,n){return void 0===n&&(n=S_()),To(this,void 0,void 0,(function(){var r,i;return Eo(this,(function(o){switch(o.label){case 0:return[4,fT(t,Ib(hI(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ny(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=K_(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(yy.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var _T=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return qw.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:K_(n.createTime)}),qw.resolve()},t.prototype.getNamedQuery=function(t,e){return qw.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(n=e).name,query:hI(n.bundledQuery),readTime:K_(n.readTime)}),qw.resolve();var n},t}(),wT=function(){function t(){this.Wn=new g_(IT.Gn),this.zn=new g_(IT.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new IT(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new IT(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Ny(new dy([])),r=new IT(n,t),i=new IT(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Ny(new dy([])),n=new IT(e,t),r=new IT(e,t+1),i=S_();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new IT(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),IT=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Ny.comparator(t.key,e.key)||oy(t.ns,e.ns)},t.Hn=function(t,e){return oy(t.ns,e.ns)||Ny.comparator(t.key,e.key)},t}(),TT=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new g_(IT.Gn)}return t.prototype.checkEmpty=function(t){return qw.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Jw(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new IT(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return qw.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return qw.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return qw.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return qw.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return qw.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new IT(e,0),i=new IT(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),qw.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new g_(oy);return e.forEach((function(t){var e=new IT(t,0),i=new IT(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),qw.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Ny.isDocumentKey(i)||(i=i.child(""));var o=new IT(new Ny(i),0),s=new g_(oy);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),qw.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;ey(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return qw.forEach(e.mutations,(function(i){var o=new IT(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new IT(e,0),r=this.rs.firstAfterOrEqual(n);return qw.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,qw.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),ET=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new p_(Ny.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return qw.resolve(n?n.document.clone():zy.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=b_();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():zy.newInvalidDocument(t))})),qw.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=b_(),i=new Ny(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(a.path))break;l.compareTo(n)<=0||kb(e,c)&&(r=r.insert(c.key,c.clone()))}return qw.resolve(r)},t.prototype.fs=function(t,e){return qw.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new ST(this)},t.prototype.getSize=function(t){return qw.resolve(this.size)},t}(),ST=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return wo(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),qw.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(VI),CT=function(){function t(t){this.persistence=t,this.ds=new qI((function(t){return $y(t)}),Yy),this.lastRemoteSnapshotVersion=cy.min(),this.highestTargetId=0,this.ws=0,this._s=new wT,this.targetCount=0,this.ys=AI.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),qw.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return qw.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return qw.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),qw.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),qw.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new AI(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,qw.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),qw.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,qw.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),qw.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return qw.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return qw.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),qw.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),qw.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),qw.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return qw.resolve(n)},t.prototype.containsKey=function(t,e){return qw.resolve(this._s.containsKey(e))},t}(),kT=function(){function t(t,e){var n,r=this;this.gs={},this.Ne=new Hm(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new CT(this),this.Ut=new vI,this.Ue=(n=this.Ut,new ET(n,(function(t){return r.referenceDelegate.ps(t)}))),this.R=new eI(e),this.Ke=new _T(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new TT(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ym("MemoryPersistence","Starting transaction:",t);var i=new AT(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return qw.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),AT=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return wo(e,t),e}(Uw),NT=function(){function t(t){this.persistence=t,this.As=new wT,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw ty()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),qw.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),qw.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),qw.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qw.forEach(this.vs,(function(r){var i=Ny.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return qw.or([function(){return qw.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),PT=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t,e){return"firestore_clients_"+t+"_"+e}function xT(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function OT(t,e){return"firestore_targets_"+t+"_"+e}PT.UNAUTHENTICATED=new PT(null),PT.GOOGLE_CREDENTIALS=new PT("google-credentials-uid"),PT.FIRST_PARTY=new PT("first-party-uid"),PT.MOCK_USER=new PT("mock-user");var DT=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Gm(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Xm("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),LT=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Gm(i.error.code,i.error.message)),o?new t(e,i.state,r):(Xm("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),MT=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=k_(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ay(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Xm("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),FT=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Xm("SharedClientState","Failed to parse online state: "+e),null)},t}(),UT=function(){function t(){this.activeTargetIds=k_()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),jT=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new p_(oy),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=RT(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new UT),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return To(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l,h=this;return Eo(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(RT(this.persistenceKey,r)))&&(o=MT.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)l=c[u],this.ks(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(OT(this.persistenceKey,t));if(n){var r=LT.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(OT(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ym("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ym("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ym("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ym("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Xm("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return To(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Eo(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Hm.o;if(null!=t)try{var n=JSON.parse(t);ey("number"==typeof n),e=n}catch(r){Xm("SharedClientState","Failed to read sequence number from WebStorage",r)}return e}(n.newValue))!==Hm.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new DT(this.currentUser,t,e,n),i=xT(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=xT(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=OT(this.persistenceKey,t),i=new LT(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return MT.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return DT.Vs(new PT(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return LT.Vs(r,e)},t.prototype.js=function(t){return FT.Vs(t)},t.prototype.ii=function(t){return To(this,void 0,void 0,(function(){return Eo(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Ym("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=k_();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),qT=function(){function t(){this.li=new UT,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new UT,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),VT=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),BT=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Ym("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Ym("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),KT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},WT=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),HT=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return wo(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var s=new Wm;s.listenOnce(Um.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Fm.NO_ERROR:var e=s.getResponseJson();Ym("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Fm.TIMEOUT:Ym("Connection",'RPC "'+t+'" timed out'),o(new Gm(zm.DEADLINE_EXCEEDED,"Request time out"));break;case Fm.HTTP_ERROR:var n=s.getStatus();if(Ym("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(zm).indexOf(c)>=0?c:zm.UNKNOWN);o(new Gm(a,r.message))}else o(new Gm(zm.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Gm(zm.UNAVAILABLE,"Connection failed."));break;default:ty()}}finally{Ym("Connection",'RPC "'+t+'" completed.')}var u,c}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new xm,o=Sv(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new Bm({})),this.ki(s.initMessageHeaders,e),Bo()||Ho()||Vo().indexOf("Electron/")>=0||((n=Vo()).indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0)||Vo().indexOf("MSAppHost/")>=0||Wo()||(s.httpHeadersOverwriteParam="$httpHeaders");var a=r.join("");Ym("Connection","Creating WebChannel: "+a,s);var u=i.createWebChannel(a,s),c=!1,l=!1,h=new WT({Ei:function(t){l?Ym("Connection","Not sending because WebChannel is closed:",t):(c||(Ym("Connection","Opening WebChannel transport."),u.open(),c=!0),Ym("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,Km.EventType.OPEN,(function(){l||Ym("Connection","WebChannel transport opened.")})),f(u,Km.EventType.CLOSE,(function(){l||(l=!0,Ym("Connection","WebChannel transport closed"),h.Vi())})),f(u,Km.EventType.ERROR,(function(t){l||(l=!0,Jm("Connection","WebChannel transport errored:",t),h.Vi(new Gm(zm.UNAVAILABLE,"The operation could not be completed")))})),f(u,Km.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];ey(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ym("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=s_[t];if(void 0!==e)return f_(e)}(o),a=i.message;void 0===s&&(s=zm.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),l=!0,h.Vi(new Gm(s,a)),u.close()}else Ym("Connection","WebChannel received:",n),h.Si(n)}})),f(o,jm.STAT_EVENT,(function(t){t.stat===qm?Ym("Connection","Detected buffering proxy"):t.stat===Vm&&Ym("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Ym("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return Ym("RestConnection","Received: ",t),t}),(function(e){throw Jm("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=KT[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){return"undefined"!=typeof window?window:null}function GT(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t){return new j_(t,!0)}var $T=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Ym("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),YT=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new $T(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return To(this,void 0,void 0,(function(){return Eo(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return To(this,void 0,void 0,(function(){return Eo(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return To(this,void 0,void 0,(function(){return Eo(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===zm.RESOURCE_EXHAUSTED?(Xm(e.toString()),Xm("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===zm.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Gm(zm.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return To(t,void 0,void 0,(function(){return Eo(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Ym("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Ym("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),XT=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return wo(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n,r;if("targetChange"in e){e.targetChange;var i="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:ty(),o=e.targetChange.targetIds||[],s=function(t,e){return t.I?(ey(void 0===e||"string"==typeof e),yy.fromBase64String(e||"")):(ey(void 0===e||e instanceof Uint8Array),yy.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?zm.UNKNOWN:f_(t.code);return new Gm(e,t.message||"")}(u);n=new x_(i,o,s,a||null)}else if("documentChange"in e){e.documentChange,(i=e.documentChange).document,i.document.name,i.document.updateTime,o=G_(t,i.document.name),s=K_(i.document.updateTime);var u=new Wy({mapValue:{fields:i.document.fields}}),c=(a=zy.newFoundDocument(o,s,u),i.targetIds||[]),l=i.removedTargetIds||[];n=new P_(c,l,a.key,a)}else if("documentDelete"in e)e.documentDelete,(i=e.documentDelete).document,o=G_(t,i.document),s=i.readTime?K_(i.readTime):cy.min(),u=zy.newNoDocument(o,s),a=i.removedTargetIds||[],n=new P_([],a,u.key,u);else if("documentRemove"in e)e.documentRemove,(i=e.documentRemove).document,o=G_(t,i.document),s=i.removedTargetIds||[],n=new P_([],s,o,null);else{if(!("filter"in e))return ty();e.filter;var h=e.filter;h.targetId,i=h.count||0,o=new l_(i),s=h.targetId,n=new R_(s,o)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return cy.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?cy.min():e.readTime?K_(e.readTime):cy.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e,n,r,i,o={};o.database=Y_(this.R),o.addTarget=(e=this.R,i=(n=t).target,(r=Xy(i)?{documents:nw(e,i)}:{query:rw(e,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=V_(e,n.resumeToken):n.snapshotVersion.compareTo(cy.min())>0&&(r.readTime=q_(e,n.snapshotVersion.toTimestamp())),r);var s=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ty()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);s&&(o.labels=s),this.cr(o)},e.prototype.yr=function(t){var e={};e.database=Y_(this.R),e.removeTarget=t,this.cr(e)},e}(YT),JT=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return wo(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(ey(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(r=t.writeResults,i=t.commitTime,r&&r.length>0?(ey(void 0!==i),r.map((function(t){return n=i,(r=(e=t).updateTime?K_(e.updateTime):K_(n)).isEqual(cy.min())&&(r=K_(n)),new zb(r,e.transformResults||[]);var e,n,r}))):[]),n=K_(t.commitTime);return this.listener.Tr(n,e)}var r,i;return ey(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Y_(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return tw(e.R,t)}))};this.cr(n)},e}(YT),ZT=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return wo(e,t),e.prototype.br=function(){if(this.Rr)throw new Gm(zm.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===zm.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Gm(zm.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===zm.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Gm(zm.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),tE=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Xm(e),this.Vr=!1):Ym("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),eE=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return To(o,void 0,void 0,(function(){return Eo(this,(function(t){switch(t.label){case 0:return lE(this)?(Ym("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return To(this,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return(e=ny(t)).Or.add(4),[4,rE(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,nE(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new tE(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t){return To(this,void 0,void 0,(function(){var e,n;return Eo(this,(function(r){switch(r.label){case 0:if(!lE(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function rE(t){return To(this,void 0,void 0,(function(){var e,n;return Eo(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function iE(t,e){var n=ny(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),cE(n)?uE(n):SE(n).er()&&sE(n,e))}function oE(t,e){var n=ny(t),r=SE(n);n.$r.delete(e),r.er()&&aE(n,e),0===n.$r.size&&(r.er()?r.ir():lE(n)&&n.Br.set("Unknown"))}function sE(t,e){t.qr.U(e.targetId),SE(t).mr(e)}function aE(t,e){t.qr.U(e),SE(t).yr(e)}function uE(t){t.qr=new D_({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),SE(t).start(),t.Br.Sr()}function cE(t){return lE(t)&&!SE(t).tr()&&t.$r.size>0}function lE(t){return 0===ny(t).Or.size}function hE(t){t.qr=void 0}function fE(t){return To(this,void 0,void 0,(function(){return Eo(this,(function(e){return t.$r.forEach((function(e,n){sE(t,e)})),[2]}))}))}function pE(t,e){return To(this,void 0,void 0,(function(){return Eo(this,(function(n){return hE(t),cE(t)?(t.Br.Nr(e),uE(t)):t.Br.set("Unknown"),[2]}))}))}function dE(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o;return Eo(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof x_&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o;return Eo(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Ym("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,vE(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof P_?t.qr.X(e):e instanceof R_?t.qr.rt(e):t.qr.et(e),n.isEqual(cy.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,uT(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,(a=t,u=n,c=a.qr.ut(u),c.targetChanges.forEach((function(t,e){if(t.resumeToken.approximateByteSize()>0){var n=a.$r.get(e);n&&a.$r.set(e,n.withResumeToken(t.resumeToken,u))}})),c.targetMismatches.forEach((function(t){var e=a.$r.get(t);if(e){a.$r.set(t,e.withResumeToken(yy.EMPTY_BYTE_STRING,e.snapshotVersion)),aE(a,t);var n=new tI(e.target,t,1,e.sequenceNumber);sE(a,n)}})),a.remoteSyncer.applyRemoteEvent(c))]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Ym("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,vE(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}var a,u,c}))}))}function vE(t,e,n){return To(this,void 0,void 0,(function(){var r=this;return Eo(this,(function(i){switch(i.label){case 0:if(!Hw(e))throw e;return t.Or.add(1),[4,rE(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return uT(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return To(r,void 0,void 0,(function(){return Eo(this,(function(e){switch(e.label){case 0:return Ym("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,nE(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function gE(t,e){return e().catch((function(n){return vE(t,n,e)}))}function mE(t){return To(this,void 0,void 0,(function(){var e,n,r,i,o;return Eo(this,(function(s){switch(s.label){case 0:e=ny(t),n=CE(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,s.label=1;case 1:if(!(lE(a=e)&&a.Fr.length<10))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,hT(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=CE(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,vE(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return yE(e)&&bE(e),[2]}var a}))}))}function yE(t){return lE(t)&&!CE(t).tr()&&t.Fr.length>0}function bE(t){CE(t).start()}function _E(t){return To(this,void 0,void 0,(function(){return Eo(this,(function(e){return CE(t).Ar(),[2]}))}))}function wE(t){return To(this,void 0,void 0,(function(){var e,n,r,i;return Eo(this,(function(o){for(e=CE(t),n=0,r=t.Fr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function IE(t,e,n){return To(this,void 0,void 0,(function(){var r,i;return Eo(this,(function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=Zw.from(r,e,n),[4,gE(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,mE(t)];case 2:return o.sent(),[2]}}))}))}function TE(t,e){return To(this,void 0,void 0,(function(){return Eo(this,(function(n){switch(n.label){case 0:return e&&CE(t).pr?[4,function(t,e){return To(this,void 0,void 0,(function(){var n,r;return Eo(this,(function(i){switch(i.label){case 0:return h_(r=e.code)&&r!==zm.ABORTED?(n=t.Fr.shift(),CE(t).sr(),[4,gE(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,mE(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return yE(t)&&bE(t),[2]}}))}))}function EE(t,e){return To(this,void 0,void 0,(function(){var n;return Eo(this,(function(r){switch(r.label){case 0:return n=ny(t),e?(n.Or.delete(2),[4,nE(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,rE(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function SE(t){var e,n,r,i,o=this;return t.Ur||(t.Ur=(e=t.datastore,n=t.asyncQueue,r={Ii:fE.bind(null,t),Ri:pE.bind(null,t),_r:dE.bind(null,t)},(i=ny(e)).br(),new XT(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return To(o,void 0,void 0,(function(){return Eo(this,(function(n){switch(n.label){case 0:return e?(t.Ur.sr(),cE(t)?uE(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:n.sent(),hE(t),n.label=3;case 3:return[2]}}))}))}))),t.Ur}function CE(t){var e,n,r,i,o=this;return t.Kr||(t.Kr=(e=t.datastore,n=t.asyncQueue,r={Ii:_E.bind(null,t),Ri:TE.bind(null,t),Ir:wE.bind(null,t),Tr:IE.bind(null,t)},(i=ny(e)).br(),new JT(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return To(o,void 0,void 0,(function(){return Eo(this,(function(n){switch(n.label){case 0:return e?(t.Kr.sr(),[4,mE(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:n.sent(),t.Fr.length>0&&(Ym("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),n.label=4;case 4:return[2]}}))}))}))),t.Kr}var kE=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new jw,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Gm(zm.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function AE(t,e){if(Xm("AsyncQueue",e+": "+t),Hw(t))return new Gm(zm.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NE=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Ny.comparator(e.key,n.key)}:function(t,e){return Ny.comparator(t.key,e.key)},this.keyedMap=w_(),this.sortedSet=new p_(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),PE=function(){function t(){this.Qr=new p_(Ny.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):ty():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),RE=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,NE.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Eb(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),xE=function(){this.Wr=void 0,this.listeners=[]},OE=function(){this.queries=new qI((function(t){return Sb(t)}),Eb),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Eo(this,(function(c){switch(c.label){case 0:if(n=ny(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new xE),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=AE(a,"Initialization of query '"+Cb(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&UE(n),[2]}}))}))}function LE(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s;return Eo(this,(function(a){return n=ny(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function ME(t,e){for(var n=ny(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(s)&&(r=!0);u.Wr=s}}r&&UE(n)}function FE(t,e,n){var r=ny(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function UE(t){t.Gr.forEach((function(t){t.next()}))}var jE=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new RE(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=RE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),qE=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),VE=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return G_(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Z_(this.R,t.document,!1):zy.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return K_(t)},t}(),BE=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=KE(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new VE(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||S_()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return To(this,void 0,void 0,(function(){var t,e,n,r,i;return Eo(this,(function(o){switch(o.label){case 0:return[4,yT(this.localStore,new VE(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,bT(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new tT(Object.assign({},this.progress),t))]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WE=function(t){this.key=t},HE=function(t){this.key=t},zE=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=S_(),this.mutatedKeys=S_(),this.lo=Ab(t),this.fo=new NE(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new PE,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=gb(this.query)&&i.size===this.query.limit?i.last():null,c=mb(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=kb(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),d=!0):n.yo(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),gb(this.query)||mb(this.query))for(;s.size>this.query.limit;){var l=gb(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ty()}})(n)-o(i)||r.lo(t.doc,e.doc);var n,i,o})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new RE(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new PE,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=S_(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new HE(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new WE(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=S_();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return RE.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),GE=function(t,e,n){this.query=t,this.targetId=e,this.view=n},QE=function(t){this.key=t,this.bo=!1},$E=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new qI((function(t){return Sb(t)}),Eb),this.Vo=new Map,this.So=new Set,this.Do=new p_(Ny.comparator),this.Co=new Map,this.No=new wT,this.xo={},this.ko=new Map,this.Fo=AI.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function YE(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Eo(this,(function(u){switch(u.label){case 0:return n=SS(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,fT(n.localStore,Ib(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,XE(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&iE(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function XE(t,e,n,r){return To(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Eo(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return To(this,void 0,void 0,(function(){var i,o,s;return Eo(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,dT(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(lS(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,dT(t.localStore,e,!0)];case 1:return i=l.sent(),o=new zE(e,i.Bn),s=o._o(i.documents),a=N_.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),lS(t,n,u.To),c=new GE(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function JE(t,e){return To(this,void 0,void 0,(function(){var n,r,i;return Eo(this,(function(o){switch(o.label){case 0:return n=ny(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Eb(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,pT(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),oE(n.remoteStore,r.targetId),uS(n,r.targetId)})).catch(OI)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return uS(n,r.targetId),[4,pT(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function ZE(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o,s;return Eo(this,(function(a){switch(a.label){case 0:r=CS(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,(u=r.localStore,c=e,h=ny(u),f=uy.now(),p=c.reduce((function(t,e){return t.add(e.key)}),S_()),h.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return h.Mn.pn(t,p).next((function(e){l=e;for(var n=[],r=0,i=c;r<i.length;r++){var o=i[r],s=Jb(o,l.get(o.key));null!=s&&n.push(new n_(o.key,s,Hy(s.value.mapValue),Gb.exists(!0)))}return h._n.addMutationBatch(t,f,n,c)}))})).then((function(t){return t.applyToLocalDocumentSet(l),{batchId:t.batchId,changes:l}})))];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new p_(oy)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,pS(r,i.changes)];case 3:return a.sent(),[4,mE(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=AE(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}var u,c,l,h,f,p}))}))}function tS(t,e){return To(this,void 0,void 0,(function(){var n,r;return Eo(this,(function(i){switch(i.label){case 0:n=ny(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,cT(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(ey(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?ey(r.bo):t.removedDocuments.size>0&&(ey(r.bo),r.bo=!1))})),[4,pS(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,OI(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function eS(t,e,n){var r=ny(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=ny(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&UE(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nS(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Eo(this,(function(c){switch(c.label){case 0:return(r=ny(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new p_(Ny.comparator)).insert(o,zy.newNoDocument(o,cy.min())),a=S_().add(o),u=new A_(cy.min(),new Map,new g_(oy),s,a),[4,tS(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),fS(r),[3,4];case 2:return[4,pT(r.localStore,e,!1).then((function(){return uS(r,e,n)})).catch(OI)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function rS(t,e){return To(this,void 0,void 0,(function(){var n,r,i;return Eo(this,(function(o){switch(o.label){case 0:n=ny(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,aT(n.localStore,e)];case 2:return i=o.sent(),aS(n,r,null),sS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,pS(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,OI(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function iS(t,e,n){return To(this,void 0,void 0,(function(){var r,i;return Eo(this,(function(o){switch(o.label){case 0:r=ny(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(s=r.localStore,a=e,u=ny(s),u.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u._n.lookupMutationBatch(t,a).next((function(n){return ey(null!==n),e=n.keys(),u._n.removeMutationBatch(t,n)})).next((function(){return u._n.performConsistencyCheck(t)})).next((function(){return u.Mn.pn(t,e)}))})))];case 2:return i=o.sent(),aS(r,e,n),sS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,pS(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,OI(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var s,a,u}))}))}function oS(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s;return Eo(this,(function(a){switch(a.label){case 0:lE((n=ny(t)).remoteStore)||Ym("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(u=n.localStore,c=ny(u),c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return c._n.getHighestUnacknowledgedBatchId(t)})))];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=a.sent(),s=AE(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}var u,c}))}))}function sS(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function aS(t,e,n){var r=ny(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function uS(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||cS(t,e)}))}function cS(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(oE(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),fS(t))}function lS(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof WE?(t.No.addReference(o.key,e),hS(t,o)):o instanceof HE?(Ym("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||cS(t,o.key)):ty()}}function hS(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Ym("SyncEngine","New document in limbo: "+n),t.So.add(r),fS(t))}function fS(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Ny(dy.fromString(e)),r=t.Fo.next();t.Co.set(r,new QE(n)),t.Do=t.Do.insert(n,r),iE(t.remoteStore,new tI(Ib(vb(n.path)),r,2,Hm.o))}}function pS(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o,s;return Eo(this,(function(a){switch(a.label){case 0:return r=ny(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=nT.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Eo(this,(function(h){switch(h.label){case 0:n=ny(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return qw.forEach(e,(function(e){return qw.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return qw.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!Hw(r=h.sent()))throw r;return Ym("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.kn.get(a),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.kn=n.kn.insert(a,l));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function dS(t,e){return To(this,void 0,void 0,(function(){var n,r;return Eo(this,(function(i){switch(i.label){case 0:return(n=ny(t)).currentUser.isEqual(e)?[3,3]:(Ym("SyncEngine","User change. New user:",e.toKey()),[4,sT(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).ko.forEach((function(t){t.forEach((function(t){t.reject(new Gm(zm.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.ko.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,pS(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function vS(t,e){var n=ny(t),r=n.Co.get(e);if(r&&r.bo)return S_().add(r.key);var i=S_(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function gS(t,e){return To(this,void 0,void 0,(function(){var n,r,i;return Eo(this,(function(o){switch(o.label){case 0:return[4,dT((n=ny(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&lS(n,e.targetId,i.To),i)]}}))}))}function mS(t){return To(this,void 0,void 0,(function(){var e;return Eo(this,(function(n){return[2,gT((e=ny(t)).localStore).then((function(t){return pS(e,t)}))]}))}))}function yS(t,e,n,r){return To(this,void 0,void 0,(function(){var i,o;return Eo(this,(function(s){switch(s.label){case 0:return[4,(a=(i=ny(t)).localStore,u=e,c=ny(a),l=ny(c._n),c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return l.jt(t,u).next((function(e){return e?c.Mn.pn(t,e):qw.resolve(null)}))})))];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,mE(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(aS(i,e,r||null),sS(i,e),function(t,e){ny(ny(t)._n).Gt(e)}(i.localStore,e)):ty(),s.label=4;case 4:return[4,pS(i,o)];case 5:return s.sent(),[3,7];case 6:Ym("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}var a,u,c,l}))}))}function bS(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Eo(this,(function(l){switch(l.label){case 0:return SS(n=ny(t)),CS(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,_S(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,EE(n.remoteStore,!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)a=s[o],iE(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return uS(n,e),pT(n.localStore,e,!0)})),oE(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,_S(n,u)];case 5:return l.sent(),(h=ny(n)).Co.forEach((function(t,e){oE(h.remoteStore,e)})),h.No.ts(),h.Co=new Map,h.Do=new p_(Ny.comparator),n.$o=!1,[4,EE(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var h}))}))}function _S(t,e,n){return To(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,p,d,v;return Eo(this,(function(g){switch(g.label){case 0:n=ny(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,fT(n.localStore,Ib(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=h[l],p=n.Po.get(f),[4,gS(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,vT(n.localStore,a)];case 8:return v=g.sent(),[4,fT(n.localStore,v)];case 9:return u=g.sent(),[4,XE(n,wS(v),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function wS(t){return db(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function IS(t){var e=ny(t);return ny(ny(e.localStore).persistence).fn()}function TS(t,e,n,r){return To(this,void 0,void 0,(function(){var i,o,s;return Eo(this,(function(a){switch(a.label){case 0:return(i=ny(t)).$o?(Ym("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,gT(i.localStore)];case 3:return o=a.sent(),s=A_.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,pS(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,pT(i.localStore,e,!0)];case 6:return a.sent(),uS(i,e,r),[3,8];case 7:ty(),a.label=8;case 8:return[2]}}))}))}function ES(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f;return Eo(this,(function(p){switch(p.label){case 0:if(!(r=SS(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(Ym("SyncEngine","Adding an already active target "+s),[3,5]):[4,vT(r.localStore,s)]):[3,6];case 2:return a=p.sent(),[4,fT(r.localStore,a)];case 3:return u=p.sent(),[4,XE(r,wS(a),u.targetId,!1)];case 4:p.sent(),iE(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Eo(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,pT(r.localStore,t,!1).then((function(){oE(r.remoteStore,t),uS(r,t)})).catch(OI)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,p.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function SS(t){var e=ny(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nS.bind(null,e),e.vo._r=ME.bind(null,e.eventManager),e.vo.Mo=FE.bind(null,e.eventManager),e}function CS(t){var e=ny(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iS.bind(null,e),e}function kS(t,e,n){var r=ny(t);(function(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Eo(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,(l=t.localStore,h=r,f=ny(l),p=K_(h.createTime),f.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return f.Ke.getBundleMetadata(t,h.id)})).then((function(t){return!!t&&t.createTime.compareTo(p)>=0})))];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(KE(r)),i=new BE(r,t.localStore,e.R),[4,e.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(s=c.sent())&&n._updateProgress(s),[4,e.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,pS(t,a.wn,void 0)];case 12:return c.sent(),[4,function(t,e){var n=ny(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Ke.saveBundleMetadata(t,e)}))}(t.localStore,r)];case 13:return c.sent(),n._completeWith(a.progress),[3,15];case 14:return Jm("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}var l,h,f,p}))}))})(r,e,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var AS=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return To(this,void 0,void 0,(function(){return Eo(this,(function(e){switch(e.label){case 0:return this.R=QT(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return oT(this.persistence,new rT,t.initialUser,this.R)},t.prototype.qo=function(t){return new kT(NT.bs,this.R)},t.prototype.Bo=function(t){return new qT},t.prototype.terminate=function(){return To(this,void 0,void 0,(function(){return Eo(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),NS=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return wo(e,t),e.prototype.initialize=function(e){return To(this,void 0,void 0,(function(){var n=this;return Eo(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,mT(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,CS(this.Qo.syncEngine)];case 4:return r.sent(),[4,mE(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return oT(this.persistence,new rT,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new MI(e,t.asyncQueue)},e.prototype.qo=function(t){var e=ZI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?_I.withCacheSize(this.cacheSizeBytes):_I.DEFAULT;return new YI(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,zT(),GT(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new qT},e}(AS),PS=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return wo(e,t),e.prototype.initialize=function(e){return To(this,void 0,void 0,(function(){var n,r=this;return Eo(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof jT?(this.sharedClientState.syncEngine={ui:yS.bind(null,n),ai:TS.bind(null,n),hi:ES.bind(null,n),fn:IS.bind(null,n),ci:mS.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return To(r,void 0,void 0,(function(){return Eo(this,(function(e){switch(e.label){case 0:return[4,bS(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=zT();if(!jT.yt(e))throw new Gm(zm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ZI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new jT(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(NS),RS=function(){function t(){}return t.prototype.initialize=function(t,e){return To(this,void 0,void 0,(function(){var n=this;return Eo(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return eS(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=dS.bind(null,this.syncEngine),[4,EE(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new OE},t.prototype.createDatastore=function(t){var e,n,r=QT(t.databaseInfo.databaseId),i=(e=t.databaseInfo,new HT(e));return n=t.credentials,new ZT(n,i,r)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return eS(s.syncEngine,t,0)},o=BT.yt()?new BT:new VT,new eE(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,s=t.initialUser,a=t.maxConcurrentLimboResolutions,u=e,c=new $E(n,r,i,o,s,a),u&&(c.$o=!0),c;var n,r,i,o,s,a,u,c},t.prototype.terminate=function(){return function(t){return To(this,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return e=ny(t),Ym("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,rE(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return To(this,void 0,void 0,(function(){var r;return Eo(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return To(this,void 0,void 0,(function(){return Eo(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OS=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),DS=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new jw,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return To(this,void 0,void 0,(function(){return Eo(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return To(this,void 0,void 0,(function(){return Eo(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return To(this,void 0,void 0,(function(){var t,e,n,r;return Eo(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new qE(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return To(this,void 0,void 0,(function(){var t,e;return Eo(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return To(this,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return To(this,void 0,void 0,(function(){var t,e;return Eo(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),LS=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return To(this,void 0,void 0,(function(){var e,n=this;return Eo(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Gm(zm.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Eo(this,(function(u){switch(u.label){case 0:return n=ny(t),r=Y_(n.R)+"/documents",i={documents:e.map((function(t){return z_(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e,r,i=(e=n.R,"found"in(r=t)?function(t,e){ey(!!e.found),e.found.name,e.found.updateTime;var n=G_(t,e.found.name),r=K_(e.found.updateTime),i=new Wy({mapValue:{fields:e.found.fields}});return zy.newFoundDocument(n,r,i)}(e,r):"missing"in r?function(t,e){ey(!!e.missing),ey(!!e.readTime);var n=G_(t,e.missing),r=K_(e.readTime);return zy.newNoDocument(n,r)}(e,r):ty());s.set(i.key.toString(),i)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());ey(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new u_(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return To(this,void 0,void 0,(function(){var t,e=this;return Eo(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Ny.fromPath(n);e.mutations.push(new c_(r,e.precondition(r)))})),[4,function(t,e){return To(this,void 0,void 0,(function(){var n,r,i;return Eo(this,(function(o){switch(o.label){case 0:return n=ny(t),r=Y_(n.R)+"/documents",i={writes:e.map((function(t){return tw(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ty();e=cy.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Gm(zm.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Gb.updateTime(e):Gb.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(cy.min()))throw new Gm(zm.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gb.updateTime(e)}return Gb.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),MS=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new $T(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return To(t,void 0,void 0,(function(){var t,e,n=this;return Eo(this,(function(r){return t=new LS(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Cy(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!h_(e)}return!1},t}(),FS=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=PT.UNAUTHENTICATED,this.clientId=iy.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return To(r,void 0,void 0,(function(){return Eo(this,(function(e){switch(e.label){case 0:return Ym("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return To(this,void 0,void 0,(function(){return Eo(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Gm(zm.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new jw;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return To(t,void 0,void 0,(function(){var t,n;return Eo(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=AE(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t,e){return To(this,void 0,void 0,(function(){var n,r,i=this;return Eo(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Ym("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return To(i,void 0,void 0,(function(){return Eo(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,sT(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function jS(t,e){return To(this,void 0,void 0,(function(){var n,r;return Eo(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,qS(t)];case 1:return n=i.sent(),Ym("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return To(this,void 0,void 0,(function(){var n,r;return Eo(this,(function(i){switch(i.label){case 0:return(n=ny(t)).asyncQueue.verifyOperationInProgress(),Ym("RemoteStore","RemoteStore received new credentials"),r=lE(n),n.Or.add(3),[4,rE(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,nE(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function qS(t){return To(this,void 0,void 0,(function(){return Eo(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Ym("FirestoreClient","Using default OfflineComponentProvider"),[4,US(t,new AS)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function VS(t){return To(this,void 0,void 0,(function(){return Eo(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Ym("FirestoreClient","Using default OnlineComponentProvider"),[4,jS(t,new RS)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function BS(t){return qS(t).then((function(t){return t.persistence}))}function KS(t){return qS(t).then((function(t){return t.localStore}))}function WS(t){return VS(t).then((function(t){return t.remoteStore}))}function HS(t){return VS(t).then((function(t){return t.syncEngine}))}function zS(t){return To(this,void 0,void 0,(function(){var e,n;return Eo(this,(function(r){switch(r.label){case 0:return[4,VS(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=YE.bind(null,e.syncEngine),n.onUnlisten=JE.bind(null,e.syncEngine),n)]}}))}))}function GS(t,e,n){var r=this;void 0===n&&(n={});var i=new jw;return t.asyncQueue.enqueueAndForget((function(){return To(r,void 0,void 0,(function(){var r;return Eo(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new OS({next:function(o){e.enqueueAndForget((function(){return LE(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Gm(zm.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Gm(zm.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new jE(vb(n.path),o,{includeMetadataChanges:!0,so:!0});return DE(t,s)},[4,zS(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function QS(t,e,n){var r=this;void 0===n&&(n={});var i=new jw;return t.asyncQueue.enqueueAndForget((function(){return To(r,void 0,void 0,(function(){var r;return Eo(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new OS({next:function(n){e.enqueueAndForget((function(){return LE(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Gm(zm.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new jE(n,o,{includeMetadataChanges:!0,so:!0});return DE(t,s)},[4,zS(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var $S=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},YS=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),XS=new Map,JS=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},ZS=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(PT.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),tC=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),eC=function(){function t(t){var e=this;this.currentUser=PT.UNAUTHENTICATED,this.oc=new jw,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Ym("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Ym("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Ym("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ey("string"==typeof n.accessToken),new JS(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return To(n,void 0,void 0,(function(){return Eo(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return ey(null===t||"string"==typeof t),new PT(t)},t}(),nC=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=PT.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),rC=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new nC(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(PT.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t,e,n){if(!n)throw new Gm(zm.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function oC(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Gm(zm.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function sC(t,e,n,r){if(!0===e&&!0===r)throw new Gm(zm.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function aC(t){if(!Ny.isDocumentKey(t))throw new Gm(zm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function uC(t){if(Ny.isDocumentKey(t))throw new Gm(zm.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function cC(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ty()}function lC(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Gm(zm.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=cC(t);throw new Gm(zm.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function hC(t,e){if(e<=0)throw new Gm(zm.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fC=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Gm(zm.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Gm(zm.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,sC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),pC=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fC({}),this._settingsFrozen=!1,t instanceof YS?(this._databaseId=t,this._credentials=new ZS):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Gm(zm.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new YS(t.options.projectId)}(t),this._credentials=new eC(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Gm(zm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Gm(zm.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fC(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new ZS;switch(t.type){case"gapi":var e=t.client;return ey(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new rC(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Gm(zm.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=XS.get(this))&&(Ym("ComponentProvider","Removing Datastore"),XS.delete(this),t.terminate()),Promise.resolve();var t},t}(),dC=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new gC(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),vC=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),gC=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,vb(r))||this)._path=r,i.type="collection",i}return wo(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new dC(this.firestore,null,new Ny(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(vC);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=ms(t),iC("collection","path",e),t instanceof pC)return uC(n=dy.fromString.apply(dy,ko([e],r))),new gC(t,null,n);if(!(t instanceof dC||t instanceof gC))throw new Gm(zm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return uC(n=dy.fromString.apply(dy,ko([t.path],r)).child(dy.fromString(e))),new gC(t.firestore,null,n)}function yC(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=ms(t),1===arguments.length&&(e=iy.u()),iC("doc","path",e),t instanceof pC)return aC(n=dy.fromString.apply(dy,ko([e],r))),new dC(t,null,new Ny(n));if(!(t instanceof dC||t instanceof gC))throw new Gm(zm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return aC(n=t._path.child(dy.fromString.apply(dy,ko([e],r)))),new dC(t.firestore,t instanceof gC?t.converter:null,new Ny(n))}function bC(t,e){return t=ms(t),e=ms(e),(t instanceof dC||t instanceof gC)&&(e instanceof dC||e instanceof gC)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function _C(t,e){return t=ms(t),e=ms(e),t instanceof vC&&e instanceof vC&&t.firestore===e.firestore&&Eb(t._query,e._query)&&t.converter===e.converter}var wC=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new $T(this,"async_queue_retry"),this.Ic=function(){var e=GT();e&&Ym("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=GT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=GT();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new jw;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return To(this,void 0,void 0,(function(){var t,e=this;return Eo(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Hw(t=n.sent()))throw t;return Ym("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Xm("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=kE.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&ty()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return To(this,void 0,void 0,(function(){var t;return Eo(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function IC(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var TC=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new jw,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),EC=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new wC,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return wo(e,t),e.prototype._terminate=function(){return this._firestoreClient||CC(this),this._firestoreClient.terminate()},e}(pC);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(t){return t._firestoreClient||CC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function CC(t){var e,n,r,i,o,s=t._freezeSettings(),a=(n=t._databaseId,r=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",i=t._persistenceKey,new $S(n,r,i,(o=s).host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams));t._firestoreClient=new FS(t._credentials,t._queue,a)}function kC(t,e,n){var r=this,i=new jw;return t.asyncQueue.enqueue((function(){return To(r,void 0,void 0,(function(){var r;return Eo(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,US(t,n)];case 1:return o.sent(),[4,jS(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(s=r=o.sent()).name?s.code===zm.FAILED_PRECONDITION||s.code===zm.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var s}))}))})).then((function(){return i.promise}))}function AC(t){if(t._initialized||t._terminated)throw new Gm(zm.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NC=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Gm(zm.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gy(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),PC=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(yy.fromBase64String(e))}catch(n){throw new Gm(zm.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t(yy.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),RC=function(t){this._methodName=t},xC=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Gm(zm.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Gm(zm.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return oy(this._lat,t._lat)||oy(this._long,t._long)},t}(),OC=/^__.*__$/,DC=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new n_(t,this.data,this.fieldMask,e,this.fieldTransforms):new e_(t,this.data,e,this.fieldTransforms)},t}(),LC=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new n_(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ty()}}var FC=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return rk(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(MC(this.Nc)&&OC.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),UC=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||QT(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new FC({Nc:t,methodName:e,qc:n,path:gy.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function jC(t){var e=t._freezeSettings(),n=QT(t._databaseId);return new UC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qC(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);ZC("Data must be an object, but it was:",s,r);var a,u,c=XC(r,s);if(o.merge)a=new my(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=tk(e,f[h],n);if(!s.contains(p))throw new Gm(zm.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");ik(l,p)||l.push(p)}a=new my(l),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new DC(new Wy(c),a,u)}var VC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wo(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(RC);function BC(t,e,n){return new FC({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var KC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wo(e,t),e.prototype._toFieldTransform=function(t){return new Hb(t.path,new Fb)},e.prototype.isEqual=function(t){return t instanceof e},e}(RC),WC=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return wo(e,t),e.prototype._toFieldTransform=function(t){var e=BC(this,t,!0),n=this.Kc.map((function(t){return YC(t,e)})),r=new Ub(n);return new Hb(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(RC),HC=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return wo(e,t),e.prototype._toFieldTransform=function(t){var e=BC(this,t,!0),n=this.Kc.map((function(t){return YC(t,e)})),r=new qb(n);return new Hb(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(RC),zC=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return wo(e,t),e.prototype._toFieldTransform=function(t){var e=new Bb(t.R,xb(t.R,this.Qc));return new Hb(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(RC);function GC(t,e,n,r){var i=t.Uc(1,e,n);ZC("Data must be an object, but it was:",i,r);var o=[],s=Wy.empty();hy(r,(function(t,r){var a=nk(e,t,n);r=ms(r);var u=i.Oc(a);if(r instanceof VC)o.push(a);else{var c=YC(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new my(o);return new LC(s,a,i.fieldTransforms)}function QC(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[tk(e,r,n)],u=[i];if(o.length%2!=0)throw new Gm(zm.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(tk(e,o[c])),u.push(o[c+1]);for(var l=[],h=Wy.empty(),f=a.length-1;f>=0;--f)if(!ik(l,a[f])){var p=a[f],d=u[f];d=ms(d);var v=s.Oc(p);if(d instanceof VC)l.push(p);else{var g=YC(d,v);null!=g&&(l.push(p),h.set(p,g))}}var m=new my(l);return new LC(h,m,s.fieldTransforms)}function $C(t,e,n,r){return void 0===r&&(r=!1),YC(n,t.Uc(r?4:3,e))}function YC(t,e){if(JC(t=ms(t)))return ZC("Unsupported field value:",e,t),XC(t,e);if(t instanceof RC)return function(t,e){if(!MC(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=YC(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=ms(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xb(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=uy.fromDate(t);return{timestampValue:q_(e.R,n)}}if(t instanceof uy)return n=new uy(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:q_(e.R,n)};if(t instanceof xC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof PC)return{bytesValue:V_(e.R,t._byteString)};if(t instanceof dC){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:W_(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+cC(t))}(t,e)}function XC(t,e){var n={};return fy(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hy(t,(function(t,r){var i=YC(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function JC(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof uy||t instanceof xC||t instanceof PC||t instanceof dC||t instanceof RC)}function ZC(t,e,n){if(!JC(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=cC(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}var i}function tk(t,e,n){if((e=ms(e))instanceof NC)return e._internalPath;if("string"==typeof e)return nk(t,e);throw rk("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var ek=new RegExp("[~\\*/\\[\\]]");function nk(t,e,n){if(e.search(ek)>=0)throw rk("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(NC.bind.apply(NC,ko([void 0],e.split(".")))))._internalPath}catch(aA){throw rk("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function rk(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Gm(zm.INVALID_ARGUMENT,(a+=". ")+t+u)}function ik(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ok=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new dC(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new sk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(ak("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),sk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wo(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(ok);function ak(t,e){return"string"==typeof e?nk(t,e):e instanceof NC?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uk=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ck=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return wo(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new lk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(ak("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(ok),lk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wo(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(ck),hk=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new uk(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new lk(n._firestore,n._userDataWriter,r.key,r,new uk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Gm(zm.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new lk(t._firestore,t._userDataWriter,e.doc.key,e.doc,new uk(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new lk(t._firestore,t._userDataWriter,e.doc.key,e.doc,new uk(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:fk(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function fk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ty()}}function pk(t,e){return t instanceof ck&&e instanceof ck?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof hk&&e instanceof hk&&t._firestore===e._firestore&&_C(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t){if(mb(t)&&0===t.explicitOrderBy.length)throw new Gm(zm.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var vk=function(){};function gk(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var mk=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return wo(e,t),e.prototype._apply=function(t){var e,n,r,i=jC(t.firestore),o=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Gm(zm.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Ek(s,o);for(var u=[],c=0,l=s;c<l.length;c++){var h=l[c];u.push(Tk(r,t,h))}a={arrayValue:{values:u}}}else a=Tk(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Ek(s,o),a=$C(n,"where",s,"in"===o||"not-in"===o);var f=Jy.create(i,o,a);return function(t,e){if(e.g()){var n=bb(t);if(null!==n&&!n.isEqual(e.field))throw new Gm(zm.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=yb(t);null!==r&&Sk(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Gm(zm.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Gm(zm.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,i,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new vC(t.firestore,t.converter,(e=t._query,n=o,r=e.filters.concat([n]),new pb(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)))},e}(vk),yk=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return wo(e,t),e.prototype._apply=function(t){var e,n,r,i=function(t,e,n){if(null!==t.startAt)throw new Gm(zm.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Gm(zm.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new cb(e,n);return function(t,e){if(null===yb(t)){var n=bb(t);null!==n&&Sk(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new vC(t.firestore,t.converter,(e=t._query,n=i,r=e.explicitOrderBy.concat([n]),new pb(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},e}(vk),bk=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return wo(e,t),e.prototype._apply=function(t){return new vC(t.firestore,t.converter,Tb(t._query,this.Hc,this.Jc))},e}(vk),_k=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return wo(e,t),e.prototype._apply=function(t){var e,n,r=Ik(t,this.type,this.Yc,this.Xc);return new vC(t.firestore,t.converter,(e=t._query,n=r,new pb(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt)))},e}(vk),wk=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return wo(e,t),e.prototype._apply=function(t){var e,n,r=Ik(t,this.type,this.Yc,this.Xc);return new vC(t.firestore,t.converter,(e=t._query,n=r,new pb(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,n)))},e}(vk);function Ik(t,e,n,r){if(n[0]=ms(n[0]),n[0]instanceof ok)return function(t,e,n,r,i){if(!r)throw new Gm(zm.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=wb(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Fy(e,r.key));else{var c=r.data.field(u.field);if(Ty(c))throw new Gm(zm.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Gm(zm.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ab(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=jC(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Gm(zm.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Gm(zm.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!_b(t)&&-1!==c.indexOf("/"))throw new Gm(zm.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(dy.fromString(c));if(!Ny.isDocumentKey(l))throw new Gm(zm.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Ny(l);a.push(Fy(e,h))}else{var f=$C(n,r,c);a.push(f)}}return new ab(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Tk(t,e,n){if("string"==typeof(n=ms(n))){if(""===n)throw new Gm(zm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!_b(e)&&-1!==n.indexOf("/"))throw new Gm(zm.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(dy.fromString(n));if(!Ny.isDocumentKey(r))throw new Gm(zm.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Fy(t,new Ny(r))}if(n instanceof dC)return Fy(t,n._key);throw new Gm(zm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+cC(n)+".")}function Ek(t,e){if(!Array.isArray(t)||0===t.length)throw new Gm(zm.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Gm(zm.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Sk(t,e,n){if(!n.isEqual(e))throw new Gm(zm.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ck=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Py(t)){case 0:return null;case 1:return t.booleanValue;case 2:return wy(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Iy(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ty()}},t.prototype.convertObject=function(t,e){var n=this,r={};return hy(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new xC(wy(t.latitude),wy(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Ey(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Sy(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=_y(t);return new uy(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=dy.fromString(t);ey(vw(n));var r=new YS(n.get(1),n.get(3)),i=new Ny(n.popFirst(5));return r.isEqual(e)||Xm("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Ak=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return wo(e,t),e.prototype.convertBytes=function(t){return new PC(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new dC(this.firestore,null,e)},e}(Ck),Nk=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=jC(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Pk(t,this._firestore),i=kk(r.converter,e,n),o=qC(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Gb.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Pk(t,this._firestore);return o="string"==typeof(e=ms(e))||e instanceof NC?QC(this._dataReader,"WriteBatch.update",s._key,e,n,r):GC(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Gb.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Pk(t,this._firestore);return this._mutations=this._mutations.concat(new u_(e._key,Gb.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Gm(zm.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t,e){if((t=ms(t)).firestore!==e)throw new Gm(zm.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rk=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return wo(e,t),e.prototype.convertBytes=function(t){return new PC(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new dC(this.firestore,null,e)},e}(Ck);function xk(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=lC(t,dC);var o=lC(t.firestore,EC),s=jC(o);return Dk(o,[("string"==typeof(e=ms(e))||e instanceof NC?QC(s,"updateDoc",t._key,e,n,r):GC(s,"updateDoc",t._key,e)).toMutation(t._key,Gb.exists(!0))])}function Ok(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=ms(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||IC(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(IC(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof dC)c=lC(t.firestore,EC),l=vb(t._key.path),u={next:function(e){i[a]&&i[a](Lk(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=lC(t,vC);c=lC(p.firestore,EC),l=p._query;var d=new Rk(c);u={next:function(t){i[a]&&i[a](new hk(c,d,p,t))},error:i[a+1],complete:i[a+2]},dk(t._query)}return function(t,e,n,r){var i=this,o=new OS(r),s=new jE(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return To(i,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return e=DE,[4,zS(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return To(i,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return e=LE,[4,zS(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(SC(c),l,h,u)}function Dk(t,e){return function(t,e){var n=this,r=new jw;return t.asyncQueue.enqueueAndForget((function(){return To(n,void 0,void 0,(function(){var n;return Eo(this,(function(i){switch(i.label){case 0:return n=ZE,[4,HS(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(SC(t),e)}function Lk(t,e,n){var r=n.docs.get(e._key),i=new Rk(t);return new ck(t,i,e._key,r,new uk(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mk=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return wo(e,t),e.prototype.get=function(e){var n=this,r=Pk(e,this._firestore),i=new Rk(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new ck(n._firestore,i,r._key,t._document,new uk(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=jC(t)}return t.prototype.get=function(t){var e=this,n=Pk(t,this._firestore),r=new Ak(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return ty();var i=t[0];if(i.isFoundDocument())return new ok(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ok(e._firestore,r,n._key,null,n.converter);throw ty()}))},t.prototype.set=function(t,e,n){var r=Pk(t,this._firestore),i=kk(r.converter,e,n),o=qC(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Pk(t,this._firestore);return o="string"==typeof(e=ms(e))||e instanceof NC?QC(this._dataReader,"Transaction.update",s._key,e,n,r):GC(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Pk(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(){if("undefined"==typeof Uint8Array)throw new Gm(zm.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Uk(){if("undefined"==typeof atob)throw new Gm(zm.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var jk=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Uk(),new t(PC.fromBase64String(e))},t.fromUint8Array=function(e){return Fk(),new t(PC.fromUint8Array(e))},t.prototype.toBase64=function(){return Uk(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Fk(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),qk=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){AC(t=lC(t,EC));var n=SC(t),r=t._freezeSettings(),i=new RS;return kC(n,i,new NS(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){AC(t=lC(t,EC));var e=SC(t),n=t._freezeSettings(),r=new RS;return kC(e,r,new PS(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Gm(zm.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new jw;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return To(e,void 0,void 0,(function(){var e;return Eo(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return To(this,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return Bw.yt()?(e=t+"main",[4,Bw.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(ZI(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Vk=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof YS||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Jm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=lC(t,pC))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Jm("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s,a;if("string"==typeof r.mockUserToken)s=r.mockUserToken,a=PT.MOCK_USER;else{s=qo(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Gm(zm.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new PT(u)}t._credentials=new tC(new JS(s,a))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return To(e,void 0,void 0,(function(){var e,n;return Eo(this,(function(r){switch(r.label){case 0:return[4,BS(t)];case 1:return e=r.sent(),[4,WS(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),i=n,o=ny(i),o.Or.delete(0),nE(o))]}var i,o}))}))}))}(SC(lC(this._delegate,EC)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return To(e,void 0,void 0,(function(){var e,n;return Eo(this,(function(r){switch(r.label){case 0:return[4,BS(t)];case 1:return e=r.sent(),[4,WS(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return To(this,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return(e=ny(t)).Or.add(0),[4,rE(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(SC(lC(this._delegate,EC)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&sC("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new jw;return t.asyncQueue.enqueueAndForget((function(){return To(e,void 0,void 0,(function(){var e;return Eo(this,(function(r){switch(r.label){case 0:return e=oS,[4,HS(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(SC(lC(this._delegate,EC)))},t.prototype.onSnapshotsInSync=function(t){return e=this._delegate,n=t,function(t,e){var n=this,r=new OS(e);return t.asyncQueue.enqueueAndForget((function(){return To(n,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return e=function(t,e){ny(t).Gr.add(e),e.next()},[4,zS(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return To(n,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return e=function(t,e){ny(t).Gr.delete(e)},[4,zS(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(SC(e=lC(e,EC)),IC(n)?n:{next:n});var e,n},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Gm(zm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new eA(this,mC(this._delegate,t))}catch(e){throw Gk(e,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new zk(this,yC(this._delegate,t))}catch(e){throw Gk(e,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Jk(this,function(t,e){if(t=lC(t,pC),iC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Gm(zm.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new vC(t,null,(n=e,new pb(dy.emptyPath(),n)));var n}(this._delegate,t))}catch(e){throw Gk(e,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new jw;return t.asyncQueue.enqueueAndForget((function(){return To(n,void 0,void 0,(function(){var n;return Eo(this,(function(i){switch(i.label){case 0:return[4,(o=t,VS(o).then((function(t){return t.datastore})))];case 1:return n=i.sent(),new MS(t.asyncQueue,n,e,r).run(),[2]}var o}))}))})),r.promise}(SC(e=this._delegate),(function(r){return function(e){return t(new Kk(n,e))}(new Mk(e,r))}))},t.prototype.batch=function(){var t=this;return SC(this._delegate),new Wk(new Nk(this._delegate,(function(e){return Dk(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Gm(zm.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Gm(zm.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Bk=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return wo(e,t),e.prototype.convertBytes=function(t){return new jk(new PC(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return zk.eu(e,this.firestore,null)},e}(Ck);var Kk=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Bk(t)}return t.prototype.get=function(t){var e=this,n=nA(t);return this._delegate.get(n).then((function(t){return new Yk(e._firestore,new ck(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=nA(t);return n?(oC("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=nA(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,ko([s,e,n],i)),this},t.prototype.delete=function(t){var e=nA(t);return this._delegate.delete(e),this},t}(),Wk=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=nA(t);return n?(oC("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=nA(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,ko([s,e,n],i)),this},t.prototype.delete=function(t){var e=nA(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Hk=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new lk(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Xk(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Bk(e),n),i.set(n,o)),o},t}();Hk.su=new WeakMap;var zk=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Bk(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Gm(zm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new dC(n._delegate,r,new Ny(e)))},t.eu=function(e,n,r){return new t(n,new dC(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new eA(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new eA(this.firestore,mC(this._delegate,t))}catch(e){throw Gk(e,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=ms(t))instanceof dC&&bC(this._delegate,t)},t.prototype.set=function(t,e){e=oC("DocumentReference.set",e);try{return function(t,e,n){t=lC(t,dC);var r=lC(t.firestore,EC),i=kk(t.converter,e,n);return Dk(r,[qC(jC(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Gb.none())])}(this._delegate,t,e)}catch(n){throw Gk(n,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?xk(this._delegate,t):xk.apply(void 0,ko([this._delegate,t,e],n))}catch(i){throw Gk(i,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Dk(lC((t=this._delegate).firestore,EC),[new u_(t._key,Gb.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Qk(e),i=$k(e,(function(e){return new Yk(t.firestore,new ck(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return Ok(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=lC(t,dC);var e=lC(t.firestore,EC),n=SC(e),r=new Rk(e);return function(t,e){var n=this,r=new jw;return t.asyncQueue.enqueueAndForget((function(){return To(n,void 0,void 0,(function(){var n;return Eo(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return To(this,void 0,void 0,(function(){var r,i;return Eo(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(s=t,a=e,u=ny(s),u.persistence.runTransaction("read document","readonly",(function(t){return u.Mn.mn(t,a)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Gm(zm.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=AE(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var s,a,u}))}))},[4,KS(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new ck(e,r,t._key,n,new uk(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=lC(t,dC);var e=lC(t.firestore,EC);return GS(SC(e),t._key,{source:"server"}).then((function(n){return Lk(e,t,n)}))}(this._delegate):function(t){t=lC(t,dC);var e=lC(t.firestore,EC);return GS(SC(e),t._key).then((function(n){return Lk(e,t,n)}))}(this._delegate)).then((function(t){return new Yk(e.firestore,new ck(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Hk.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Gk(t,e,n){return t.message=t.message.replace(e,n),t}function Qk(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!IC(r))return r}return{}}function $k(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=IC(t[0])?t[0]:IC(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Yk=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new zk(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return pk(this._delegate,t._delegate)},t}(),Xk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wo(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Yk),Jk=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Bk(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,gk(this._delegate,(o=r,s=i=n,a=ak("where",e),new mk(a,s,o))))}catch(i){throw Gk(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,s,a},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,gk(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=ak("orderBy",t);return new yk(r,n)}(e,n)))}catch(r){throw Gk(r,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,gk(this._delegate,(hC("limit",n=e),new bk("limit",n,"F"))))}catch(r){throw Gk(r,"limit()","Query.limit()")}var n},t.prototype.limitToLast=function(e){try{return new t(this.firestore,gk(this._delegate,(hC("limitToLast",n=e),new bk("limitToLast",n,"L"))))}catch(r){throw Gk(r,"limitToLast()","Query.limitToLast()")}var n},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,gk(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _k("startAt",t,!0)}.apply(void 0,e)))}catch(r){throw Gk(r,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,gk(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _k("startAfter",t,!1)}.apply(void 0,e)))}catch(r){throw Gk(r,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,gk(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wk("endBefore",t,!0)}.apply(void 0,e)))}catch(r){throw Gk(r,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,gk(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wk("endAt",t,!1)}.apply(void 0,e)))}catch(r){throw Gk(r,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return _C(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=lC(t,vC);var e=lC(t.firestore,EC),n=SC(e),r=new Rk(e);return function(t,e){var n=this,r=new jw;return t.asyncQueue.enqueueAndForget((function(){return To(n,void 0,void 0,(function(){var n;return Eo(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o,s,a;return Eo(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,dT(t,e,!0)];case 1:return a=u.sent(),r=new zE(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=AE(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,KS(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new hk(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=lC(t,vC);var e=lC(t.firestore,EC),n=SC(e),r=new Rk(e);return QS(n,t._query,{source:"server"}).then((function(n){return new hk(e,r,t,n)}))}(this._delegate):function(t){t=lC(t,vC);var e=lC(t.firestore,EC),n=SC(e),r=new Rk(e);return dk(t._query),QS(n,t._query).then((function(n){return new hk(e,r,t,n)}))}(this._delegate)).then((function(t){return new tA(e.firestore,new hk(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Qk(e),i=$k(e,(function(e){return new tA(t.firestore,new hk(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Ok(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Hk.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Zk=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Xk(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),tA=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Jk(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Xk(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Zk(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Xk(n._firestore,r))}))},t.prototype.isEqual=function(t){return pk(this._delegate,t._delegate)},t}(),eA=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return wo(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new zk(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new zk(this.firestore,void 0===t?yC(this._delegate):yC(this._delegate,t))}catch(e){throw Gk(e,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e,n,r,i,o,s=this;return(e=this._delegate,n=t,r=lC(e.firestore,EC),i=yC(e),o=kk(e.converter,n),Dk(r,[qC(jC(e.firestore),"addDoc",i._key,o,null!==e.converter,{}).toMutation(i._key,Gb.exists(!1))]).then((function(){return i}))).then((function(t){return new zk(s.firestore,t)}))},e.prototype.isEqual=function(t){return bC(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Hk.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Jk);function nA(t){return lC(t,dC)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rA=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(NC.bind.apply(NC,ko([void 0],t)))}return t.documentId=function(){return new t(gy.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=ms(t))instanceof NC&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),iA=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new KC("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new VC("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new WC("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new HC("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=new zC("increment",e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t){return e=this._delegate,n=t,r=SC(e=lC(e,EC)),i=new TC,function(t,e,n,r){var i,o,s,a=this,u=(i=n,o=QT(e),s=function(t,e){if(t instanceof Uint8Array)return xS(t,e);if(t instanceof ArrayBuffer)return xS(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof i?(new TextEncoder).encode(i):i),new DS(s,o));t.asyncQueue.enqueueAndForget((function(){return To(a,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return e=kS,[4,HS(t)];case 1:return e.apply(void 0,[n.sent(),u,r]),[2]}}))}))}))}(r,e._databaseId,n,i),i;var e,n,r,i}function sA(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return To(n,void 0,void 0,(function(){var n;return Eo(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=ny(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Ke.getNamedQuery(t,e)}))},[4,KS(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(SC(e=lC(e,EC)),n).then((function(t){return t?new vC(e,null,t.query):null}))).then((function(t){return t?new Jk(r,t):null}))}var aA,uA,cA={Firestore:Vk,GeoPoint:xC,Timestamp:uy,Blob:jk,Transaction:Kk,WriteBatch:Wk,DocumentReference:zk,DocumentSnapshot:Yk,Query:Jk,QueryDocumentSnapshot:Xk,QuerySnapshot:tA,CollectionReference:eA,FieldPath:rA,FieldValue:iA,setLogLevel:function(t){var e;e=t,Qm.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(aA=zs).INTERNAL.registerComponent(new ys("firestore",(function(t){return function(t,e){return new Vk(t,new EC(t,e),new qk)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},cA))),aA.registerVersion("@firebase/firestore","2.4.0"),(uA=Vk).prototype.loadBundle=oA,uA.prototype.namedQuery=sA;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var lA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},hA=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return wo(e,t),e}(Error);var fA=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return To(this,void 0,void 0,(function(){var t;return Eo(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return To(this,void 0,void 0,(function(){return Eo(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getContext=function(){return To(this,void 0,void 0,(function(){var t,e;return Eo(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var dA=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return pA(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?pA(t,(function(t){return e.decode(t)})):t},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vA=function(){function t(t,e,n,r,i,o){var s=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new dA,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(s.deleteService())}},this.contextProvider=new fA(e,n),this.cancelAllRequests=new Promise((function(t){s.deleteService=function(){return t()}}));try{var a=new URL(i);this.customDomain=a.origin,this.region="us-central1"}catch(aA){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o;return Eo(this,(function(s){switch(s.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=s.sent())&&(n["X-Firebase-AppCheck"]=r),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=s.sent(),[3,5];case 4:return s.sent(),[2,{status:0,json:null}];case 5:o=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,i.json()];case 7:return o=s.sent(),[3,9];case 8:return s.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},t.prototype.getAppCheckToken=function(){return To(this,void 0,void 0,(function(){var t;return Eo(this,(function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype.call=function(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f,p;return Eo(this,(function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=d.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=n.timeout||7e4,u=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new hA("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(a),c=u.timer,l=u.promise,[4,Promise.race([gA(c,this.postJSON(r,i,o)),l,gA(c,this.cancelAllRequests)])];case 2:if(!(h=d.sent()))throw new hA("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!lA[a])return new hA("internal","internal");r=lA[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(aA){}return"ok"===r?null:new hA(r,i,o)}(h.status,h.json,this.serializer))throw f;if(!h.json)throw new hA("internal","Response is not valid JSON object.");if(void 0===(p=h.json.data)&&(p=h.json.result),void 0===p)throw new hA("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}}))}))},t}();function gA(t,e){return To(this,void 0,void 0,(function(){var n;return Eo(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t){return Array.prototype.slice.call(t)}function yA(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function bA(t,e,n){var r,i=new Promise((function(i,o){yA(r=t[e].apply(t,n)).then(i,o)}));return i.request=r,i}function _A(t,e,n){var r=bA(t,e,n);return r.then((function(t){if(t)return new CA(t,r.request)}))}function wA(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function IA(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return bA(this[e],r,arguments)})}))}function TA(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function EA(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return _A(this[e],r,arguments)})}))}function SA(t){this._index=t}function CA(t,e){this._cursor=t,this._request=e}function kA(t){this._store=t}function AA(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function NA(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new AA(n)}function PA(t){this._db=t}function RA(t,e,n){var r=bA(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new NA(i.result,t.oldVersion,i.transaction))}),r.then((function(t){return new PA(t)}))}function xA(t){return bA(indexedDB,"deleteDatabase",[t])}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t,e){var n={Functions:vA};t.INTERNAL.registerComponent(new ys("functions",(function(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal"),a=t.getProvider("messaging");return new vA(i,o,a,s,r,e)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(zs,fetch.bind(self)),zs.registerVersion("@firebase/functions","0.6.15"),wA(SA,"_index",["name","keyPath","multiEntry","unique"]),IA(SA,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),EA(SA,"_index",IDBIndex,["openCursor","openKeyCursor"]),wA(CA,"_cursor",["direction","key","primaryKey","value"]),IA(CA,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(CA.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,n),yA(e._request).then((function(t){if(t)return new CA(t,e._request)}))}))})})),kA.prototype.createIndex=function(){return new SA(this._store.createIndex.apply(this._store,arguments))},kA.prototype.index=function(){return new SA(this._store.index.apply(this._store,arguments))},wA(kA,"_store",["name","keyPath","indexNames","autoIncrement"]),IA(kA,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),EA(kA,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),TA(kA,"_store",IDBObjectStore,["deleteIndex"]),AA.prototype.objectStore=function(){return new kA(this._tx.objectStore.apply(this._tx,arguments))},wA(AA,"_tx",["objectStoreNames","mode"]),TA(AA,"_tx",IDBTransaction,["abort"]),NA.prototype.createObjectStore=function(){return new kA(this._db.createObjectStore.apply(this._db,arguments))},wA(NA,"_db",["name","version","objectStoreNames"]),TA(NA,"_db",IDBDatabase,["deleteObjectStore","close"]),PA.prototype.transaction=function(){return new AA(this._db.transaction.apply(this._db,arguments))},wA(PA,"_db",["name","version","objectStoreNames"]),TA(PA,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[kA,SA].forEach((function(e){t in e.prototype&&(e.prototype[t.replace("open","iterate")]=function(){var e=mA(arguments),n=e[e.length-1],r=this._store||this._index,i=r[t].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})}))})),[SA,kA].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})}));var OA,DA=((OA={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',OA["not-registered"]="Firebase Installation is not registered.",OA["installation-not-found"]="Firebase Installation not found.",OA["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',OA["app-offline"]="Could not process request. Application offline.",OA["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",OA),LA=new Xo("installations","Installations",DA);function MA(t){return t instanceof Yo&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function UA(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function jA(t,e){return To(this,void 0,void 0,(function(){var n,r;return Eo(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,LA.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function qA(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function VA(t,e){var n=e.refreshToken,r=qA(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)),r}function BA(t){return To(this,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function KA(t,e){var n=e.fid;return To(this,void 0,void 0,(function(){var e,r,i,o,s,a;return Eo(this,(function(u){switch(u.label){case 0:return e=FA(t),r=qA(t),i={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:"w:0.4.32"},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,BA((function(){return fetch(e,o)}))];case 1:return(s=u.sent()).ok?[4,s.json()]:[3,3];case 2:return a=u.sent(),[2,{fid:a.fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:UA(a.authToken)}];case 3:return[4,jA("Create Installation",s)];case 4:throw u.sent()}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var HA=/^[cdef][\w-]{21}$/;function zA(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,ko([],Co(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return HA.test(e)?e:""}catch(n){return""}}function GA(t){return t.appName+"!"+t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QA=new Map;function $A(t,e){var n=GA(t);YA(n,e),function(t,e){var n=JA();n&&n.postMessage({key:t,fid:e});ZA()}(n,e)}function YA(t,e){var n,r,i=QA.get(t);if(i)try{for(var o=So(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var XA=null;function JA(){return!XA&&"BroadcastChannel"in self&&((XA=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){YA(t.data.key,t.data.fid)}),XA}function ZA(){0===QA.size&&XA&&(XA.close(),XA=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tN,eN="firebase-installations-store",nN=null;function rN(){return nN||(nN=RA("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(eN)}}))),nN}function iN(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s;return Eo(this,(function(a){switch(a.label){case 0:return n=GA(t),[4,rN()];case 1:return r=a.sent(),i=r.transaction(eN,"readwrite"),[4,(o=i.objectStore(eN)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||$A(t,e.fid),[2,e]}}))}))}function oN(t){return To(this,void 0,void 0,(function(){var e,n,r;return Eo(this,(function(i){switch(i.label){case 0:return e=GA(t),[4,rN()];case 1:return n=i.sent(),[4,(r=n.transaction(eN,"readwrite")).objectStore(eN).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function sN(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Eo(this,(function(u){switch(u.label){case 0:return n=GA(t),[4,rN()];case 1:return r=u.sent(),i=r.transaction(eN,"readwrite"),[4,(o=i.objectStore(eN)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||$A(t,a.fid),[2,a]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t){return To(this,void 0,void 0,(function(){var e,n,r;return Eo(this,(function(i){switch(i.label){case 0:return[4,sN(t,(function(n){var r=function(t){return lN(t||{fid:zA(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(LA.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return To(this,void 0,void 0,(function(){var n,r;return Eo(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,KA(t,e)];case 1:return n=i.sent(),[2,iN(t,n)];case 2:return MA(r=i.sent())&&409===r.customData.serverCode?[4,oN(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,iN(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:uN(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function uN(t){return To(this,void 0,void 0,(function(){var e,n,r,i;return Eo(this,(function(o){switch(o.label){case 0:return[4,cN(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,WA(100)];case 3:return o.sent(),[4,cN(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,aN(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function cN(t){return sN(t,(function(t){if(!t)throw LA.create("installation-not-found");return lN(t)}))}function lN(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function hN(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return To(this,void 0,void 0,(function(){var t,i,o,s,a,u,c;return Eo(this,(function(l){switch(l.label){case 0:return t=function(t,e){var n=e.fid;return FA(t)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,e),i=VA(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:"w:0.4.32"}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,BA((function(){return fetch(t,a)}))];case 1:return(u=l.sent()).ok?[4,u.json()]:[3,3];case 2:return c=l.sent(),[2,UA(c)];case 3:return[4,jA("Generate Auth Token",u)];case 4:throw l.sent()}}))}))}function fN(t,e){return void 0===e&&(e=!1),To(this,void 0,void 0,(function(){var n,r,i;return Eo(this,(function(o){switch(o.label){case 0:return[4,sN(t.appConfig,(function(r){if(!dN(r))throw LA.create("not-registered");var i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}(i))return r;if(1===i.requestStatus)return n=function(t,e){return To(this,void 0,void 0,(function(){var n,r;return Eo(this,(function(i){switch(i.label){case 0:return[4,pN(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,WA(100)];case 3:return i.sent(),[4,pN(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,fN(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw LA.create("app-offline");var o=function(t){var e={requestStatus:1,requestTime:Date.now()};return Io(Io({},t),{authToken:e})}(r);return n=function(t,e){return To(this,void 0,void 0,(function(){var n,r,i;return Eo(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,hN(t,e)];case 1:return n=o.sent(),i=Io(Io({},e),{authToken:n}),[4,iN(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!MA(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,oN(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Io(Io({},e),{authToken:{requestStatus:0}}),[4,iN(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function pN(t){return sN(t,(function(t){if(!dN(t))throw LA.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+1e4<Date.now()?Io(Io({},t),{authToken:{requestStatus:0}}):t}))}function dN(t){return void 0!==t&&2===t.registrationStatus}function vN(t){return To(this,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return[4,aN(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o;return Eo(this,(function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return FA(t)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e),r=VA(t,e),i={method:"DELETE",headers:r},[4,BA((function(){return fetch(n,i)}))];case 1:return(o=s.sent()).ok?[3,3]:[4,jA("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function mN(t,e){var n=t.appConfig;return function(t,e){JA();var n=GA(t),r=QA.get(n);r||(r=new Set,QA.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=GA(t),r=QA.get(n);r&&(r.delete(e),0===r.size&&QA.delete(n),ZA())}(n,e)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t){return LA.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t.INTERNAL.registerComponent(new ys("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw yN("App Configuration");if(!t.name)throw yN("App Name");try{for(var r=So(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw yN(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(t){return To(this,void 0,void 0,(function(){var e,n,r;return Eo(this,(function(i){switch(i.label){case 0:return[4,aN(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):fN(t).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),To(this,void 0,void 0,(function(){return Eo(this,(function(n){switch(n.label){case 0:return[4,vN(t.appConfig)];case 1:return n.sent(),[4,fN(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return To(this,void 0,void 0,(function(){var e,n;return Eo(this,(function(r){switch(r.label){case 0:return[4,sN(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw LA.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw LA.create("app-offline");case 3:return[4,gN(e,n)];case 4:return r.sent(),[4,oN(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return mN(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.32")}(zs);var bN,_N,wN=((tN={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',tN["only-available-in-window"]="This method is available in a Window context.",tN["only-available-in-sw"]="This method is available in a service worker context.",tN["permission-default"]="The notification permission was not granted and dismissed instead.",tN["permission-blocked"]="The notification permission was not granted and blocked instead.",tN["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",tN["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",tN["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",tN["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",tN["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",tN["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",tN["token-update-no-token"]="FCM returned no token when updating the user to push.",tN["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",tN["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",tN["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",tN["invalid-vapid-key"]="The public VAPID key must be a string.",tN["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",tN),IN=new Xo("messaging","Messaging",wN),TN="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function EN(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,ko([],Co(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function SN(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(_N=bN||(bN={})).PUSH_RECEIVED="push-received",_N.NOTIFICATION_CLICKED="notification-clicked";function CN(t){return To(this,void 0,void 0,(function(){var e,n,r=this;return Eo(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=i.sent(),!e.map((function(t){return t.name})).includes("fcm_token_details_db"))return[2,null];i.label=2;case 2:return n=null,[4,RA("fcm_token_details_db",5,(function(e){return To(r,void 0,void 0,(function(){var r,i,o,s;return Eo(this,(function(a){switch(a.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains("fcm_token_object_Store")?[4,(r=e.transaction.objectStore("fcm_token_object_Store")).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,r.clear()];case 2:if(a.sent(),!i)return[2];if(2===e.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];n={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:EN(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(n={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:EN(o.auth),p256dh:EN(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:EN(o.vapidKey)}});return[2]}}))}))}))];case 3:return i.sent().close(),[4,xA("fcm_token_details_db")];case 4:return i.sent(),[4,xA("fcm_vapid_details_db")];case 5:return i.sent(),[4,xA("undefined")];case 6:return i.sent(),[2,kN(n)?n:null]}}))}))}function kN(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AN="firebase-messaging-store",NN=null;function PN(){return NN||(NN=RA("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(AN)}}))),NN}function RN(t){return To(this,void 0,void 0,(function(){var e,n,r;return Eo(this,(function(i){switch(i.label){case 0:return e=DN(t),[4,PN()];case 1:return[4,i.sent().transaction(AN).objectStore(AN).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,CN(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,xN(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function xN(t,e){return To(this,void 0,void 0,(function(){var n,r,i;return Eo(this,(function(o){switch(o.label){case 0:return n=DN(t),[4,PN()];case 1:return r=o.sent(),[4,(i=r.transaction(AN,"readwrite")).objectStore(AN).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function ON(t){return To(this,void 0,void 0,(function(){var e,n,r;return Eo(this,(function(i){switch(i.label){case 0:return e=DN(t),[4,PN()];case 1:return n=i.sent(),[4,(r=n.transaction(AN,"readwrite")).objectStore(AN).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function DN(t){return t.appConfig.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Eo(this,(function(u){switch(u.label){case 0:return[4,jN(t)];case 1:n=u.sent(),r=qN(e),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(UN(t.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw s=u.sent(),IN.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw a=o.error.message,IN.create("token-subscribe-failed",{errorInfo:a});if(!o.token)throw IN.create("token-subscribe-no-token");return[2,o.token]}}))}))}function MN(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Eo(this,(function(u){switch(u.label){case 0:return[4,jN(t)];case 1:n=u.sent(),r=qN(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(UN(t.appConfig)+"/"+e.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw s=u.sent(),IN.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw a=o.error.message,IN.create("token-update-failed",{errorInfo:a});if(!o.token)throw IN.create("token-update-no-token");return[2,o.token]}}))}))}function FN(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o,s;return Eo(this,(function(a){switch(a.label){case 0:return[4,jN(t)];case 1:n=a.sent(),r={method:"DELETE",headers:n},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(UN(t.appConfig)+"/"+e,r)];case 3:return[4,a.sent().json()];case 4:if((i=a.sent()).error)throw o=i.error.message,IN.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw s=a.sent(),IN.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function UN(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function jN(t){var e=t.appConfig,n=t.installations;return To(this,void 0,void 0,(function(){var t;return Eo(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function qN(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==TN&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o,s;return Eo(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw IN.create("permission-blocked");return[4,HN(e,n)];case 1:return r=a.sent(),[4,RN(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:EN(r.getKey("auth")),p256dh:EN(r.getKey("p256dh"))},i?[3,3]:[2,WN(t,o)];case 3:if(u=i.subscriptionOptions,l=(c=o).vapidKey===u.vapidKey,h=c.endpoint===u.endpoint,f=c.auth===u.auth,p=c.p256dh===u.p256dh,l&&h&&f&&p)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,FN(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,WN(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,KN({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l,h,f,p;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))}function BN(t,e){return To(this,void 0,void 0,(function(){var n,r;return Eo(this,(function(i){switch(i.label){case 0:return[4,RN(t)];case 1:return(n=i.sent())?[4,FN(t,n.token)]:[3,4];case 2:return i.sent(),[4,ON(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function KN(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o;return Eo(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,MN(e,t)];case 1:return r=s.sent(),i=Io(Io({},t),{token:r,createTime:Date.now()}),[4,xN(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,BN(e,n)];case 4:throw s.sent(),o;case 5:return[2]}}))}))}function WN(t,e){return To(this,void 0,void 0,(function(){var n,r;return Eo(this,(function(i){switch(i.label){case 0:return[4,LN(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,xN(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function HN(t,e){return To(this,void 0,void 0,(function(){var n;return Eo(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:SN(e)})]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function zN(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QN=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw IN.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return To(this,void 0,void 0,(function(){var n;return Eo(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,RN(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:TN,r.label=2;case 2:return[2,VN(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return BN(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw IN.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw IN.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw IN.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw IN.create("only-available-in-window")},t.prototype.onMessage=function(){throw IN.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw IN.create("only-available-in-window")},t.prototype.onPush=function(t){return To(this,void 0,void 0,(function(){var e,n,r,i;return Eo(this,(function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,JN()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,XN(n,e)]:(r=!1,e.notification?[4,ZN($N(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcm_message_id};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,GN(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return To(this,void 0,void 0,(function(){var r;return Eo(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,BN(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,RN(this.firebaseDependencies)];case 3:return r=i.sent(),[4,BN(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,VN(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:TN)];case 5:return i.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return To(this,void 0,void 0,(function(){var r,i,o,s,a;return Eo(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(i)return i;return zN(t.data)?self.location.origin:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,YN(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,GN(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=bN.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}}))}))},t}();function $N(t){var e,n=Io({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function YN(t){return To(this,void 0,void 0,(function(){var e,n,r,i,o,s,a;return Eo(this,(function(u){switch(u.label){case 0:return[4,JN()];case 1:e=u.sent();try{for(n=So(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}}))}))}function XN(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=bN.PUSH_RECEIVED;try{for(var i=So(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function JN(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function ZN(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var tP=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return To(this,void 0,void 0,(function(){var e,n;return Eo(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===bN.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),zN(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return To(this,void 0,void 0,(function(){return Eo(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw IN.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,VN(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return To(this,void 0,void 0,(function(){return Eo(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=TN),[2]}))}))},t.prototype.updateSwReg=function(t){return To(this,void 0,void 0,(function(){return Eo(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw IN.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return To(this,void 0,void 0,(function(){var t,e;return Eo(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),IN.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return To(this,void 0,void 0,(function(){return Eo(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,BN(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return To(this,void 0,void 0,(function(){var t;return Eo(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?IN.create("permission-blocked"):IN.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw IN.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw IN.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw IN.create("invalid-sw-registration");if(this.swRegistration)throw IN.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw IN.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw IN.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return To(this,void 0,void 0,(function(){var n;return Eo(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case bN.NOTIFICATION_CLICKED:return"notification_open";case bN.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function eP(t){return IN.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nP={isSupported:rP};function rP(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}zs.INTERNAL.registerComponent(new ys("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw eP("App Configuration Object");if(!t.name)throw eP("App Name");var r=t.options;try{for(var i=So(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw eP(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!rP())throw IN.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new QN(n):new tP(n)}),"PUBLIC").setServiceProps(nP));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var iP=function(t){function e(n,r){var i=t.call(this,oP(n),"Firebase Storage: "+r+" ("+oP(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return wo(e,t),e.prototype._codeEquals=function(t){return oP(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(Yo);function oP(t){return"storage/"+t}function sP(){return new iP("unknown","An unknown error occurred, please check the error payload for server response.")}function aP(){return new iP("canceled","User canceled the upload/download.")}function uP(){return new iP("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function cP(t){return new iP("invalid-argument",t)}function lP(){return new iP("app-deleted","The Firebase app was deleted.")}function hP(t){return new iP("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fP(t,e){return new iP("invalid-format","String does not match format '"+t+"': "+e)}function pP(t){throw new iP("internal-error","Internal error: "+t)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dP={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},vP=function(t,e){this.data=t,this.contentType=e||null};function gP(t,e){switch(t){case dP.RAW:return new vP(mP(e));case dP.BASE64:case dP.BASE64URL:return new vP(yP(t,e));case dP.DATA_URL:return new vP((n=new bP(e)).base64?yP(dP.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(aA){throw fP(dP.DATA_URL,"Malformed data URL.")}return mP(e)}(n.rest),function(t){return new bP(t).contentType}(e))}var n;throw sP()}function mP(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function yP(t,e){switch(t){case dP.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw fP(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case dP.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw fP(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(aA){throw fP(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var bP=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw fP(dP.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */};var _P,wP,IP={STATE_CHANGED:"state_changed"},TP={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function EP(t){switch(t){case"running":case"pausing":case"canceling":return TP.RUNNING;case"paused":return TP.PAUSED;case"success":return TP.SUCCESS;case"canceled":return TP.CANCELED;case"error":default:return TP.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(wP=_P||(_P={}))[wP.NO_ERROR=0]="NO_ERROR",wP[wP.NETWORK_ERROR=1]="NETWORK_ERROR",wP[wP.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var SP=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=_P.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=_P.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=_P.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw pP("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw pP("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw pP("cannot .getStatus() before sending");try{return this.xhr_.status}catch(aA){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw pP("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var CP=function(){function t(){}return t.prototype.createConnection=function(){return new SP},t}(),kP=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(aA){return new t(e,"")}if(""===r.path)return r;throw new iP("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.bucket],p=h[l.indices.path];p||(p=""),r=new t(f,p),l.postModify(r);break}}if(null==r)throw function(t){return new iP("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),AP=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t){return"string"==typeof t||t instanceof String}function PP(t){return RP()&&t instanceof Blob}function RP(){return"undefined"!=typeof Blob}function xP(t,e,n,r){if(r<e)throw cP("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw cP("Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function DP(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LP=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.connection;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(aA){o(aA)}else null!==s?((r=sP()).serverResponse=s.getResponseText(),t.errorCallback_?o(t.errorCallback_(s,r)):o(r)):n.canceled?o(r=t.appDelete_?lP():aP()):o(r=new iP("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new MP(!1,null,!0)):this.backoffId_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(h,a())}),e)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,ko([null,t],e));else{var i;a()||o?c.call.apply(c,ko([null,t],e)):(r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),l(i))}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(s=2),clearTimeout(i),l(0)):t||(s=1)))}return l(0),setTimeout((function(){o=!0,p(!0)}),n),p}((function(e,n){if(n)e(!1,new MP(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===_P.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new MP(s,r))}else{var a=r.getErrorCode()===_P.ABORT;e(!1,new MP(!1,null,a))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),MP=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function FP(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function UP(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=FP();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(RP())return new Blob(t);throw new iP("unsupported-environment","This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var jP=function(){function t(t,e){var n=0,r="";PP(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(PP(this.data_)){var r=this.data_,i=(s=e,a=n,(o=r).webkitSlice?o.webkitSlice(s,a):o.mozSlice?o.mozSlice(s,a):o.slice?o.slice(s,a):null);return null===i?null:new t(i)}var o,s,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(RP()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(UP.apply(null,r))}var i=e.map((function(t){return NP(t)?gP(dP.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t){var e,n;try{e=JSON.parse(t)}catch(aA){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(t,e){return e}var KP=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||BP},WP=null;function HP(){if(WP)return WP;var t=[];t.push(new KP("bucket")),t.push(new KP("generation")),t.push(new KP("metageneration")),t.push(new KP("name","fullPath",!0));var e=new KP("name");e.xform=function(t,e){return function(t){return!NP(t)||t.length<2?t:VP(t)}(e)},t.push(e);var n=new KP("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new KP("timeCreated")),t.push(new KP("updated")),t.push(new KP("md5Hash",null,!0)),t.push(new KP("cacheControl",null,!0)),t.push(new KP("contentDisposition",null,!0)),t.push(new KP("contentEncoding",null,!0)),t.push(new KP("contentLanguage",null,!0)),t.push(new KP("contentType",null,!0)),t.push(new KP("metadata","customMetadata",!0)),WP=t}function zP(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new kP(n,r);return e._makeStorageReference(i)}})}(r,t),r}function GP(t,e,n){var r=qP(e);return null===r?null:zP(t,r,n)}function QP(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t,e,n){var r=qP(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new kP(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];a=t._makeStorageReference(new kP(e,l.name)),r.items.push(a)}return r}(t,e,r)}var YP=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t){if(!t)throw sP()}function JP(t,e){return function(n,r){var i=GP(t,r,e);return XP(null!==i),i}}function ZP(t,e){return function(n,r){var i=GP(t,r,e);return XP(null!==i),function(t,e,n){var r=qP(e);if(null===r)return null;if(!NP(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return OP("/b/"+o(r)+"/o/"+o(i),n)+DP({alt:"media",token:e})}))[0]}(i,r,t.host)}}function tR(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new iP("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new iP("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new iP("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new iP("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function eR(t){var e=tR(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new iP("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function nR(t,e,n){var r=OP(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new YP(r,"GET",JP(t,n),i);return o.errorHandler=eR(e),o}function rR(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=OP(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new YP(s,"GET",function(t,e){return function(n,r){var i=$P(t,e,r);return XP(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=tR(e),u}function iR(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var oR=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function sR(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(aA){XP(!1)}return XP(!!n&&-1!==(e||["active"]).indexOf(n)),n}function aR(t,e,n,r,i,o,s,a){var u=new oR(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new iP("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(h,f);if(null===d)throw uP();var v=e.maxUploadRetryTime,g=new YP(n,"POST",(function(t,n){var i,s=sR(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?JP(e,o)(t,n):null,new oR(a,c,"final"===s,i)}),v);return g.headers=p,g.body=d.uploadData(),g.progressCallback=a||null,g.errorHandler=tR(t),g}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uR=function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lR=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=HP(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=iR(e,r,i),a={name:s.fullPath},u=OP(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=QP(s,n),h=t.maxUploadRetryTime,f=new YP(u,"POST",(function(t){var e;sR(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(aA){XP(!1)}return XP(NP(e)),e}),h);return f.urlParams=a,f.headers=c,f.body=l,f.errorHandler=tR(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new YP(n,"POST",(function(t){var e=sR(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(aA){XP(!1)}n||XP(!1);var i=Number(n);return XP(!isNaN(i)),new oR(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=tR(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new oR(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var s;try{s=aR(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(aA){return t._error=aA,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=nR(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=iR(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+QP(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+a+"--",h=jP.getBlob(c,r,l);if(null===h)throw uP();var f={name:u.fullPath},p=OP(o,t.host),d=t.maxUploadRetryTime,v=new YP(p,"POST",JP(t,n),d);return v.urlParams=f,v.headers=s,v.body=h.uploadData(),v.errorHandler=tR(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=aP(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=EP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new uR(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(EP(this._state)){case TP.SUCCESS:cR(this._resolve.bind(null,this.snapshot))();break;case TP.CANCELED:case TP.ERROR:cR(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(EP(this._state)){case TP.RUNNING:case TP.PAUSED:t.next&&cR(t.next.bind(t,this.snapshot))();break;case TP.SUCCESS:t.complete&&cR(t.complete.bind(t))();break;case TP.CANCELED:case TP.ERROR:t.error&&cR(t.error.bind(t,this._error))();break;default:t.error&&cR(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),hR=function(){function t(t,e){this._service=t,this._location=e instanceof kP?e:kP.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new kP(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return VP(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new kP(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw hP(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t){var e={prefixes:[],items:[]};return pR(t,e).then((function(){return e}))}function pR(t,e,n){return To(this,void 0,void 0,(function(){var r,i,o;return Eo(this,(function(s){switch(s.label){case 0:return[4,dR(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,pR(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function dR(t,e){return To(this,void 0,void 0,(function(){var n,r;return Eo(this,(function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&xP("options.maxResults",1,1e3,e.maxResults),n=e||{},r=rR(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function vR(t,e){return To(this,void 0,void 0,(function(){var n;return Eo(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=OP(e.fullServerUrl(),t.host),o=QP(n,r),s=t.maxOperationRetryTime,a=new YP(i,"PATCH",JP(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=eR(e),a}(t.storage,t._location,e,HP()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function gR(t){return To(this,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=OP(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new YP(r,"GET",ZP(t,n),i);return o.errorHandler=eR(e),o}(t.storage,t._location,HP()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new iP("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function mR(t){return To(this,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=OP(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new YP(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=eR(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function yR(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new kP(t._location.bucket,n);return new hR(t.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(t){return/^[A-Za-z]+:\/\//.test(t)}function _R(t,e){if(t instanceof TR){var n=t;if(null==n._bucket)throw new iP("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new hR(n,n._bucket);return null!=e?_R(r,e):r}return void 0!==e?yR(t,e):t}function wR(t,e){if(e&&bR(e)){if(t instanceof TR)return new hR(t,e);throw cP("To use ref(service, url), the first argument must be a Storage instance.")}return _R(t,e)}function IR(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:kP.makeFromBucketSpec(n,t)}var TR=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host="firebasestorage.googleapis.com",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?kP.makeFromBucketSpec(i,this._host):IR(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=kP.makeFromBucketSpec(this._url,t):this._bucket=IR(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){xP("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){xP("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return To(this,void 0,void 0,(function(){var t,e;return Eo(this,(function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return To(this,void 0,void 0,(function(){var t;return Eo(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear()),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new hR(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new AP(lP());var i=function(t,e,n,r,i,o){var s=DP(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new LP(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return To(this,void 0,void 0,(function(){var e,n,r;return Eo(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new lR(t,new jP(e),n)}(t=ms(t),e,n)}function SR(t){return function(t){return To(this,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=nR(t.storage,t._location,HP()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=ms(t))}function CR(t,e){return wR(t=ms(t),e)}function kR(t,e,n,r){void 0===r&&(r={}),function(t,e,n,r){void 0===r&&(r={}),t.host="http://"+e+":"+n;var i=r.mockUserToken;i&&(t._overrideAuthToken="string"==typeof i?i:qo(i,t.app.options.projectId))}(t,e,n,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AR=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),NR=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new AR(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new AR(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new AR(t,i,i._ref))}:{next:e.next?function(t){return e.next(new AR(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),PR=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new RR(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new RR(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),RR=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return yR(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new NR(ER(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=dP.RAW),this._throwIfRoot("putString");var r=gP(e,t),i=Io({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new NR(new lR(this._delegate,new jP(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,fR(t=ms(t))).then((function(t){return new PR(t,e.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return dR(t=ms(t),e)}(this._delegate,t||void 0).then((function(t){return new PR(t,e.storage)}))},t.prototype.getMetadata=function(){return SR(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return vR(t=ms(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return gR(ms(this._delegate))},t.prototype.delete=function(){return this._throwIfRoot("delete"),mR(ms(this._delegate))},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw hP(t)},t}(),xR=function(){function t(t,e){this.app=t,this._delegate=e}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(bR(t))throw cP("ref() expected a child path but got a URL, use refFromURL instead.");return new RR(CR(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!bR(t))throw cP("refFromURL() expected a full URL but got a child path, use ref() instead.");try{kP.makeFromUrl(t,this._delegate.host)}catch(aA){throw cP("refFromUrl() expected a valid full URL but got an invalid one.")}return new RR(CR(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),kR(this._delegate,t,e,n)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new xR(r,new TR(r,i,o,new CP,n,zs.SDK_VERSION))}!function(t){var e={TaskState:TP,TaskEvent:IP,StringFormat:dP,Storage:TR,Reference:RR};t.INTERNAL.registerComponent(new ys("storage",OR,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.7.0")}(zs);var DR,LR,MR,FR=((DR={})["trace started"]="Trace {$traceName} was started before.",DR["trace stopped"]="Trace {$traceName} is not running.",DR["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",DR["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",DR["no window"]="Window is not available.",DR["no app id"]="App id is not available.",DR["no project id"]="Project id is not available.",DR["no api key"]="Api key is not available.",DR["invalid cc log"]="Attempted to queue invalid cc event",DR["FB not default"]="Performance can only start when Firebase app instance is the default one.",DR["RC response not ok"]="RC response is not ok",DR["invalid attribute name"]="Attribute name {$attributeName} is invalid.",DR["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",DR["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",DR["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",DR),UR=new Xo("performance","Performance",FR),jR=new Rs("Performance");jR.logLevel=Ts.INFO;var qR,VR=function(){function t(t){if(this.window=t,!t)throw UR.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Go()||(jR.info("IndexedDB is not supported by current browswer"),!1):(jR.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===LR&&(LR=new t(MR)),LR},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function BR(t,e){var n=t.length-e.length;if(n<0||n>1)throw UR.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KR,WR,HR,zR=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=BR("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=BR("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw UR.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw UR.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw UR.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===qR&&(qR=new t),qR},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(){return KR}(HR=WR||(WR={}))[HR.UNKNOWN=0]="UNKNOWN",HR[HR.VISIBLE=1]="VISIBLE",HR[HR.HIDDEN=2]="HIDDEN";var QR=["firebase_","google_","ga_"],$R=new RegExp("^[a-zA-Z]\\w*$");function YR(){switch(VR.getInstance().document.visibilityState){case"visible":return WR.VISIBLE;case"hidden":return WR.HIDDEN;default:return WR.UNKNOWN}}function XR(){var t=VR.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var JR=!0;function ZR(t){var e=function(){var t=VR.getInstance().localStorage;if(!t)return;var e=t.getItem("@firebase/performance/configexpire");if(!(e&&(n=e,Number(n)>Date.now())))return;var n;var r=t.getItem("@firebase/performance/config");if(!r)return;try{return JSON.parse(r)}catch(i){return}}();return e?(tx(e),Promise.resolve()):function(t){return(e=zR.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+zR.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+zR.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:zR.getInstance().getAppId(),app_version:"0.4.18",sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw UR.create("RC response not ok")}))})).catch((function(){jR.info("Could not fetch config, will use default configs")}));var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(t).then(tx).then((function(t){return function(t){var e=VR.getInstance().localStorage;if(!t||!e)return;e.setItem("@firebase/performance/config",JSON.stringify(t)),e.setItem("@firebase/performance/configexpire",String(Date.now()+60*zR.getInstance().configTimeToLive*60*1e3))}(t)}),(function(){}))}function tx(t){if(!t)return t;var e=zR.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=JR,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=ex(e.tracesSamplingRate),e.logNetworkAfterSampling=ex(e.networkRequestsSamplingRate),t}function ex(t){return Math.random()<=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nx,rx=1;function ix(){var t;return rx=2,nx=nx||(t=VR.getInstance().document,new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))).then((function(){return(t=zR.getInstance().installationsService.getId()).then((function(t){KR=t})),t;var t})).then((function(t){return ZR(t)})).then((function(){return ox()}),(function(){return ox()}))}function ox(){rx=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sx,ax=3,ux=[],cx=!1;function lx(t){setTimeout((function(){var t,e;if(0!==ax)return ux.length?(t=ux.splice(0,1e3),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(t,e){return function(t){var e=zR.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||jR.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=1e4;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(ux=ko(ko([],e),ux),jR.info("Retry transport request later.")),ax=3,lx(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:zR.getInstance().logSource,log_event:e},t).catch((function(){ux=ko(ko([],t),ux),ax--,jR.info("Tries left: "+ax+"."),lx(1e4)}))):lx(1e4)}),t)}function hx(t){if(!t.eventTime||!t.message)throw UR.create("invalid cc log");ux=ko(ko([],ux),[t])}function fx(t,e){var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sx||(n=vx,sx=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];hx({message:n.apply(void 0,t),eventTime:Date.now()})}),sx(t,e)}function px(t){var e=zR.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&VR.getInstance().requiredApisAvailable()&&(t.isAuto&&YR()!==WR.VISIBLE||(3===rx?dx(t):ix().then((function(){return dx(t)}),(function(){return dx(t)}))))}function dx(t){if(GR()){var e=zR.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return fx(t,1)}),0)}}function vx(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:gx(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:gx(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function gx(){return{google_app_id:zR.getInstance().getAppId(),app_instance_id:GR(),web_app_info:{sdk_version:"0.4.18",page_url:VR.getInstance().getUrl(),service_worker_status:(t=VR.getInstance().navigator,"serviceWorker"in t?t.serviceWorker.controller?2:3:1),visibility_state:YR(),effective_connection_type:XR()},application_process_state:0};var t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mx=["_fp","_fcp","_fid"];
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var yx=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=VR.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw UR.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw UR.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),px(this)},t.prototype.record=function(t,e,n){if(t<=0)throw UR.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw UR.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Io({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}px(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(i=t,o=this.name,0===i.length||i.length>100||!(o&&o.startsWith("_wt_")&&mx.indexOf(i)>-1)&&i.startsWith("_"))throw UR.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&jR.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||QR.some((function(t){return n.startsWith(t)}))||!n.match($R)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw UR.create("invalid attribute name",{attributeName:t});if(!i)throw UR.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Io({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=VR.getInstance().getUrl();if(i){var o=new t("_wt_"+i,!0),s=Math.floor(1e3*VR.getInstance().getTimeOrigin());o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var a=n.find((function(t){return"first-paint"===t.name}));a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric("_fcp",Math.floor(1e3*u.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}px(o)}},t.createUserTimingTrace=function(e){px(new t(e,!1,e))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t){var e=t;if(e&&void 0!==e.responseStart){var n=VR.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=zR.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return fx(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(){GR()&&(setTimeout((function(){return function(){var t=VR.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){yx.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),yx.createOobTrace(e,n,t))}))}else yx.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=VR.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){bx(r[n])}t.setupObserver("resource",bx)}()}),0),setTimeout((function(){return function(){for(var t=VR.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){wx(r[n])}t.setupObserver("measure",wx)}()}),0))}function wx(t){var e=t.name;"FB-PERF-TRACE-MEASURE"!==e.substring(0,"FB-PERF-TRACE-MEASURE".length)&&yx.createUserTimingTrace(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ix=function(){function t(t){this.app=t,VR.getInstance().requiredApisAvailable()&&Qo().then((function(t){t&&(cx||(lx(5500),cx=!0),ix().then(_x,_x))})).catch((function(t){jR.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new yx(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return zR.getInstance().instrumentationEnabled},set:function(t){zR.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return zR.getInstance().dataCollectionEnabled},set:function(t){zR.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){var e=function(t,e){if("[DEFAULT]"!==t.name)throw UR.create("FB not default");if("undefined"==typeof window)throw UR.create("no window");var n;return n=window,MR=n,zR.getInstance().firebaseAppInstance=t,zR.getInstance().installationsService=e,new Ix(t)};t.INTERNAL.registerComponent(new ys("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion("@firebase/performance","0.4.18")}(zs);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Tx,Ex,Sx,Cx,kx="https://www.googletagmanager.com/gtag/js";(Ex=Tx||(Tx={})).EVENT="event",Ex.SET="set",Ex.CONFIG="config",(Cx=Sx||(Sx={})).ADD_SHIPPING_INFO="add_shipping_info",Cx.ADD_PAYMENT_INFO="add_payment_info",Cx.ADD_TO_CART="add_to_cart",Cx.ADD_TO_WISHLIST="add_to_wishlist",Cx.BEGIN_CHECKOUT="begin_checkout",Cx.CHECKOUT_PROGRESS="checkout_progress",Cx.EXCEPTION="exception",Cx.GENERATE_LEAD="generate_lead",Cx.LOGIN="login",Cx.PAGE_VIEW="page_view",Cx.PURCHASE="purchase",Cx.REFUND="refund",Cx.REMOVE_FROM_CART="remove_from_cart",Cx.SCREEN_VIEW="screen_view",Cx.SEARCH="search",Cx.SELECT_CONTENT="select_content",Cx.SELECT_ITEM="select_item",Cx.SELECT_PROMOTION="select_promotion",Cx.SET_CHECKOUT_OPTION="set_checkout_option",Cx.SHARE="share",Cx.SIGN_UP="sign_up",Cx.TIMING_COMPLETE="timing_complete",Cx.VIEW_CART="view_cart",Cx.VIEW_ITEM="view_item",Cx.VIEW_ITEM_LIST="view_item_list",Cx.VIEW_PROMOTION="view_promotion",Cx.VIEW_SEARCH_RESULTS="view_search_results";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ax,Nx=new Rs("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t,e,n,r,i,o){return To(this,void 0,void 0,(function(){var s,a,u,c;return Eo(this,(function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),(u=a.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),Nx.error(c),[3,8];case 8:return t(Tx.CONFIG,i,o),[2]}}))}))}function Rx(t,e,n,r,i){return To(this,void 0,void 0,(function(){var o,s,a,u,c,l,h,f;return Eo(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=p.sent(),u=function(t){var n=a.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=s;c<l.length&&(h=l[c],"break"!==u(h));c++);p.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return p.sent(),t(Tx.EVENT,r,i||{}),[3,5];case 4:return f=p.sent(),Nx.error(f),[3,5];case 5:return[2]}}))}))}function xx(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return To(this,void 0,void 0,(function(){var a;return Eo(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==Tx.EVENT?[3,2]:[4,Rx(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==Tx.CONFIG?[3,4]:[4,Px(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(Tx.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),Nx.error(a),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}var Ox=((Ax={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Ax["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Ax["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Ax["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Ax["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Ax["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Ax["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Ax["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Ax["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Ax),Dx=new Xo("analytics","Analytics",Ox),Lx=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function Mx(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function Fx(t){var e;return To(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Eo(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:Mx(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(s=c.sent()).status||304===s.status)return[3,6];a="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,s.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(a=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw Dx.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a});case 6:return[2,s.json()]}}))}))}function Ux(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=Lx),To(this,void 0,void 0,(function(){var e,s,a,u,c,l,h;return Eo(this,(function(f){switch(f.label){case 0:e=t.appId,s=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,jx(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return Nx.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,Fx(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof Yo&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),s)return Nx.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return l=503===Number(c.customData.httpStatus)?gs(o,r.intervalMillis,30):gs(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),Nx.debug("Calling attemptFetch again in "+l+" millis"),[2,Ux(t,h,n,r)];case 7:return[2]}}))}))}function jx(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Dx.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var qx=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(t,e,n,r,i,o){return To(this,void 0,void 0,(function(){var s,a,u,c,l,h,f;return Eo(this,(function(p){switch(p.label){case 0:return(s=function(t,e,n){return void 0===e&&(e=Lx),To(this,void 0,void 0,(function(){var r,i,o,s,a,u,c=this;return Eo(this,(function(l){if(r=t.options,i=r.appId,o=r.apiKey,s=r.measurementId,!i)throw Dx.create("no-app-id");if(!o){if(s)return[2,{measurementId:s,appId:i}];throw Dx.create("no-api-key")}return a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new qx,setTimeout((function(){return To(c,void 0,void 0,(function(){return Eo(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,Ux({appId:i,apiKey:o,measurementId:s},a,u,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Nx.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return Nx.error(t)})),e.push(s),a=function(){return To(this,void 0,void 0,(function(){var t;return Eo(this,(function(e){switch(e.label){case 0:return Go()?[3,1]:(Nx.warn(Dx.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Qo()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),Nx.warn(Dx.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([s,a])];case 1:return u=p.sent(),c=u[0],l=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(kx))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()||function(t,e){var n=document.createElement("script");n.src=kx+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(Tx.CONFIG,c.measurementId,h),[2,c.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bx,Kx,Wx={},Hx=[],zx={},Gx="dataLayer",Qx="gtag",$x=!1;function Yx(t){if($x)throw Dx.create("already-initialized");t.dataLayerName&&(Gx=t.dataLayerName),t.gtagName&&(Qx=t.gtagName)}function Xx(t,e){!function(){var t=[];if(Wo()&&t.push("This is a browser extension environment."),$o()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=Dx.create("invalid-analytics-context",{errorInfo:e});Nx.warn(n.message)}}();var n,r,i=t.options.appId;if(!i)throw Dx.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Dx.create("no-api-key");Nx.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Wx[i])throw Dx.create("already-exists",{id:i});if(!$x){n=Gx,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=xx(Wx,Hx,zx,Gx,Qx),s=o.wrappedGtag,a=o.gtagCore;Kx=s,Bx=a,$x=!0}return Wx[i]=Vx(t,Hx,zx,e,Bx,Gx),{app:t,logEvent:function(t,e,n){(
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n,r,i){return To(this,void 0,void 0,(function(){var o,s;return Eo(this,(function(a){switch(a.label){case 0:return i&&i.global?(t(Tx.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=Io(Io({},r),{send_to:o}),t(Tx.EVENT,n,s),a.label=3;case 3:return[2]}}))}))})(Kx,Wx[i],t,e,n).catch((function(t){return Nx.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return To(this,void 0,void 0,(function(){var i;return Eo(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(Tx.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(Tx.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(Kx,Wx[i],t,e).catch((function(t){return Nx.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return To(this,void 0,void 0,(function(){var i;return Eo(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(Tx.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(Tx.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(Kx,Wx[i],t,e).catch((function(t){return Nx.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return To(this,void 0,void 0,(function(){var i,o,s,a,u;return Eo(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)a=s[o],i["user_properties."+a]=n[a];return t(Tx.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(Tx.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(Kx,Wx[i],t,e).catch((function(t){return Nx.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return To(this,void 0,void 0,(function(){var n;return Eo(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(Wx[i],t).catch((function(t){return Nx.error(t)}))},INTERNAL:{delete:function(){return delete Wx[i],Promise.resolve()}}}}function Jx(){return To(this,void 0,void 0,(function(){return Eo(this,(function(t){switch(t.label){case 0:if(Wo())return[2,!1];if(!$o())return[2,!1];if(!Go())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Qo()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t.INTERNAL.registerComponent(new ys("analytics",(function(t){return Xx(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:Yx,EventName:Sx,isSupported:Jx})),t.INTERNAL.registerComponent(new ys("analytics-internal",(function(t){try{return{logEvent:t.getProvider("analytics").getImmediate().logEvent}}catch(aA){throw Dx.create("interop-component-reg-failed",{reason:aA})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.18")}(zs);var Zx,tO=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return To(this,void 0,void 0,(function(){var e,n,r,i,o;return Eo(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}}))}))},t}(),eO=((Zx={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Zx["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Zx["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Zx["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Zx["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Zx["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Zx["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Zx["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Zx["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Zx["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Zx["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Zx["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Zx["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Zx),nO=new Xo("remoteconfig","Remote Config",eO);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var rO=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return To(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,l,h,f,p,d,v,g,m,y,b;return Eo(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=_.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:s,body:JSON.stringify(a)},c=fetch(o,u),l=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return _.sent(),[4,c];case 4:return h=_.sent(),[3,6];case 5:throw f=_.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),nO.create(p,{originalErrorMessage:f.message});case 6:if(d=h.status,v=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];y=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,h.json()];case 8:return y=_.sent(),[3,10];case 9:throw b=_.sent(),nO.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:g=y.entries,m=y.state,_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?d=500:"NO_CHANGE"===m?d=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(g={}),304!==d&&200!==d)throw nO.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:g}]}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w}))}))},t}(),iO=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),oO=["1","true","t","yes","y","on"],sO=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&oO.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),aO=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Ts.DEBUG;break;case"silent":this._logger.logLevel=Ts.SILENT;break;default:this._logger.logLevel=Ts.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return To(this,void 0,void 0,(function(){var t,e,n;return Eo(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return To(this,void 0,void 0,(function(){var t,e,n,r=this;return Eo(this,(function(i){switch(i.label){case 0:t=new iO,setTimeout((function(){return To(r,void 0,void 0,(function(){return Eo(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof Yo&&-1!==t.code.indexOf(e)}(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return To(this,void 0,void 0,(function(){return Eo(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(Io(Io({},t),e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new sO("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new sO("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new sO("static"))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(t,e){var n=t.target.error||void 0;return nO.create(e,{originalErrorMessage:n&&n.message})}var cO=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(uO(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return To(this,void 0,void 0,(function(){var e,n=this;return Eo(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(uO(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(aA){i(nO.create("storage-get",{originalErrorMessage:aA&&aA.message}))}}))]}}))}))},t.prototype.set=function(t,e){return To(this,void 0,void 0,(function(){var n,r=this;return Eo(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var s=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(uO(t,"storage-set"))},u.onsuccess=function(){i()}}catch(aA){o(nO.create("storage-set",{originalErrorMessage:aA&&aA.message}))}}))]}}))}))},t.prototype.delete=function(t){return To(this,void 0,void 0,(function(){var e,n=this;return Eo(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(uO(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(aA){i(nO.create("storage-delete",{originalErrorMessage:aA&&aA.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),lO=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return To(this,void 0,void 0,(function(){var t,e,n,r,i,o;return Eo(this,(function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function hO(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(nO.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var fO,pO,dO=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return To(this,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return To(this,void 0,void 0,(function(){var e,i,o;return Eo(this,(function(s){switch(s.label){case 0:return[4,hO(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof Yo&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+gs(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),vO="@firebase/remote-config";(fO=zs).INTERNAL.registerComponent(new ys("remoteConfig",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw nO.create("registration-window");var o=r.options,s=o.projectId,a=o.apiKey,u=o.appId;if(!s)throw nO.create("registration-project-id");if(!a)throw nO.create("registration-api-key");if(!u)throw nO.create("registration-app-id");n=n||"firebase";var c=new cO(u,r.name,n),l=new lO(c),h=new Rs(vO);h.logLevel=Ts.ERROR;var f=new rO(i,fO.SDK_VERSION,n,s,a,u),p=new dO(f,c),d=new tO(p,c,l,h),v=new aO(r,d,l,c,h);return v.ensureInitialized(),v}),"PUBLIC").setMultipleInstances(!0)),fO.registerVersion(vO,"0.1.43");var gO=((pO={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",pO["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",pO["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",pO["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",pO["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",pO["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",pO["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",pO["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",pO["recaptcha-error"]="ReCAPTCHA error.",pO),mO=new Xo("appCheck","AppCheck",gO),yO=new Map,bO={activated:!1,tokenObservers:[]},_O={enabled:!1};function wO(t){return yO.get(t)||bO}function IO(t,e){yO.set(t,e)}function TO(){return _O}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EO="https://content-firebaseappcheck.googleapis.com/v1beta",SO=3e4,CO=96e4,kO=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return To(this,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new jo,[4,(r=this.getNextRun(t),new Promise((function(t){setTimeout(t,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new jo,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function AO(){return self.grecaptcha}function NO(t){if(!wO(t).activated)throw mO.create("use-before-activation",{appName:t.name})}function PO(t){return Oo.encodeString(JSON.stringify(t),!1)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(t,e){var n=t.url,r=t.body;return To(this,void 0,void 0,(function(){var t,i,o,s,a,u,c,l,h,f;return Eo(this,(function(p){switch(p.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),o={method:"POST",body:JSON.stringify(r),headers:t},p.label=1;case 1:return p.trys.push([1,3,,4]),[4,fetch(n,o)];case 2:return s=p.sent(),[3,4];case 3:throw a=p.sent(),mO.create("fetch-network-error",{originalErrorMessage:a.message});case 4:if(200!==s.status)throw mO.create("fetch-status-error",{httpStatus:s.status});p.label=5;case 5:return p.trys.push([5,7,,8]),[4,s.json()];case 6:return u=p.sent(),[3,8];case 7:throw c=p.sent(),mO.create("fetch-parse-error",{originalErrorMessage:c.message});case 8:if(!(l=u.ttl.match(/^([\d.]+)(s)$/))||!l[2]||isNaN(Number(l[1])))throw mO.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+u.ttl});return h=1e3*Number(l[1]),f=Date.now(),[2,{token:u.attestationToken,expireTimeMillis:f+h,issuedAtTimeMillis:f}]}}))}))}function xO(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:EO+"/projects/"+r+"/apps/"+i+":exchangeRecaptchaToken?key="+o,body:{recaptcha_token:e}}}function OO(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:EO+"/projects/"+r+"/apps/"+i+":exchangeDebugToken?key="+o,body:{debug_token:e}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DO="firebase-app-check-store",LO=null;function MO(){return LO||(LO=new Promise((function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(mO.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(DO,{keyPath:"compositeKey"})}}}catch(aA){e(mO.create("storage-open",{originalErrorMessage:aA.message}))}})))}function FO(t){return jO(qO(t))}function UO(t,e){return To(this,void 0,void 0,(function(){var n,r,i,o;return Eo(this,(function(s){switch(s.label){case 0:return[4,MO()];case 1:return n=s.sent(),r=n.transaction(DO,"readwrite"),i=r.objectStore(DO),o=i.put({compositeKey:t,value:e}),[2,new Promise((function(t,e){o.onsuccess=function(e){t()},r.onerror=function(t){var n;e(mO.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function jO(t){return To(this,void 0,void 0,(function(){var e,n,r,i;return Eo(this,(function(o){switch(o.label){case 0:return[4,MO()];case 1:return e=o.sent(),n=e.transaction(DO,"readonly"),r=n.objectStore(DO),i=r.get(t),[2,new Promise((function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(mO.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function qO(t){return t.options.appId+"-"+t.name}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VO=new Rs("@firebase/app-check");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(t,e){return Go()?function(t,e){return UO(qO(t),e)}(t,e).catch((function(t){VO.warn("Failed to write token to indexeddb. Error: "+t)})):Promise.resolve()}function KO(){return To(this,void 0,void 0,(function(){var t,e;return Eo(this,(function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,jO("debug-token")];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),(r=e,UO("debug-token",r)).catch((function(t){return VO.warn("Failed to persist debug token to indexeddb. Error: "+t)})),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(){return To(this,void 0,void 0,(function(){var t;return Eo(this,(function(e){if((t=TO()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var HO={error:"UNKNOWN_ERROR"};function zO(t,e,n){return void 0===n&&(n=!1),To(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f;return Eo(this,(function(p){switch(p.label){case 0:return NO(t),r=wO(t),i=r.token,o=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:(s=p.sent())&&YO(s)&&(i=s,IO(t,Io(Io({},r),{token:i})),$O(t,{token:i.token})),p.label=2;case 2:return!n&&i&&YO(i)?[2,{token:i.token}]:TO().enabled?(u=RO,c=OO,l=[t],[4,WO()]):[3,6];case 3:return[4,u.apply(void 0,[c.apply(void 0,l.concat([p.sent()])),e])];case 4:return a=p.sent(),[4,BO(t,a)];case 5:return p.sent(),IO(t,Io(Io({},r),{token:a})),[2,{token:a.token}];case 6:return p.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=p.sent(),[3,9];case 8:return h=p.sent(),VO.error(h),o=h,[3,9];case 9:return i?[3,10]:(f=function(t){return{token:PO(HO),error:t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(o),[3,12]);case 10:return f={token:i.token},IO(t,Io(Io({},r),{token:i})),[4,BO(t,i)];case 11:p.sent(),p.label=12;case 12:return $O(t,f),[2,f]}}))}))}function GO(t,e,n,r,i){var o=wO(t),s={next:r,error:i,type:n},a=Io(Io({},o),{tokenObservers:ko(ko([],o.tokenObservers),[s])});if(!a.tokenRefresher){var u=function(t,e){var n=this;return new kO((function(){return To(n,void 0,void 0,(function(){var n;return Eo(this,(function(r){switch(r.label){case 0:return wO(t).token?[3,2]:[4,zO(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,zO(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){var e=wO(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5,r=e.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),SO,CO)}(t,e);a.tokenRefresher=u}if(!a.tokenRefresher.isRunning()&&o.isTokenAutoRefreshEnabled&&a.tokenRefresher.start(),o.token&&YO(o.token)){var c=o.token;Promise.resolve().then((function(){return r({token:c.token})})).catch((function(){}))}else null==o.token&&o.cachedTokenPromise.then((function(t){t&&YO(t)&&r({token:t.token})})).catch((function(){}));IO(t,a)}function QO(t,e){var n=wO(t),r=n.tokenObservers.filter((function(t){return t.next!==e}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),IO(t,Io(Io({},n),{tokenObservers:r}))}function $O(t,e){for(var n=0,r=wO(t).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(o){}}}function YO(t){return t.expireTimeMillis-Date.now()>0}function XO(t,e){var n=wO(t),r=new jo;IO(t,Io(Io({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,o=document.createElement("div");o.id=i,o.style.display="none",document.body.appendChild(o);var s,a,u=AO();return u?u.ready((function(){ZO(t,e,u,i),r.resolve(u)})):(s=function(){var n=AO();if(!n)throw new Error("no recaptcha");n.ready((function(){ZO(t,e,n,i),r.resolve(n)}))},(a=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",a.onload=s,document.head.appendChild(a)),r.promise}function JO(t){return To(this,void 0,void 0,(function(){var e;return Eo(this,(function(n){switch(n.label){case 0:return NO(t),[4,wO(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise((function(n,r){var i=wO(t).reCAPTCHAState;e.ready((function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function ZO(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),o=wO(t);IO(t,Io(Io({},o),{reCAPTCHAState:Io(Io({},o.reCAPTCHAState),{widgetId:i})}))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var tD=function(){function t(t){this._siteKey=t}return t.prototype.getToken=function(){return To(this,void 0,void 0,(function(){var t;return Eo(this,(function(e){switch(e.label){case 0:if(!this._app||!this._platformLoggerProvider)throw mO.create("use-before-activation",{appName:""});e.label=1;case 1:return e.trys.push([1,3,,4]),[4,JO(this._app)];case 2:return t=e.sent(),[3,4];case 3:throw e.sent(),mO.create("recaptcha-error");case 4:return[2,RO(xO(this._app,t),this._platformLoggerProvider)]}}))}))},t.prototype.initialize=function(t,e){this._app=t,this._platformLoggerProvider=e,XO(t,this._siteKey).catch((function(){}))},t}(),eD=function(){function t(t){this._customProviderOptions=t}return t.prototype.getToken=function(){return To(this,void 0,void 0,(function(){var t,e,n;return Eo(this,(function(r){switch(r.label){case 0:if(!this._app)throw mO.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return t=r.sent(),i=t.token,o=ns(i).claims,e="object"==typeof o&&o.hasOwnProperty("iat")?o.iat:null,n=null!==e&&e<Date.now()&&e>0?1e3*e:Date.now(),[2,Io(Io({},t),{issuedAtTimeMillis:n})]}var i,o}))}))},t.prototype.initialize=function(t){this._app=t},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function nD(t,e,n,r){var i=wO(t);if(i.activated)throw mO.create("already-activated",{appName:t.name});var o=Io(Io({},i),{activated:!0});o.cachedTokenPromise=function(t){return To(this,void 0,void 0,(function(){var e,n;return Eo(this,(function(r){switch(r.label){case 0:if(!Go())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,FO(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),VO.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}}))}))}(t).then((function(e){return e&&YO(e)&&IO(t,Io(Io({},wO(t)),{token:e})),e})),o.provider="string"==typeof e?new tD(e):e instanceof tD||e instanceof eD?e:new eD({getToken:e.getToken}),o.isTokenAutoRefreshEnabled=void 0===r?t.automaticDataCollectionEnabled:r,IO(t,o),o.provider.initialize(t,n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function rD(t,e){return{app:t,activate:function(n,r){return nD(t,n,e,r)},setTokenAutoRefreshEnabled:function(e){return function(t,e){var n=wO(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),IO(t,Io(Io({},n),{isTokenAutoRefreshEnabled:e}))}(t,e)},getToken:function(n){return function(t,e,n){return To(this,void 0,void 0,(function(){var r;return Eo(this,(function(i){switch(i.label){case 0:return[4,zO(t,e,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(t,e,n)},onTokenChanged:function(n,r,i){return function(t,e,n,r,i){var o=function(){},s=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?s=n.error.bind(n):r&&(s=r),GO(t,e,"EXTERNAL",o,s),function(){return QO(t,o)}}(t,e,n,r)},INTERNAL:{delete:function(){for(var e=0,n=wO(t).tokenObservers;e<n.length;e++){var r=n[e];QO(t,r.next)}return Promise.resolve()}}}}!function(t){t.INTERNAL.registerComponent(new ys("appCheck",(function(t){return rD(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setServiceProps({ReCaptchaV3Provider:tD,CustomProvider:eD}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){t.getProvider("app-check-internal").initialize()}))),t.INTERNAL.registerComponent(new ys("app-check-internal",(function(t){return function(t,e){return{getToken:function(n){return zO(t,e,n)},addTokenListener:function(n){return GO(t,e,"INTERNAL",n)},removeTokenListener:function(e){return QO(t,e)}}}(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.3.2")}(zs),function(){var t=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}();if("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=TO();e.enabled=!0;var n=new jo;e.token=n,"string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(KO())}}();
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
zs.registerVersion("firebase","8.10.0","app"),zs.SDK_VERSION="8.10.0";function iD(){return"undefined"!=typeof navigator?window:"undefined"!=typeof global?global:{}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),zs.registerVersion("firebase","8.10.0");function oD(t,e){const n=iD().__VUE_DEVTOOLS_GLOBAL_HOOK__;if(n)n.emit("devtools-plugin:setup",t,e);else{const n=iD();(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:t,setupFn:e})}}
/*!
  * vue-router v4.0.11
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const sD="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,aD=t=>sD?Symbol(t):"_vr_"+t,uD=aD("rvlm"),cD=aD("rvd"),lD=aD("r"),hD=aD("rl"),fD=aD("rvl"),pD="undefined"!=typeof window;const dD=Object.assign;function vD(t,e){const n={};for(const r in e){const i=e[r];n[r]=Array.isArray(i)?i.map(t):t(i)}return n}const gD=()=>{},mD=/\/$/;function yD(t,e,n="/"){let r,i={},o="",s="";const a=e.indexOf("?"),u=e.indexOf("#",a>-1?a:0);return a>-1&&(r=e.slice(0,a),o=e.slice(a+1,u>-1?u:e.length),i=t(o)),u>-1&&(r=r||e.slice(0,u),s=e.slice(u,e.length)),r=function(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let i,o,s=n.length-1;for(i=0;i<r.length;i++)if(o=r[i],1!==s&&"."!==o){if(".."!==o)break;s--}return n.slice(0,s).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}(null!=r?r:e,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:s}}function bD(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function _D(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function wD(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!ID(t[n],e[n]))return!1;return!0}function ID(t,e){return Array.isArray(t)?TD(t,e):Array.isArray(e)?TD(e,t):t===e}function TD(t,e){return Array.isArray(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}var ED,SD,CD,kD;function AD(t){if(!t)if(pD){const e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),t.replace(mD,"")}(SD=ED||(ED={})).pop="pop",SD.push="push",(kD=CD||(CD={})).back="back",kD.forward="forward",kD.unknown="";const ND=/^[^#]+#/;function PD(t,e){return t.replace(ND,"#")+e}const RD=()=>({left:window.pageXOffset,top:window.pageYOffset});function xD(t){let e;if("el"in t){const n=t.el,r="string"==typeof n&&n.startsWith("#"),i="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=function(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function OD(t,e){return(history.state?history.state.position-e:-1)+t}const DD=new Map;function LD(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let e=i.includes(t.slice(o))?t.slice(o).length:1,n=i.slice(e);return"/"!==n[0]&&(n="/"+n),bD(n,"")}return bD(n,t)+r+i}function MD(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?RD():null}}function FD(t){const{history:e,location:n}=window,r={value:LD(t,n)},i={value:e.state};function o(r,o,s){const a=t.indexOf("#"),u=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+r:location.protocol+"//"+location.host+t+r;try{e[s?"replaceState":"pushState"](o,"",u),i.value=o}catch(c){console.error(c),n[s?"replace":"assign"](u)}}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:function(t,n){const s=dD({},i.value,e.state,{forward:t,scroll:RD()});o(s.current,s,!0),o(t,dD({},MD(r.value,t,null),{position:s.position+1},n),!1),r.value=t},replace:function(t,n){o(t,dD({},e.state,MD(i.value.back,t,i.value.forward,!0),n,{position:i.value.position}),!0),r.value=t}}}function UD(t){const e=FD(t=AD(t)),n=function(t,e,n,r){let i=[],o=[],s=null;const a=({state:o})=>{const a=LD(t,location),u=n.value,c=e.value;let l=0;if(o){if(n.value=a,e.value=o,s&&s===u)return void(s=null);l=c?o.position-c.position:0}else r(a);i.forEach((t=>{t(n.value,u,{delta:l,type:ED.pop,direction:l?l>0?CD.forward:CD.back:CD.unknown})}))};function u(){const{history:t}=window;t.state&&t.replaceState(dD({},t.state,{scroll:RD()}),"")}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:function(){s=n.value},listen:function(t){i.push(t);const e=()=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)};return o.push(e),e},destroy:function(){for(const t of o)t();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}}}(t,e.state,e.location,e.replace);const r=dD({location:"",base:t,go:function(t,e=!0){e||n.pauseListeners(),history.go(t)},createHref:PD.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function jD(t){return"string"==typeof t||"symbol"==typeof t}const qD={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},VD=aD("nf");var BD,KD;function WD(t,e){return dD(new Error,{type:t,[VD]:!0},e)}function HD(t,e){return t instanceof Error&&VD in t&&(null==e||!!(t.type&e))}(KD=BD||(BD={}))[KD.aborted=4]="aborted",KD[KD.cancelled=8]="cancelled",KD[KD.duplicated=16]="duplicated";const zD={sensitive:!1,strict:!1,start:!0,end:!0},GD=/[.+*?^${}()[\]/\\]/g;function QD(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function $D(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const t=QD(r[n],i[n]);if(t)return t;n++}return i.length-r.length}const YD={type:0,value:""},XD=/[a-zA-Z0-9_]/;function JD(t,e,n){const r=function(t,e){const n=dD({},zD,e),r=[];let i=n.start?"^":"";const o=[];for(const u of t){const t=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let e=0;e<u.length;e++){const r=u[e];let s=40+(n.sensitive?.25:0);if(0===r.type)e||(i+="/"),i+=r.value.replace(GD,"\\$&"),s+=40;else if(1===r.type){const{value:t,repeatable:n,optional:c,regexp:l}=r;o.push({name:t,repeatable:n,optional:c});const h=l||"[^/]+?";if("[^/]+?"!==h){s+=10;try{new RegExp(`(${h})`)}catch(a){throw new Error(`Invalid custom RegExp for param "${t}" (${h}): `+a.message)}}let f=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;e||(f=c&&u.length<2?`(?:/${f})`:"/"+f),c&&(f+="?"),i+=f,s+=20,c&&(s+=-8),n&&(s+=-20),".*"===h&&(s+=-50)}t.push(s)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");return{re:s,score:r,keys:o,parse:function(t){const e=t.match(s),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",i=o[r-1];n[i.name]=t&&i.repeatable?t.split("/"):t}return n},stringify:function(e){let n="",r=!1;for(const i of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of i)if(0===t.type)n+=t.value;else if(1===t.type){const{value:o,repeatable:s,optional:a}=t,u=o in e?e[o]:"";if(Array.isArray(u)&&!s)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const c=Array.isArray(u)?u.join("/"):u;if(!c){if(!a)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=c}}return n}}}(function(t){if(!t)return[[]];if("/"===t)return[[YD]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${c}": ${t}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let a,u=0,c="",l="";function h(){c&&(0===n?o.push({type:0,value:c}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:l,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),c="")}function f(){c+=a}for(;u<t.length;)if(a=t[u++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(c&&h(),s()):":"===a?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:"("===a?n=2:XD.test(a)?f():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--);break;case 2:")"===a?"\\"==l[l.length-1]?l=l.slice(0,-1)+a:n=3:l+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--,l="";break;default:e("Unknown state")}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${c}"`),h(),s(),i}(t.path),n),i=dD(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function ZD(t,e){const n=[],r=new Map;function i(t,n,r){const a=!r,u=function(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:tL(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}(t);u.aliasOf=r&&r.record;const c=rL(e,t),l=[u];if("alias"in t){const e="string"==typeof t.alias?[t.alias]:t.alias;for(const t of e)l.push(dD({},u,{components:r?r.record.components:u.components,path:t,aliasOf:r?r.record:u}))}let h,f;for(const e of l){const{path:l}=e;if(n&&"/"!==l[0]){const t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(l&&r+l)}if(h=JD(e,n,c),r?r.alias.push(h):(f=f||h,f!==h&&f.alias.push(h),a&&t.name&&!eL(h)&&o(t.name)),"children"in u){const t=u.children;for(let e=0;e<t.length;e++)i(t[e],h,r&&r.children[e])}r=r||h,s(h)}return f?()=>{o(f)}:gD}function o(t){if(jD(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}}function s(t){let e=0;for(;e<n.length&&$D(t,n[e])>=0;)e++;n.splice(e,0,t),t.record.name&&!eL(t)&&r.set(t.record.name,t)}return e=rL({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>i(t))),{addRoute:i,resolve:function(t,e){let i,o,s,a={};if("name"in t&&t.name){if(i=r.get(t.name),!i)throw WD(1,{location:t});s=i.record.name,a=dD(function(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}(e.params,i.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params),o=i.stringify(a)}else if("path"in t)o=t.path,i=n.find((t=>t.re.test(o))),i&&(a=i.parse(o),s=i.record.name);else{if(i=e.name?r.get(e.name):n.find((t=>t.re.test(e.path))),!i)throw WD(1,{location:t,currentLocation:e});s=i.record.name,a=dD({},e.params,t.params),o=i.stringify(a)}const u=[];let c=i;for(;c;)u.unshift(c.record),c=c.parent;return{name:s,path:o,params:a,matched:u,meta:nL(u)}},removeRoute:o,getRoutes:function(){return n},getRecordMatcher:function(t){return r.get(t)}}}function tL(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]="boolean"==typeof n?n:n[r];return e}function eL(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function nL(t){return t.reduce(((t,e)=>dD(t,e.meta)),{})}function rL(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const iL=/#/g,oL=/&/g,sL=/\//g,aL=/=/g,uL=/\?/g,cL=/\+/g,lL=/%5B/g,hL=/%5D/g,fL=/%5E/g,pL=/%60/g,dL=/%7B/g,vL=/%7C/g,gL=/%7D/g,mL=/%20/g;function yL(t){return encodeURI(""+t).replace(vL,"|").replace(lL,"[").replace(hL,"]")}function bL(t){return yL(t).replace(cL,"%2B").replace(mL,"+").replace(iL,"%23").replace(oL,"%26").replace(pL,"`").replace(dL,"{").replace(gL,"}").replace(fL,"^")}function _L(t){return null==t?"":function(t){return yL(t).replace(iL,"%23").replace(uL,"%3F")}(t).replace(sL,"%2F")}function wL(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function IL(t){const e={};if(""===t||"?"===t)return e;const n=("?"===t[0]?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const t=n[r].replace(cL," "),i=t.indexOf("="),o=wL(i<0?t:t.slice(0,i)),s=i<0?null:wL(t.slice(i+1));if(o in e){let t=e[o];Array.isArray(t)||(t=e[o]=[t]),t.push(s)}else e[o]=s}return e}function TL(t){let e="";for(let n in t){const r=t[n];if(n=bL(n).replace(aL,"%3D"),null==r){void 0!==r&&(e+=(e.length?"&":"")+n);continue}(Array.isArray(r)?r.map((t=>t&&bL(t))):[r&&bL(r)]).forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function EL(t){const e={};for(const n in t){const r=t[n];void 0!==r&&(e[n]=Array.isArray(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return e}function SL(){let t=[];return{add:function(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}},list:()=>t,reset:function(){t=[]}}}function CL(t,e,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((s,a)=>{const u=t=>{var u;!1===t?a(WD(4,{from:n,to:e})):t instanceof Error?a(t):"string"==typeof(u=t)||u&&"object"==typeof u?a(WD(2,{from:e,to:t})):(o&&r.enterCallbacks[i]===o&&"function"==typeof t&&o.push(t),s())},c=t.call(r&&r.instances[i],e,n,u);let l=Promise.resolve(c);t.length<3&&(l=l.then(u)),l.catch((t=>a(t)))}))}function kL(t,e,n,r){const i=[];for(const s of t)for(const t in s.components){let a=s.components[t];if("beforeRouteEnter"===e||s.instances[t])if("object"==typeof(o=a)||"displayName"in o||"props"in o||"__vccOpts"in o){const o=(a.__vccOpts||a)[e];o&&i.push(CL(o,n,r,s,t))}else{let o=a();i.push((()=>o.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${s.path}"`));const o=(a=i).__esModule||sD&&"Module"===a[Symbol.toStringTag]?i.default:i;var a;s.components[t]=o;const u=(o.__vccOpts||o)[e];return u&&CL(u,n,r,s,t)()}))))}}var o;return i}function AL(t){const e=Ue(lD),n=Ue(hD),r=Te((()=>e.resolve(be(t.to)))),i=Te((()=>{const{matched:t}=r.value,{length:e}=t,i=t[e-1],o=n.matched;if(!i||!o.length)return-1;const s=o.findIndex(_D.bind(null,i));if(s>-1)return s;const a=PL(t[e-2]);return e>1&&PL(i)===a&&o[o.length-1].path!==a?o.findIndex(_D.bind(null,t[e-2])):s})),o=Te((()=>i.value>-1&&function(t,e){for(const n in e){const r=e[n],i=t[n];if("string"==typeof r){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some(((t,e)=>t!==i[e])))return!1}return!0}(n.params,r.value.params))),s=Te((()=>i.value>-1&&i.value===n.matched.length-1&&wD(n.params,r.value.params)));return{route:r,href:Te((()=>r.value.href)),isActive:o,isExactActive:s,navigate:function(n={}){return function(t){if(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)return;if(t.defaultPrevented)return;if(void 0!==t.button&&0!==t.button)return;if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}t.preventDefault&&t.preventDefault();return!0}(n)?e[be(t.replace)?"replace":"push"](be(t.to)).catch(gD):Promise.resolve()}}}const NL=Ge({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:AL,setup(t,{slots:e}){const n=ie(AL(t)),{options:r}=Ue(lD),i=Te((()=>({[RL(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[RL(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const r=e.default&&e.default(n);return t.custom?r:Ti("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}});function PL(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const RL=(t,e,n)=>null!=t?t:null!=e?e:n;function xL(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const OL=Ge({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const r=Ue(fD),i=Te((()=>t.route||r.value)),o=Ue(cD,0),s=Te((()=>i.value.matched[o]));Fe(cD,o+1),Fe(uD,s),Fe(fD,i);const a=ge();return yi((()=>[a.value,s.value,t.name]),(([t,e,n],[r,i,o])=>{e&&(e.instances[n]=t,i&&i!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=i.leaveGuards),e.updateGuards.size||(e.updateGuards=i.updateGuards))),!t||!e||i&&_D(e,i)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const r=i.value,o=s.value,u=o&&o.components[t.name],c=t.name;if(!u)return xL(n.default,{Component:u,route:r});const l=o.props[t.name],h=l?!0===l?r.params:"function"==typeof l?l(r):l:null,f=Ti(u,dD({},h,e,{onVnodeUnmounted:t=>{t.component.isUnmounted&&(o.instances[c]=null)},ref:a}));return xL(n.default,{Component:f,route:r})||f}}});function DL(t){const e=ZD(t.routes,t),n=t.parseQuery||IL,r=t.stringifyQuery||TL,i=t.history,o=SL(),s=SL(),a=SL(),u=ye(qD,!0);let c=qD;pD&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=vD.bind(null,(t=>""+t)),h=vD.bind(null,_L),f=vD.bind(null,wL);function p(t,o){if(o=dD({},o||u.value),"string"==typeof t){const r=yD(n,t,o.path),s=e.resolve({path:r.path},o),a=i.createHref(r.fullPath);return dD(r,s,{params:f(s.params),hash:wL(r.hash),redirectedFrom:void 0,href:a})}let s;if("path"in t)s=dD({},t,{path:yD(n,t.path,o.path).path});else{const e=dD({},t.params);for(const t in e)null==e[t]&&delete e[t];s=dD({},t,{params:h(t.params)}),o.params=h(o.params)}const a=e.resolve(s,o),c=t.hash||"";a.params=l(f(a.params));const p=function(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}(r,dD({},t,{hash:(d=c,yL(d).replace(dL,"{").replace(gL,"}").replace(fL,"^")),path:a.path}));var d;const v=i.createHref(p);return dD({fullPath:p,hash:c,query:r===TL?EL(t.query):t.query||{}},a,{redirectedFrom:void 0,href:v})}function d(t){return"string"==typeof t?yD(n,t,u.value.path):dD({},t)}function v(t,e){if(c!==t)return WD(8,{from:e,to:t})}function g(t){return y(t)}function m(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r="function"==typeof n?n(t):n;return"string"==typeof r&&(r=r.includes("?")||r.includes("#")?r=d(r):{path:r},r.params={}),dD({query:t.query,hash:t.hash,params:t.params},r)}}function y(t,e){const n=c=p(t),i=u.value,o=t.state,s=t.force,a=!0===t.replace,l=m(n);if(l)return y(dD(d(l),{state:o,force:s,replace:a}),e||n);const h=n;let f;return h.redirectedFrom=e,!s&&function(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&_D(e.matched[r],n.matched[i])&&wD(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}(r,i,n)&&(f=WD(16,{to:h,from:i}),P(i,i,!0,!1)),(f?Promise.resolve(f):_(h,i)).catch((t=>HD(t)?t:A(t,h,i))).then((t=>{if(t){if(HD(t,2))return y(dD(d(t.to),{state:o,force:s,replace:a}),e||h)}else t=I(h,i,!0,a,o);return w(h,i,t),t}))}function b(t,e){const n=v(t,e);return n?Promise.reject(n):Promise.resolve()}function _(t,e){let n;const[r,i,a]=function(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const o=e.matched[s];o&&(t.matched.find((t=>_D(t,o)))?r.push(o):n.push(o));const a=t.matched[s];a&&(e.matched.find((t=>_D(t,a)))||i.push(a))}return[n,r,i]}(t,e);n=kL(r.reverse(),"beforeRouteLeave",t,e);for(const o of r)o.leaveGuards.forEach((r=>{n.push(CL(r,t,e))}));const u=b.bind(null,t,e);return n.push(u),LL(n).then((()=>{n=[];for(const r of o.list())n.push(CL(r,t,e));return n.push(u),LL(n)})).then((()=>{n=kL(i,"beforeRouteUpdate",t,e);for(const r of i)r.updateGuards.forEach((r=>{n.push(CL(r,t,e))}));return n.push(u),LL(n)})).then((()=>{n=[];for(const r of t.matched)if(r.beforeEnter&&!e.matched.includes(r))if(Array.isArray(r.beforeEnter))for(const i of r.beforeEnter)n.push(CL(i,t,e));else n.push(CL(r.beforeEnter,t,e));return n.push(u),LL(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=kL(a,"beforeRouteEnter",t,e),n.push(u),LL(n)))).then((()=>{n=[];for(const r of s.list())n.push(CL(r,t,e));return n.push(u),LL(n)})).catch((t=>HD(t,8)?t:Promise.reject(t)))}function w(t,e,n){for(const r of a.list())r(t,e,n)}function I(t,e,n,r,o){const s=v(t,e);if(s)return s;const a=e===qD,c=pD?history.state:{};n&&(r||a?i.replace(t.fullPath,dD({scroll:a&&c&&c.scroll},o)):i.push(t.fullPath,o)),u.value=t,P(t,e,n,a),N()}let T;function E(){T=i.listen(((t,e,n)=>{const r=p(t),o=m(r);if(o)return void y(dD(o,{replace:!0}),r).catch(gD);c=r;const s=u.value;var a,l;pD&&(a=OD(s.fullPath,n.delta),l=RD(),DD.set(a,l)),_(r,s).catch((t=>HD(t,12)?t:HD(t,2)?(y(t.to,r).then((t=>{HD(t,20)&&!n.delta&&n.type===ED.pop&&i.go(-1,!1)})).catch(gD),Promise.reject()):(n.delta&&i.go(-n.delta,!1),A(t,r,s)))).then((t=>{(t=t||I(r,s,!1))&&(n.delta?i.go(-n.delta,!1):n.type===ED.pop&&HD(t,20)&&i.go(-1,!1)),w(r,s,t)})).catch(gD)}))}let S,C=SL(),k=SL();function A(t,e,n){N(t);const r=k.list();return r.length?r.forEach((r=>r(t,e,n))):console.error(t),Promise.reject(t)}function N(t){S||(S=!0,E(),C.list().forEach((([e,n])=>t?n(t):e())),C.reset())}function P(e,n,r,i){const{scrollBehavior:o}=t;if(!pD||!o)return Promise.resolve();const s=!r&&function(t){const e=DD.get(t);return DD.delete(t),e}(OD(e.fullPath,0))||(i||!r)&&history.state&&history.state.scroll||null;return ui().then((()=>o(e,n,s))).then((t=>t&&xD(t))).catch((t=>A(t,e,n)))}const R=t=>i.go(t);let x;const O=new Set;return{currentRoute:u,addRoute:function(t,n){let r,i;return jD(t)?(r=e.getRecordMatcher(t),i=n):i=t,e.addRoute(i,r)},removeRoute:function(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)},hasRoute:function(t){return!!e.getRecordMatcher(t)},getRoutes:function(){return e.getRoutes().map((t=>t.record))},resolve:p,options:t,push:g,replace:function(t){return g(dD(d(t),{replace:!0}))},go:R,back:()=>R(-1),forward:()=>R(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:k.add,isReady:function(){return S&&u.value!==qD?Promise.resolve():new Promise(((t,e)=>{C.add([t,e])}))},install(t){t.component("RouterLink",NL),t.component("RouterView",OL),t.config.globalProperties.$router=this,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>be(u)}),pD&&!x&&u.value===qD&&(x=!0,g(i.location).catch((t=>{})));const e={};for(const r in qD)e[r]=Te((()=>u.value[r]));t.provide(lD,this),t.provide(hD,ie(e)),t.provide(fD,u);const n=t.unmount;O.add(t),t.unmount=function(){O.delete(t),O.size<1&&(c=qD,T&&T(),u.value=qD,x=!1,S=!1),n()}}}}function LL(t){return t.reduce(((t,e)=>t.then((()=>e()))),Promise.resolve())}function ML(){return Ue(lD)}function FL(){return Ue(hD)}export{oD as $,xe as A,yi as B,Ar as C,r as D,ao as E,er as F,fr as G,Ir as H,pr as I,rr as J,nr as K,Ge as L,Ue as M,Te as N,Fe as O,un as P,_r as Q,sn as R,ui as S,Ki as T,vo as U,Xn as V,Ti as W,kr as X,le as Y,gi as Z,a as _,Jn as a,Nr as a0,yr as b,hr as c,Tr as d,br as e,zs as f,DL as g,UD as h,bo as i,Re as j,ie as k,be as l,wr as m,po as n,ar as o,Pe as p,oo as q,ge as r,rn as s,l as t,ML as u,io as v,Fn as w,an as x,uo as y,FL as z};
